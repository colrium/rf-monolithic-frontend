(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[32],{1967:function(e,t,a){"use strict";a.r(t);var n=a(4),i=a(2),r=a(27),c=a(8),o=a(17),s=a(25),l=a(20),u=a(19),p=a(14),d=a(33),y=a.n(d),m=a(77),g=a(292),b=a(153),f=a(154),h=a(12),O=a(5),v=a(21),j=a(46),N=a(0),S=a.n(N),q=a(26),J=a(623),x=a(43),E=a.n(x),k=a(13),w=a(31),z=a(11),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).state={counts:{},aggregates:{}};var i=n.props;i.contexts,i.definations,i.cache;return n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.contexts,n=t.definations;Object.entries(a).map((function(t){var a=Object(c.a)(t,2),i=a[0],o=a[1],s=(o.title,o.type),l=(o.icon,o.description,o.query),u=o.value;Object(r.a)(o,["title","type","icon","description","query","value"]);n[i]&&["count","aggregates"].includes(s)&&!u&&e.loadData(i,s,JSON.isJSON(l)?l:{})}))}},{key:"loadData",value:function(e,t,a){var n=this.props,i=n.definations,r=n.apiCallRequest,c=i[e];c&&r(c.name+("records"!==t?"_"+t:""),{uri:c.endpoint,type:t,params:JSON.isJSON(a)?a:{},data:{},cache:!0})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,o=(e.auth,e.definations),s=e.cache,l=e.contexts,u=e.theme,p=e.wrapperSize,d=y()(t.root,a),j={count:0,aggregates:{}},N={};return JSON.isJSON(l)&&Object.entries(l).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1],l=n.title,u=n.type,p=n.icon,d=n.description,y=n.query,m=n.value,g=Object(r.a)(n,["title","type","icon","description","query","value"]);o[a]&&(JSON.isJSON(s.data)&&!m?a+"_"+u in s.data?N[a]=Object(i.a)(Object(i.a)({},g),{},{type:u,title:l||o[a].label,description:d||("count"==u?"Total ":"")+o[a].label,icon:p||o[a].icon,query:JSON.isJSON(y)?y:{},value:s.data[a+"_"+u]}):N[a]=Object(i.a)(Object(i.a)({},g),{},{type:u,title:l||o[a].label,description:d||("count"==u?"Total ":"")+o[a].label,icon:p||o[a].icon,query:JSON.isJSON(y)?y:{},value:j[u]}):N[a]=m?Object(i.a)(Object(i.a)({},g),{},{type:u,title:l||o[a].label,description:d||("count"==u?"Total ":"")+o[a].label,icon:p||o[a].icon,query:JSON.isJSON(y)?y:{},value:m}):Object(i.a)(Object(i.a)({},g),{},{type:u,title:l||o[a].label,description:d||("count"==u?"Total ":"")+o[a].label,icon:p||o[a].icon,query:JSON.isJSON(y)?y:{},value:j[u]}))})),S.a.createElement(h.a,Object(n.a)({className:"p-0 m-0"},"className",d),Object.entries(N).map((function(e,t){var a=Object(c.a)(e,2),n=a[0],i=a[1],o=i.title,s=i.type,l=(i.icon,i.description),d=i.size,y=(i.query,i.value),j=i.resolveValue,N=i.view;Object(r.a)(i,["title","type","icon","description","size","query","value","resolveValue","view"]);return S.a.createElement(O.a,{xs:12,md:d||(p>=8?3:6),key:n+"-numbers"},S.a.createElement(m.a,{elevation:1,style:{backgroundColor:u.palette.background.paper}},S.a.createElement(f.a,{title:S.a.createElement(v.a,{variant:"h5",style:{color:u.palette.text.disabled,fontWeight:"500"}},Function.isFunction(o)?o(y):o)}),S.a.createElement(b.a,{className:"p-0 m-0"},S.a.createElement(h.a,{className:"p-0 m-0"},S.a.createElement(O.a,{xs:12,className:"flex items-center justify-center"},"count"===s&&S.a.createElement(v.a,{variant:"h2",style:{color:u.palette.accent.main,fontWeight:"700",fontSize:"2rem"}}," ",y," "),"aggregates"===s&&!N&&Function.isFunction(j)&&S.a.createElement(v.a,{variant:"h2",style:{color:u.palette.accent.main,fontWeight:"700",fontSize:"2rem"}}," ",j(y)," ")))),S.a.createElement(g.a,null,S.a.createElement(v.a,{variant:"body2",style:{color:u.palette.text.default}},Function.isFunction(l)?l(y):l))))})))}}]),a}(N.Component);_.defaultProps={showGraphs:!0,wrapperSize:12,contexts:{surveys:{type:"count",query:{}},commissions:{type:"count",query:{}},responses:{type:"count",query:{}},queries:{type:"count",query:{}},tracks:{type:"count",query:{}},applications:{type:"count",query:{}},users:{type:"aggregates",query:{group:"gender",role:"collector"},title:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&(t=t+(t.length>0?" / ":"")+e._id.humanize())})),t},description:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&(t=t+(t.length>0?" / ":"")+e._id.humanize())})),"Total "+t},resolveValue:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&e.count&&(t=t+(t.length>0?" / ":"")+e.count)})),t}}}};t.default=Object(j.c)(E()(Object(p.a)((function(e){return{root:{padding:"0"},content:{alignItems:"center",display:"flex",padding:e.spacing()},title:{color:e.palette.text.secondary,fontWeight:700,padding:e.spacing(2)},value:{marginTop:e.spacing(),padding:e.spacing(2)},iconWrapper:{alignItems:"center",borderRadius:"50%",display:"inline-flex",height:"4rem",justifyContent:"center",marginLeft:"auto",width:"4rem","&:hover":{background:"rgba("+z.b.rgb.default+", 0.3)"}},icon:{color:z.b.hex.inverse,fontSize:"2rem",height:"2rem",width:"2rem"},footer:{marginTop:e.spacing(),display:"flex",alignItems:"center",padding:e.spacing()},difference:{alignItems:"center",color:z.b.hex.error,display:"inline-flex",fontWeight:700},caption:{marginLeft:e.spacing()}}})),Object(q.b)((function(e){return{auth:e.auth,cache:e.cache}}),{apiCallRequest:k.hb}),J.a,j.c,w.a)(_))}}]);
//# sourceMappingURL=32.c4c1e097.chunk.js.map