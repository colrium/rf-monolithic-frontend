(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[7,21,22],{2037:function(e,a,t){"use strict";var n=t(0),r=t.n(n),s=t(21);a.a=Object(s.a)(r.a.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert")},2038:function(e,a,t){"use strict";t.r(a);var n=t(5),r=t(25),s=t(26),l=t(19),o=t(29),i=t(28),g=t(1002),c=t(228),h=t(41),u=t.n(h),m=t(2037),d=t(298),p=t.n(d),f=t(10),b=t(31),v=t(12),E=t(6),y=t(17),A=t(0),C=t.n(A),M=t(451),O=t(22),k=t(43),j=t.n(k),S=t(13),w=t(33),x=t(34);M.c.global.legend.display=!1;var _=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).state={loading:!0,load_error:!1,aggregate:"status",aggregates:[],chart_data:{labels:[],datasets:[{data:[]}]},aggregateMenuEl:null},n.aggregatables=[],n.colors=[],n.handleShowAggregateMenu=function(e){var a=e.currentTarget;n.setState({aggregateMenuEl:a})},n.handleAggregateMenuItemClick=function(e){return function(a){n.setState({aggregateMenuEl:null}),n.loadAggregates({g:e})}},n.handleShowAggregateMenu=n.handleShowAggregateMenu.bind(Object(l.a)(n)),n.handleCloseAggregateMenu=n.handleCloseAggregateMenu.bind(Object(l.a)(n)),n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.prepareForData(),this.loadAggregates(),this.prepareChartData()}},{key:"componentDidUpdate",value:function(e){Object.areEqual(this.props.defination,e.defination)?Object.areEqual(e.api,this.props.api)?Array.isArray(this.props.cache)?this.props.cache.equals(e.cache)||this.prepareChartData():Array.isArray(e.cache)&&(e.cache.equals(this.props.cache)||this.prepareChartData()):this.prepareChartData():(this.prepareForData(),this.loadAggregates())}},{key:"prepareForData",value:function(){var e=this.props,a=e.dynamic,t=e.monochrome,r=e.color,s=e.colors,l=e.defination,o=(e.service,e.aggregate),i=e.onResolveAggregates;if(a){this.aggregatables=[];for(var g=0,c=Object.entries(l.scope.columns);g<c.length;g++){var h=Object(n.a)(c[g],2),u=h[0],m=h[1];m.possibilities&&this.aggregatables.push({name:u,label:m.label})}}if(!o&&this.aggregatables.length>0&&(o=this.aggregatables[0].name,i&&i(l.name,this.aggregatables)),a)if(this.state.aggregate=o,t){var d=this.aggregatables.length>0?this.aggregatables.length:1,p=x.d.monochromeColorScheme(r,d);this.colors=p}else if(s)this.colors=s;else{var f=this.aggregatables.length>0?this.aggregatables.length:1,b=x.d.rotationColorScheme(r,f);this.colors=b}}},{key:"prepareChartData",value:function(){var e=this.props,a=e.monochrome,t=e.color,n=e.colors,r=(e.aggregate,e.defination),s=(e.service,e.auth),l=e.onLoadAggregates,o=e.cache,i=e.api;if(Array.isArray(o)){var g=r.scope.columns[this.state.aggregate]?r.scope.columns[this.state.aggregate].possibilities:{};if("function"===typeof g&&(g=g(!1,s.user)),a){var c=o.length>0?o.length:1,h=x.d.monochromeColorScheme(i.loading||i.error?"#595959":t,c);this.colors=h}else if(n)this.colors=i.loading||i.error?x.d.monochromeColorScheme("#595959"):n;else{var u=o.length>0?o.length:1,m=x.d.rotationColorScheme(i.loading||i.error?"#595959":t,u);this.colors=m}var d=[],p=[],f=[];if("object"===typeof g)for(var b=0;b<o.length;b++)o[b]._id in g&&(d.push(g[o[b]._id]),p.push(o[b].count),l&&f.push({name:o[b]._id,label:g[o[b]._id],count:o[b].count,color:this.colors[b]}));var v={labels:d,datasets:[{data:p,backgroundColor:this.colors}]};this.setState((function(e){return{aggregates:o,chart_data:v,loading:!1}})),l&&l(f)}else{var E={labels:[],datasets:[{data:[],backgroundColor:this.colors}]};this.setState((function(e){return{aggregates:o,chart_data:E,loading:!1}})),l&&l([])}}},{key:"loadAggregates",value:function(e){var a=this.props,t=a.apiCallRequest,n=a.defination;e||(e={g:this.state.aggregate});var r="g"in e?e.g:"group"in e&&e.group;this.setState((function(e){return{aggregate:r}})),n&&t(n.name+"_aggregates",{uri:n.endpoint,type:"aggregates",params:e,data:{},cache:!0})}},{key:"handleCloseAggregateMenu",value:function(){this.setState({aggregateMenuEl:null})}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.className,r=(a.aggregate,a.dynamic),s=a.defination,l=(a.service,a.showTitle),o=a.showMenu,i=a.api;a.cache;return C.a.createElement(v.a,{className:n+" p-0 m-0"},C.a.createElement(E.a,{xs:12,className:"p-0 m-0"},C.a.createElement(v.a,{className:"p-0 m-0"},C.a.createElement(v.a,{className:"p-0 m-0"},(o||l)&&C.a.createElement(E.a,{xs:12},C.a.createElement(v.a,null,l&&!o&&C.a.createElement(E.a,{xs:12},C.a.createElement(y.a,{color:"default",variant:"body1",fullWidth:!0,center:!0},s.scope.columns[this.state.aggregate]?s.scope.columns[this.state.aggregate].label:"Unknown"," ","Aggregate")),r&&o&&C.a.createElement(E.a,{className:"p-0 m-0",xs:12},C.a.createElement(b.a,{"aria-controls":"aggregate-menu","aria-haspopup":"true",onClick:this.handleShowAggregateMenu,color:"default",className:"float-right",size:"md","aria-label":"Aggregate Menu",simple:!0},s.scope.columns[this.state.aggregate]?s.scope.columns[this.state.aggregate].label:"Unknown"," ","Aggregate",C.a.createElement(m.a,null)),C.a.createElement(g.a,{id:"surveys-aggregate-menu",anchorEl:this.state.aggregateMenuEl,keepMounted:!0,open:Boolean(this.state.aggregateMenuEl),onClose:this.handleCloseAggregateMenu},this.aggregatables.map((function(a,t){return C.a.createElement(c.a,{onClick:e.handleAggregateMenuItemClick(a.name),key:"aggregate_"+a.name},a.label+" Aggregate")})))))),C.a.createElement(E.a,{className:"p-0 m-0",xs:12},Array.isArray(this.state.chart_data.labels)&&this.state.chart_data.labels.length>0?C.a.createElement(M.b,{data:this.state.chart_data}):C.a.createElement(v.a,{className:"p-0 m-0",justify:"center",alignItems:"center"},C.a.createElement("img",{alt:"Empty Aggregates",className:t.emptyImage,src:p.a}),C.a.createElement(y.a,{className:t.emptyText,color:"grey",variant:"body2",center:!0,fullWidth:!0},"No"," ",s.scope.columns[this.state.aggregate]?s.scope.columns[this.state.aggregate].label:""," ","Aggregates")))),i.complete&&i.error&&C.a.createElement(v.a,null,C.a.createElement(E.a,{xs:12},C.a.createElement(y.a,{color:"error",variant:"body2",center:!0,fullWidth:!0},"An error occured. \n "+i.error.msg))))))}}]),t}(C.a.Component);_.defaultProps={color:f.b.hex.accent,monochrome:!0};a.default=j()(u()((function(e){return{root:{padding:"0"},data_actions_wrapper:{display:"inline-block",whiteSpace:"nowrap","& > *":{display:"inline-block",whiteSpace:"nowrap"}},valueChip:{margin:e.spacing(.5)},emptyImage:{maxWidth:100,width:"70%",margin:e.spacing(2)},emptyText:{marginTop:e.spacing(3)}}})),Object(O.b)((function(e,a){var t=a.defination;return{auth:e.auth,cache:t?e.cache.data[t.name+"_aggregates"]:null,api:t&&e.api[t.name]?e.api[t.name]:{}}}),{apiCallRequest:S.hb}),w.a)(_)},2039:function(e,a,t){"use strict";t.r(a);var n=t(5),r=t(25),s=t(26),l=t(19),o=t(29),i=t(28),g=t(1002),c=t(228),h=t(41),u=t.n(h),m=t(2037),d=t(298),p=t.n(d),f=t(10),b=t(31),v=t(12),E=t(6),y=t(17),A=t(0),C=t.n(A),M=t(451),O=t(22),k=t(43),j=t.n(k),S=t(13),w=t(33),x=t(34);M.c.global.legend.display=!1;var _=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).state={loading:!0,load_error:!1,aggregate:"status",aggregates:[],chart_data:{labels:[],datasets:[{data:[]}]},aggregateMenuEl:null},n.aggregatables=[],n.colors=[],n.handleShowAggregateMenu=function(e){var a=e.currentTarget;n.setState({aggregateMenuEl:a})},n.handleAggregateMenuItemClick=function(e){return function(a){n.setState({aggregateMenuEl:null}),n.loadAggregates({g:e})}},n.handleShowAggregateMenu=n.handleShowAggregateMenu.bind(Object(l.a)(n)),n.handleCloseAggregateMenu=n.handleCloseAggregateMenu.bind(Object(l.a)(n)),n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.prepareForData(),this.loadAggregates(),this.prepareChartData()}},{key:"componentDidUpdate",value:function(e){Object.areEqual(this.props.defination,e.defination)?Object.areEqual(e.api,this.props.api)?Array.isArray(this.props.cache)?this.props.cache.equals(e.cache)||this.prepareChartData():Array.isArray(e.cache)&&(e.cache.equals(this.props.cache)||this.prepareChartData()):this.prepareChartData():(this.prepareForData(),this.loadAggregates())}},{key:"prepareForData",value:function(){var e=this.props,a=e.dynamic,t=e.monochrome,r=e.color,s=e.colors,l=e.defination,o=(e.service,e.aggregate),i=e.onResolveAggregates;if(a&&!JSON.isEmpty(l)){this.aggregatables=[];for(var g=0,c=Object.entries(l.scope.columns);g<c.length;g++){var h=Object(n.a)(c[g],2),u=h[0],m=h[1];m.possibilities&&this.aggregatables.push({name:u,label:m.label})}}if(!o&&this.aggregatables.length>0&&(o=this.aggregatables[0].name,i&&i(l.name,this.aggregatables)),a)if(this.state.aggregate=o,t){var d=this.aggregatables.length>0?this.aggregatables.length:1,p=x.d.monochromeColorScheme(r,d);this.colors=p}else if(s)this.colors=s;else{var f=this.aggregatables.length>0?this.aggregatables.length:1,b=x.d.rotationColorScheme(r,f);this.colors=b}}},{key:"prepareChartData",value:function(){var e=this.props,a=e.monochrome,t=e.color,n=e.colors,r=(e.aggregate,e.defination),s=(e.service,e.auth),l=e.onLoadAggregates,o=e.cache,i=e.api;if(Array.isArray(o)){var g=r.scope.columns[this.state.aggregate]?r.scope.columns[this.state.aggregate].possibilities:{};if("function"===typeof g&&(g=g(!1,s.user)),a){var c=o.length>0?o.length:1,h=x.d.monochromeColorScheme(i.loading||i.error?"#595959":t,c);this.colors=h}else if(n)this.colors=i.loading||i.error?x.d.monochromeColorScheme("#595959"):n;else{var u=o.length>0?o.length:1,m=x.d.rotationColorScheme(i.loading||i.error?"#595959":t,u);this.colors=m}var d=[],p=[],f=[];if("object"===typeof g)for(var b=0;b<o.length;b++)o[b]._id in g&&(d.push(g[o[b]._id]),p.push(o[b].count),l&&f.push({name:o[b]._id,label:g[o[b]._id],count:o[b].count,color:this.colors[b]}));var v={labels:d,datasets:[{data:p,backgroundColor:this.colors}]};this.setState((function(e){return{aggregates:o,chart_data:v,loading:!1}})),l&&l(f)}else{var E={labels:[],datasets:[{data:[],backgroundColor:this.colors}]};this.setState((function(e){return{aggregates:o,chart_data:E,loading:!1}})),l&&l([])}}},{key:"loadAggregates",value:function(e){var a=this.props,t=a.apiCallRequest,n=a.defination;e||(e={g:this.state.aggregate});var r="g"in e?e.g:"group"in e&&e.group;this.setState((function(e){return{aggregate:r}})),n&&t(n.name+"_aggregates",{uri:n.endpoint,type:"aggregates",params:e,data:{},cache:!0})}},{key:"handleCloseAggregateMenu",value:function(){this.setState({aggregateMenuEl:null})}},{key:"render",value:function(){var e,a=this,t=this.props,n=t.classes,r=t.className,s=(t.aggregate,t.dynamic),l=t.defination,o=(t.service,t.showTitle),i=t.showMenu,h=t.api;t.cache;return!JSON.isEmpty(l)&&C.a.createElement(v.a,{className:r+" p-0 m-0"},C.a.createElement(E.a,{xs:12,className:"p-0 m-0"},C.a.createElement(v.a,{className:"p-0 m-0"},C.a.createElement(v.a,{className:"p-0 m-0"},(i||o)&&C.a.createElement(E.a,{xs:12},C.a.createElement(v.a,null,o&&!i&&C.a.createElement(E.a,{xs:12},C.a.createElement(y.a,{color:"default",variant:"body1",fullWidth:!0,center:!0},l.scope.columns[this.state.aggregate]?l.scope.columns[this.state.aggregate].label:"Unknown"," ","Aggregate")),s&&i&&C.a.createElement(E.a,{className:"p-0 m-0",xs:12},C.a.createElement(b.a,{"aria-controls":"aggregate-menu","aria-haspopup":"true",onClick:this.handleShowAggregateMenu,color:"default",className:"float-right",size:"md","aria-label":"Aggregate Menu",simple:!0},(null===(e=l.scope)||void 0===e?void 0:e.columns[this.state.aggregate])?l.scope.columns[this.state.aggregate].label:"Unknown"," ","Aggregate",C.a.createElement(m.a,null)),C.a.createElement(g.a,{id:"surveys-aggregate-menu",anchorEl:this.state.aggregateMenuEl,keepMounted:!0,open:Boolean(this.state.aggregateMenuEl),onClose:this.handleCloseAggregateMenu},this.aggregatables.map((function(e,t){return C.a.createElement(c.a,{onClick:a.handleAggregateMenuItemClick(e.name),key:"aggregate_"+e.name},e.label+" Aggregate")})))))),C.a.createElement(E.a,{className:"p-0 m-0",xs:12},Array.isArray(this.state.chart_data.labels)&&this.state.chart_data.labels.length>0?C.a.createElement(M.a,{data:this.state.chart_data,options:{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}):C.a.createElement(v.a,{className:"p-0 m-0",justify:"center",alignItems:"center"},C.a.createElement("img",{alt:"Empty Aggregates",className:n.emptyImage,src:p.a}),C.a.createElement(y.a,{className:n.emptyText,color:"grey",variant:"body2",center:!0,fullWidth:!0},"No"," ",l.scope.columns[this.state.aggregate]?l.scope.columns[this.state.aggregate].label:""," ","Aggregates")))),h.complete&&h.error&&C.a.createElement(v.a,null,C.a.createElement(E.a,{xs:12},C.a.createElement(y.a,{color:"error",variant:"body2",center:!0,fullWidth:!0},"An error occured. \n "+h.error.msg))))))}}]),t}(C.a.Component);_.defaultProps={color:f.b.hex.accent,monochrome:!0};a.default=j()(u()((function(e){return{root:{padding:"0"},data_actions_wrapper:{display:"inline-block",whiteSpace:"nowrap","& > *":{display:"inline-block",whiteSpace:"nowrap"}},valueChip:{margin:e.spacing(.5)},emptyImage:{maxWidth:100,width:"70%",margin:e.spacing(2)},emptyText:{marginTop:e.spacing(3)}}})),Object(O.b)((function(e,a){var t=a.defination;return{auth:e.auth,cache:t?e.cache.data[t.name+"_aggregates"]:null,api:t&&e.api[t.name]?e.api[t.name]:{}}}),{apiCallRequest:S.hb}),w.a)(_)},2042:function(e,a,t){"use strict";var n=t(40);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),s=(0,n(t(42)).default)(r.default.createElement("path",{d:"M9.17 6l2 2H20v10H4V6h5.17M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}),"FolderOutlined");a.default=s},2068:function(e,a,t){"use strict";t.r(a);var n=t(5),r=t(25),s=t(26),l=t(19),o=t(29),i=t(28),g=t(117),c=t(1002),h=t(228),u=t(41),m=t.n(u),d=t(2042),p=t.n(d),f=t(544),b=t.n(f),v=t(10),E=t(56),y=t(689),A=t(82),C=t(328),M=t(167),O=t(170),k=t(12),j=t(6),S=t(17),w=t(45),x=t(0),_=t.n(x),N=t(22),D=t(43),T=t.n(D),q=t(2038),I=t(2039),L=t(24),z=t(33),R=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var s;Object(r.a)(this,t),(s=a.call(this,e)).state={context:null,defination:!1,definations:{},aggregates:[],menuAnchorEl:null},s.handleMenuOpen=function(e){var a=e.currentTarget;s.setState((function(e){return{menuAnchorEl:a}}))},s.handleDefinationChange=function(e){return function(a){s.setState((function(a){return{menuAnchorEl:null,defination:a.definations[e]}}))}};for(var o=e.auth,i=e.definations,g=e.contexts,c={},h=0,u=Object.entries(i);h<u.length;h++){var m=Object(n.a)(u[h],2),d=m[0],p=m[1];!p.access.restricted(o.user)&&p.access.view.summary(o.user)&&g.includes(d)&&(c[d]=p,s.state.defination||(s.state.defination=p))}return s.state.definations=c,s.handleMenuOpen=s.handleMenuOpen.bind(Object(l.a)(s)),s.handleMenuClose=s.handleMenuClose.bind(Object(l.a)(s)),s.handleDefinationChange=s.handleDefinationChange.bind(Object(l.a)(s)),s.handleOnAggregatesLoad=s.handleOnAggregatesLoad.bind(Object(l.a)(s)),s}return Object(s.a)(t,[{key:"handleMenuClose",value:function(){this.setState((function(e){return{menuAnchorEl:null}}))}},{key:"handleOnAggregatesLoad",value:function(e){this.setState((function(a){return{aggregates:e}}))}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,r=a.auth,s=(a.definations,a.contexts),l=(a.gridSize,a.theme,a.chartType);return _.a.createElement(A.a,{outlineColor:"#cfd8dc"},_.a.createElement(O.a,{avatar:_.a.createElement(E.a,{"aria-label":this.state.defination.label,style:{background:this.state.defination.color}},this.state.defination.icon),title:this.state.defination.label,subheader:"Aggregates Overview",action:s.length>1&&_.a.createElement("div",null,_.a.createElement(g.a,{"aria-label":"menuicon",color:"primary",className:t.margin,onClick:this.handleMenuOpen}," ",_.a.createElement(b.a,null)," "),_.a.createElement(c.a,{id:"definations-menu",anchorEl:this.state.menuAnchorEl,keepMounted:!0,open:Boolean(this.state.menuAnchorEl),onClose:this.handleMenuClose},Object.entries(this.state.definations).map((function(a,t){var l=Object(n.a)(a,2),o=l[0],i=l[1];return!i.access.restricted(r.user)&&i.access.view.summary(r.user)&&s.includes(o)&&_.a.createElement(h.a,{onClick:e.handleDefinationChange(o),key:"aggregate-"+i.name}," ",i.label," ")}))))}),_.a.createElement(M.a,{className:"p-0 m-0"},_.a.createElement(k.a,{className:t.fullHeight,direction:"column",justify:"center",alignItems:"center"},_.a.createElement(k.a,{className:"p-0 m-0"},_.a.createElement(j.a,{xs:12},_.a.createElement(k.a,{style:{height:"100%"},direction:"column",justify:"center",alignItems:"center"},"pie"===l&&_.a.createElement(q.default,{defination:this.state.defination,service:L.a.getContextRequests(this.state.defination.endpoint),color:this.state.defination.color?this.state.defination.color:v.b.hex.primary,onLoadAggregates:this.handleOnAggregatesLoad,monochrome:!0,showTitle:!0,showMenu:!0,dynamic:!0}),"bar"===l&&_.a.createElement(I.default,{defination:this.state.defination,service:L.a.getContextRequests(this.state.defination.endpoint),color:this.state.defination.color?this.state.defination.color:v.b.hex.primary,onLoadAggregates:this.handleOnAggregatesLoad,monochrome:!0,showTitle:!0,showMenu:!0,dynamic:!0}))),_.a.createElement(j.a,{xs:12},_.a.createElement(k.a,{className:"center",direction:"column",justify:"center",alignItems:"center"},_.a.createElement(S.a,{color:"grey",variant:"body2",gutterBottom:!0},"Aggregates Index"),_.a.createElement("br",null),_.a.createElement("br",null),_.a.createElement("br",null),0===this.state.aggregates.length&&_.a.createElement(p.a,{fontSize:"large"}),this.state.aggregates.map((function(a,t){return _.a.createElement(y.a,{badgeContent:a.count,color:a.color,textColor:v.b.hex.inverse,key:e.state.defination.name+"-aggregate-"+t},_.a.createElement(S.a,{color:"default",variant:"subtitle1",component:"h3",gutterBottom:!0},a.label))}))))))),_.a.createElement(C.a,null,_.a.createElement(k.a,{className:"p-0 m-0"},_.a.createElement(j.a,{xs:12},_.a.createElement(S.a,{variant:"body2"},this.state.defination.label," by Aggregates")))))}}]),t}(_.a.Component);R.defaultProps={gridSize:12,chartType:"pie",contexts:["commissions","surveys","responses"],aggregates:[]};a.default=Object(w.c)(T()(m()((function(e){return{fullHeight:{height:"100% !important"}}})),Object(N.b)((function(e){return{auth:e.auth}}),{}),z.a)(R))}}]);
//# sourceMappingURL=7.5dcf75c2.chunk.js.map