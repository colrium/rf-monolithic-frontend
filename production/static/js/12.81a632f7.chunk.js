(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[12],{1888:function(e,t,a){e.exports=a.p+"static/media/logo-chevron.cc0777ae.svg"},1921:function(e,t,a){"use strict";var n=a(41);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(0)),r=(0,n(a(45)).default)(c.default.createElement("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCartOutlined");t.default=r},1947:function(e,t,a){"use strict";a.r(t);var n=a(27),c=a(17),r=a(25),o=a(22),s=a(20),l=a(19),m=a(11),i=a(12),u=a(5),p=a(0),d=a.n(p),f=a(31),b=a(9),h=a(1752),y=a(1757),E=a(1795),x=a(763),v=a(1921),N=a.n(v),g=a(1888),O=a.n(g),C=a(51),k=a(29),_=a(24),j=a(319),w=a(21),S=a(26),D=a(46),F=a(42),P=a(13),L=a(1758),T=a(1760),A=a(1759),J=a(1793),M=a(229),z=a(659);var H=Object(f.a)(Object(S.b)((function(e){return{auth:e.auth}}),{})((function(e){e.auth;var t=e.open,a=e.onLogin,n=e.onCancel,c=e.title,r=e.className,o=Object(p.useState)(t),s=Object(b.a)(o,2),l=s[0],m=s[1],f=Object(p.useState)(!1),h=Object(b.a)(f,2);return h[0],h[1],Object(p.useEffect)((function(){m(e.open)}),[e.open]),d.a.createElement(L.a,{onClose:function(e){return m(!1)},className:r,"aria-labelledby":"login-dialog-title",open:l},d.a.createElement(J.a,{id:"login-dialog-title"},d.a.createElement(w.a,{variant:"h5"},c||"Login"," ")),d.a.createElement(M.a,null,d.a.createElement(A.a,null,d.a.createElement(i.a,{className:"px-4"},d.a.createElement(u.a,{xs:12,className:"p-0 m-0"},d.a.createElement(z.a,{onLogin:function(e){l&&Function.isFunction(a)&&a(e),m(!1)}}))))),d.a.createElement(T.a,null,d.a.createElement(k.a,{color:"error",simple:!0,onClick:function(e){Function.isFunction(n)&&n(),m(!1)}},"Cancel")))})));var R=Object(D.c)(Object(S.b)((function(e){return{auth:e.auth,cart:e.ecommerce.cart,order:e.ecommerce.order}}),{removeFromCart:P.yb,setCartNote:P.Kb,setOrder:P.Zb,emptyCart:P.rb,setCheckoutData:P.Lb,closeDialog:P.pb,openDialog:P.wb})(Object(f.a)((function(e){var t=Object(p.useState)(e),a=Object(b.a)(t,2),n=a[0],c=a[1];Object(p.useEffect)((function(){c(e)}),[e]);var r=n.cart,o=n.order,s=n.auth,l=n.sockets,m=n.removeFromCart,f=n.setCartNote,v=n.setOrder,g=n.emptyCart,S=n.setCheckoutData,D=n.closeDialog,P=n.openDialog,L=n.onProceedToCheckout,T=n.className,A=Object(p.useState)(!1),J=Object(b.a)(A,2),M=J[0],z=J[1],R=Object(p.useState)(!1),q=Object(b.a)(R,2),I=(q[0],q[1],Object(p.useState)(!1)),K=Object(b.a)(I,2),U=K[0],W=K[1];function Y(){if(s.isAuthenticated){var e=null;Array.isArray(r.entries)&&r.entries.length>0&&(e=r.entries[0].item.currency?r.entries[0].item.currency._id:null);var t={currency:e,total:r.total,options_total:r.options_total,discount:0,tax:0,customer:s.user._id,status:"awaiting_payment",apply_coupon:!1,coupon:null,notes:r.note,items:r.entries.map((function(e,t){return{item:e.item._id,quantity:e.quantity?e.quantity:1,cost:e.item.cost,options:e.options?e.options:{},options_cost:e.options_cost}}))};if(o){var a={context:"order",order:o._id,currency:o.currency.symbol,amount:o.total,reference:o.reference,made_by:o.customer._id,account:"realfield",phone:o.customer.phone_number?o.customer.phone_number:"",email:o.customer.email_address,mpesa:"KE"===o.customer.country?"1":"0",p1:l.default?l.default.socketId:""};F.payments.gatewayData(a).then((function(e){z(!1);var t=e.body.data;S(t),Function.isFunction(L)&&L()})).catch((function(e){z(!1)}))}else F.orders.makeOrder(t).then((function(e){var t=e.body.data;v(t);var a={context:"order",order:t._id,currency:t.currency.symbol,amount:t.total,reference:t.reference,made_by:t.customer._id,account:"realfield",phone:t.customer.phone_number?t.customer.phone_number:"",email:t.customer.email_address,mpesa:"KE"===t.customer.country?"1":"0",p1:l.default?l.default.socketId:""};F.payments.gatewayData(a).then((function(e){z(!1);var t=e.body.data;S(t),Function.isFunction(L)&&L()})).catch((function(e){z(!1)}))})).catch((function(e){z(!1)}))}else W(!0)}return r.entries.length>0?d.a.createElement(i.a,{className:"px-4"+(T?" "+T:"")},d.a.createElement(u.a,{xs:12,sm:12,className:"mb-4"},d.a.createElement(w.a,{variant:"h4"}," Cart "),d.a.createElement(k.a,{color:"warning",className:"mt-2 w-auto",onClick:function(){P({title:"Empty Cart",body:"Are you sure you want to remove all items from your cart?",actions:{cancel:{text:"Dismiss",color:"grey",onClick:D},proceed:{text:"Empty",color:"error",onClick:function(){D(),g()}}}})},right:!0,simple:!0}," ","Remove all"," ")),d.a.createElement(u.a,{xs:12,className:"p-0 m-0"},d.a.createElement(h.a,{className:"w-full"},r.entries.map((function(e,t){var a=e.item;return JSON.isJSON(a)||(a={}),d.a.createElement(y.a,{alignItems:"flex-start",className:"inverse mb-2 rounded",key:"cart-item-"+t},d.a.createElement(E.a,null,d.a.createElement(C.a,null,d.a.createElement(j.a,{alt:a.name,src:a.featured_image?F.attachments.getAttachmentFileUrl(a.featured_image):O.a}))),d.a.createElement(x.a,{primary:a.name,secondary:d.a.createElement(i.a,{className:"p-0"},d.a.createElement(u.a,{xs:12,className:"m-0 p-0"},d.a.createElement(w.a,{component:"span",variant:"body2",className:"w-full ",color:"grey"}," ",a.description," ")),d.a.createElement(u.a,{xs:12,className:"m-0 mt-2 p-0"},d.a.createElement(w.a,{component:"span",variant:"body2",className:"inline",color:"default"}," ","Cost: ",a.cost," ")),d.a.createElement(u.a,{xs:12,className:"m-0 mt-2 p-0"},d.a.createElement(w.a,{component:"span",variant:"body2",className:"inline",color:"default"}," ","Options:"," ",e.options_cost," ")),d.a.createElement(u.a,{xs:12,className:"m-0 mt-2 p-0"},d.a.createElement(k.a,{color:"warning",simple:!0,onClick:function(t){return function(e){P({title:"Remove from Cart",body:"Are you sure you want to remove cart item?",actions:{cancel:{text:"Dismiss",color:"grey",onClick:D},proceed:{text:"Remove",color:"error",onClick:function(){D(),m(e)}}}})}(e)},disabled:M}," ","Remove"," ")))}))})))),d.a.createElement(u.a,{xs:12,className:"p-2"},d.a.createElement(i.a,{className:"p-0"},d.a.createElement(u.a,{xs:12,sm:12,md:6,className:"mb-2"},d.a.createElement(_.m,{type:"text",label:"Order Note",name:"note",multiline:!0,rows:4,variant:"outlined",value:r.note,onChange:function(e){return function(e){if(o){var t=JSON.updateJSON(o,{notes:e});F.orders.update(o._id,t).then((function(a){v(t),f(e)})).catch((function(e){z(!1)}))}}(e)},helperText:"Leave a note with your order"})),d.a.createElement(u.a,{xs:12,sm:12,md:6,className:"mb-4 flex flex-col"},d.a.createElement(w.a,{component:"span",variant:"h2",className:"text-right",color:"default"},d.a.createElement("span",{className:"text-gray-500 mr-2 text-base"},r.currency),d.a.createElement("span",{className:"text-3xl"},r.total)),d.a.createElement(w.a,{component:"span",variant:"h4",className:"text-right",color:"default"},d.a.createElement("span",{className:"text-gray-400 mr-4 text-xs"},"Options:"," "),d.a.createElement("span",{className:"text-gray-500 mr-2 text-xs"},r.currency),d.a.createElement("span",{className:"text-sm"},r.options_total)))),d.a.createElement(i.a,{className:"p-0"},d.a.createElement(u.a,{xs:12,sm:12,className:"mb-2"},d.a.createElement(k.a,{color:"primary",className:" w-auto",onClick:function(e){Y()},right:!0}," ","Proceed to Checkout"," ")),d.a.createElement(u.a,{xs:12,sm:12,className:"mb-4"},d.a.createElement(w.a,{component:"span",variant:"body2",className:"w-full text-right text-gray-700"}," ","Shipping & taxes calculated at checkout"," "))),d.a.createElement(H,{open:U,onLogin:Y,title:"Login to Proceed"}))):d.a.createElement(i.a,{className:"px-4"+(T?" "+T:"")},d.a.createElement(u.a,{xs:12,className:"p-0 m-0 my-20 text-center"},d.a.createElement(N.a,{className:"text-6xl m-auto text-gray-500"})),d.a.createElement(u.a,{xs:12,className:"p-0 m-0"},d.a.createElement(w.a,{component:"span",variant:"subtitle1",className:"w-full text-center text-gray-500"}," ","Your Cart is empty"," ")))})))),q=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onProceedToCheckout=n.onProceedToCheckout.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){document.title=m.a.title("Cart")}},{key:"onProceedToCheckout",value:function(){var e=this.props.history;e&&e.push("/checkout".toUriWithLandingPagePrefix())}},{key:"render",value:function(){var e=this.props;e.classes,Object(n.a)(e,["classes"]);return d.a.createElement(i.a,{className:"relative min-h-screen"},d.a.createElement(u.a,{xs:12,sm:10,md:8,className:"m-auto"},d.a.createElement(R,{className:"w-full",onProceedToCheckout:this.onProceedToCheckout})))}}]),a}(d.a.Component);t.default=Object(f.a)(q)}}]);
//# sourceMappingURL=12.81a632f7.chunk.js.map