{"version":3,"sources":["views/widgets/Overview/AggregatesOverview/index.jsx","views/widgets/Overview/AggregatesOverview/styles.jsx"],"names":["Overview","props","state","counts","aggregates","loaded","loading","main_loading","handleShowOptionsMenu","name","event","handleCloseOptionsMenu","handleAggregateMenuItemClick","column","definations","services","bind","handleOnResolveAggregates","backgroundColors","Object","entries","defination","Color","color","colors","hex","primary","rgb","array","join","this","auth","access","restricted","user","that","getRecordsCount","then","response","setState","body","data","count","classes","className","contexts","gridSize","theme","chartType","rootClassName","classNames","root","GridContainer","map","index","view","summary","includes","GridItem","xs","md","key","Card","style","background","palette","paper","CardContent","LazyModule","resolve","placeholder","variant","width","height","service","dynamic","showTitle","showMenu","monochrome","CardActions","icon","Typography","caption","label","Component","defaultProps","withGlobals","compose","withTheme","withStyles","padding","content","alignItems","display","spacing","title","text","secondary","fontWeight","value","marginTop","iconWrapper","borderRadius","justifyContent","marginLeft","inverse","fontSize","footer","difference","error","connect","withErrorHandler"],"mappings":"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","file":"static/js/43.8c4022cf.chunk.js","sourcesContent":["/** @format */\n\nimport { withStyles } from \"@material-ui/core\";\nimport { colors } from \"assets/jss/app-theme\";\nimport classNames from \"classnames\";\nimport Color from \"color\";\nimport Card from \"components/Card\";\nimport CardActions from \"components/Card/CardActions\";\nimport CardContent from \"components/Card/CardContent\";\nimport GridContainer from \"components/Grid/GridContainer\";\nimport GridItem from \"components/Grid/GridItem\";\n//\nimport { withTheme } from '@material-ui/core/styles';\nimport LazyModule from \"components/LazyModule\";\nimport Typography from \"components/Typography\";\nimport {withGlobals} from \"contexts/Globals\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport compose from \"recompose/compose\";\n\nimport { withErrorHandler } from \"hoc/ErrorHandler\";\n\n//\nimport styles from \"./styles\";\n\nclass Overview extends Component {\n\tstate = {\n\t\tcounts: {},\n\t\taggregates: {},\n\t\tloaded: {},\n\t\tloading: {},\n\t\tmain_loading: true,\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst { definations, services } = this.props;\n\t\tthis.handleShowOptionsMenu = this.handleShowOptionsMenu.bind(this);\n\t\tthis.handleCloseOptionsMenu = this.handleCloseOptionsMenu.bind(this);\n\t\tthis.handleOnResolveAggregates = this.handleOnResolveAggregates.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.backgroundColors = {};\n\t\tfor (let [name, defination] of Object.entries(definations)) {\n\t\t\tthis.backgroundColors[name] = Color(\n\t\t\t\tdefination.color ? defination.color : colors.hex.primary\n\t\t\t)\n\t\t\t\t.rgb()\n\t\t\t\t.array()\n\t\t\t\t.join(\",\");\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tconst { auth, definations, services } = this.props;\n\n\t\tfor (let [name, defination] of Object.entries(definations)) {\n\t\t\tif (!defination.access.restricted(auth.user) && name in services) {\n\t\t\t\tlet that = this;\n\t\t\t\tservices[name].getRecordsCount().then(response => {\n\t\t\t\t\tthat.setState(state => ({\n\t\t\t\t\t\tcounts: {\n\t\t\t\t\t\t\t...state.counts,\n\t\t\t\t\t\t\t[name]: response.body.data.count,\n\t\t\t\t\t\t},\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleShowOptionsMenu = name => event => {};\n\n\thandleCloseOptionsMenu = name => event => {};\n\n\thandleOnResolveAggregates(name, aggregates) {\n\t\tthis.setState(state => ({\n\t\t\taggregates: { ...state.aggregates, [name]: aggregates },\n\t\t}));\n\t}\n\n\thandleAggregateMenuItemClick = column => event => {};\n\n\trender() {\n\t\tconst { classes, className, auth, definations, services, contexts,  gridSize, theme, chartType } = this.props;\n\n\t\tconst rootClassName = classNames(classes.root, className);\n\n\t\treturn (\n\t\t\t<GridContainer className=\"p-0\" className={rootClassName}>\n\t\t\t\t{Object.entries(definations).map(\n\t\t\t\t\t([name, defination], index) =>\n\t\t\t\t\t\t!defination.access.restricted(auth.user) &&\n\t\t\t\t\t\tdefination.access.view.summary(auth.user) &&\n\t\t\t\t\t\tname in services && contexts.includes(name) && (\n\t\t\t\t\t\t\t<GridItem xs={12} md={gridSize} key={name + \"-aggregates\"}>\n\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\tclassName=\"rounded p-0\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t/*background:\n\t\t\t\t\t\t\t\t\t\t\t\"rgba(\" +\n\t\t\t\t\t\t\t\t\t\t\tthis.backgroundColors[name] +\n\t\t\t\t\t\t\t\t\t\t\t\", 0.2)\",*/\n\t\t\t\t\t\t\t\t\t\tbackground: theme.palette.background.paper,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CardContent className=\"p-0\">\n\t\t\t\t\t\t\t\t\t\t{chartType === \"pie\" && <LazyModule\n\t\t\t\t\t\t\t\t\t\t\tresolve={() =>\n\t\t\t\t\t\t\t\t\t\t\t\timport(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"views/widgets/Charts/AggregatesPieChart\"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"rect\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"30%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 50,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"m-auto float-right\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"circle\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"50%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\tdefination={defination}\n\t\t\t\t\t\t\t\t\t\t\tservice={services[name]}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\t\t\t\tdefination.color\n\t\t\t\t\t\t\t\t\t\t\t\t\t? defination.color\n\t\t\t\t\t\t\t\t\t\t\t\t\t: colors.hex.primary\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdynamic\n\t\t\t\t\t\t\t\t\t\t\tshowTitle\n\t\t\t\t\t\t\t\t\t\t\tshowMenu\n\t\t\t\t\t\t\t\t\t\t\tmonochrome\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\t\t{chartType === \"bar\" && <LazyModule\n\t\t\t\t\t\t\t\t\t\t\tresolve={() =>\n\t\t\t\t\t\t\t\t\t\t\t\timport(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"views/widgets/Charts/AggregatesBarChart\"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"rect\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"30%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 50,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"m-auto float-right\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"circle\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"50%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\tdefination={defination}\n\t\t\t\t\t\t\t\t\t\t\tservice={services[name]}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\t\t\t\tdefination.color\n\t\t\t\t\t\t\t\t\t\t\t\t\t? defination.color\n\t\t\t\t\t\t\t\t\t\t\t\t\t: colors.hex.primary\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdynamic\n\t\t\t\t\t\t\t\t\t\t\tshowTitle\n\t\t\t\t\t\t\t\t\t\t\tshowMenu\n\t\t\t\t\t\t\t\t\t\t\tmonochrome\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t\t\t{defination.icon}\n\t\t\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.caption}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t Total{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{defination.label} :{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{this.state.counts[name]\n\t\t\t\t\t\t\t\t\t\t\t\t? this.state.counts[name] + \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"0\"}\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</GridContainer>\n\t\t);\n\t}\n}\n\nOverview.propTypes = {\n\tclassName: PropTypes.string,\n\tclasses: PropTypes.object.isRequired,\n\tgridSize: PropTypes.number,\n\tchartType: PropTypes.string,\n\tcontexts:  PropTypes.array,\n};\n\nOverview.defaultProps = {\n\tgridSize: 12,\n\tchartType: \"pie\",\n\tcontexts: [\"commissions\", \"surveys\", \"responses\"]\n};\n\nconst mapStateToProps = state => ({\n\tauth: state.auth,\n});\n\nexport default withGlobals(compose(\n\twithTheme,\n\twithStyles(styles),\n\tconnect(mapStateToProps, {}),\n\twithErrorHandler\n)(Overview));\n","/** @format */\n\nimport { colors } from \"assets/jss/app-theme\";\n\nexport default theme => ({\n\troot: {\n\t\tpadding: \"0\",\n\t},\n\tcontent: {\n\t\talignItems: \"center\",\n\t\tdisplay: \"flex\",\n\t\tpadding: theme.spacing(),\n\t},\n\ttitle: {\n\t\tcolor: theme.palette.text.secondary,\n\t\tfontWeight: 700,\n\t\tpadding: theme.spacing(2),\n\t},\n\tvalue: {\n\t\tmarginTop: theme.spacing(),\n\t\tpadding: theme.spacing(2),\n\t},\n\ticonWrapper: {\n\t\talignItems: \"center\",\n\t\tborderRadius: \"50%\",\n\t\tdisplay: \"inline-flex\",\n\t\theight: \"4rem\",\n\t\tjustifyContent: \"center\",\n\t\tmarginLeft: \"auto\",\n\t\twidth: \"4rem\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"rgba(\" + colors.rgb.default + \", 0.3)\",\n\t\t},\n\t},\n\ticon: {\n\t\tcolor: colors.hex.inverse,\n\t\tfontSize: \"2rem\",\n\t\theight: \"2rem\",\n\t\twidth: \"2rem\",\n\t},\n\tfooter: {\n\t\tmarginTop: theme.spacing(),\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tpadding: theme.spacing(),\n\t},\n\tdifference: {\n\t\talignItems: \"center\",\n\t\tcolor: colors.hex.error,\n\t\tdisplay: \"inline-flex\",\n\t\tfontWeight: 700,\n\t},\n\tcaption: {\n\t\tmarginLeft: theme.spacing(),\n\t},\n});\n"],"sourceRoot":""}