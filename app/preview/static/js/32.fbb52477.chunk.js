(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[32],{2145:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),s=n(5),o=n(3),c=n(7),i=n(9),u=n(6),l=n(8),h=n(31),d=n(15),b=n(16),p=n(21),g=n(52),m=n.n(g),j=n(68),O=n.n(j),f=n(104),v=n(358),x=n(204),w=n(17),y=n(13),k=n(1061),C=n(380),M=n(29),N=n(55),R=n(1),S=n(30),T=n(53),A=n.n(T),q=n(34),z=n(0),J=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).state={counts:{},aggregates:{},loaded:{},loading:{},main_loading:!0},n.handleShowOptionsMenu=function(e){return function(e){}},n.handleCloseOptionsMenu=function(e){return function(e){}},n.handleAggregateMenuItemClick=function(e){return function(e){}};var r=n.props.definations;n.handleShowOptionsMenu=n.handleShowOptionsMenu.bind(Object(h.a)(n)),n.handleCloseOptionsMenu=n.handleCloseOptionsMenu.bind(Object(h.a)(n)),n.handleOnResolveAggregates=n.handleOnResolveAggregates.bind(Object(h.a)(n)),n.backgroundColors={};for(var s=0,o=Object.entries(r);s<o.length;s++){var c=Object(i.a)(o[s],2),l=c[0],d=c[1];n.backgroundColors[l]=O()(d.color?d.color:p.b.hex.primary).rgb().array().join(",")}return n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a,c,u,l,h=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props,n=t.auth,a=t.definations,c=function(){var e=Object(i.a)(l[u],2),t=e[0],a=e[1];if(!a.access.restricted(n.user)){var r=h;q.a.getContextRequests(null===a||void 0===a?void 0:a.endpoint).getRecordsCount().then((function(e){r.setState((function(n){return{counts:Object(o.a)(Object(o.a)({},n.counts),{},Object(s.a)({},t,e.body.data.count))}}))}))}},u=0,l=Object.entries(a);u<l.length;u++)c();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleOnResolveAggregates",value:function(e,t){this.setState((function(n){return{aggregates:Object(o.a)(Object(o.a)({},n.aggregates),{},Object(s.a)({},e,t))}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.auth,s=t.definations,o=(t.services,t.contexts),c=t.gridSize,u=t.theme,l=t.chartType,h=m()("p-0",a);return Object(z.jsx)(w.a,{className:h,children:Object.entries(s).map((function(t,a){var s=Object(i.a)(t,2),h=s[0],d=s[1];return!d.access.restricted(r.user)&&d.access.view.summary(r.user)&&o.includes(h)&&Object(z.jsx)(y.a,{xs:12,md:c,children:Object(z.jsxs)(f.a,{className:"rounded p-0",style:{background:u.palette.background.paper},children:[Object(z.jsxs)(x.a,{className:"p-0",children:["pie"===l&&Object(z.jsx)(C.a,{resolve:function(){return n.e(22).then(n.bind(null,2063))},placeholder:[{variant:"rect",width:"30%",height:50,className:"m-auto float-right"},{variant:"circle",width:150,height:150,className:"m-auto mt-4"},{variant:"text",width:"50%",className:"m-auto mt-4"}],defination:d,service:q.a.getContextRequests(d.endpoint),color:d.color?d.color:p.b.hex.primary,dynamic:!0,showTitle:!0,showMenu:!0,monochrome:!0}),"bar"===l&&Object(z.jsx)(C.a,{resolve:function(){return n.e(21).then(n.bind(null,2064))},placeholder:[{variant:"rect",width:"30%",height:50,className:"m-auto float-right"},{variant:"circle",width:150,height:150,className:"m-auto mt-4"},{variant:"text",width:"50%",className:"m-auto mt-4"}],defination:d,service:q.a.getContextRequests(d.endpoint),color:d.color?d.color:p.b.hex.primary,dynamic:!0,showTitle:!0,showMenu:!0,monochrome:!0})]}),Object(z.jsxs)(v.a,{children:[d.icon,Object(z.jsxs)(M.a,{variant:"caption",children:["Total"," ",d.label," :"," ",e.state.counts[h]?e.state.counts[h]+"":"0"]})]})]})},h+"-aggregates")}))})}}]),a}(R.Component);J.defaultProps={gridSize:12,chartType:"pie",contexts:["commissions","surveys","responses"]};t.default=Object(N.b)(A()(k.a,Object(S.b)((function(e){return{auth:e.auth}}),{}))(J))}}]);