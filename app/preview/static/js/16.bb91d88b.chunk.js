(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[16],{2126:function(e,t,a){"use strict";var c=a(49);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a(58)),s=a(0),r=(0,n.default)((0,s.jsx)("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCartOutlined");t.default=r},2159:function(e,t,a){"use strict";a.r(t);var c=a(28),n=a(6),s=a(8),r=a(31),o=a(15),i=a(16),l=a(21),u=a(17),m=a(13),d=a(1),j=a.n(d),b=a(9),h=a(1818),x=a(1814),p=a(1827),O=a(1793),f=a(2126),y=a.n(f),v=a(67),N=a(39),g=a(33),C=a(620),k=a(29),_=a(30),w=a(55),S=a(19),F=a(1803),P=a(1826),D=a(1064),L=a(1824),J=a(282),T=a(762),A=a(0);var E=Object(_.b)((function(e){return{auth:e.auth}}),{})((function(e){e.auth;var t=e.open,a=e.onLogin,c=e.onCancel,n=e.title,s=e.className,r=Object(d.useState)(t),o=Object(b.a)(r,2),i=o[0],l=o[1],j=Object(d.useState)(!1),h=Object(b.a)(j,2);return h[0],h[1],Object(d.useEffect)((function(){l(e.open)}),[e.open]),Object(A.jsxs)(F.a,{onClose:function(e){return l(!1)},className:s,"aria-labelledby":"login-dialog-title",open:i,children:[Object(A.jsx)(L.a,{id:"login-dialog-title",children:Object(A.jsxs)(k.a,{variant:"h5",children:[n||"Login"," "]})}),Object(A.jsx)(J.a,{children:Object(A.jsx)(D.a,{children:Object(A.jsx)(u.a,{className:"px-4",children:Object(A.jsx)(m.a,{xs:12,className:"p-0 m-0",children:Object(A.jsx)(T.a,{onLogin:function(e){i&&Function.isFunction(a)&&a(e),l(!1)}})})})})}),Object(A.jsx)(P.a,{children:Object(A.jsx)(N.a,{color:"error",onClick:function(e){Function.isFunction(c)&&c(),l(!1)},children:"Cancel"})})]})})),M=a(34);var z=Object(w.b)(Object(_.b)((function(e){return{auth:e.auth,cart:e.ecommerce.cart,order:e.ecommerce.order}}),{removeFromCart:S.yb,setCartNote:S.Ib,setOrder:S.Wb,emptyCart:S.rb,setCheckoutData:S.Jb,closeDialog:S.pb,openDialog:S.wb})((function(e){var t=Object(d.useState)(e),a=Object(b.a)(t,2),c=a[0],n=a[1];Object(d.useEffect)((function(){n(e)}),[e]);var s=c.cart,r=c.order,o=c.auth,i=c.sockets,l=c.removeFromCart,j=c.setCartNote,f=c.setOrder,_=c.emptyCart,w=c.setCheckoutData,S=c.closeDialog,F=c.openDialog,P=c.onProceedToCheckout,D=c.className,L=Object(d.useState)(!1),J=Object(b.a)(L,2),T=J[0],z=J[1],H=Object(d.useState)(!1),I=Object(b.a)(H,2),R=(I[0],I[1],Object(d.useState)(!1)),q=Object(b.a)(R,2),K=q[0],U=q[1];function W(){if(o.isAuthenticated){var e=null;Array.isArray(s.entries)&&s.entries.length>0&&(e=s.entries[0].item.currency?s.entries[0].item.currency._id:null);var t={currency:e,total:s.total,options_total:s.options_total,discount:0,tax:0,customer:o.user._id,status:"awaiting_payment",apply_coupon:!1,coupon:null,notes:s.note,items:s.entries.map((function(e,t){return{item:e.item._id,quantity:e.quantity?e.quantity:1,cost:e.item.cost,options:e.options?e.options:{},options_cost:e.options_cost}}))};if(r){var a={context:"order",order:r._id,currency:r.currency.symbol,amount:r.total,reference:r.reference,made_by:r.customer._id,account:"realfield",phone:r.customer.phone_number?r.customer.phone_number:"",email:r.customer.email_address,mpesa:"KE"===r.customer.country?"1":"0",p1:i.default?i.default.socketId:""};M.a.get("/payments/gateway",a).then((function(e){z(!1);var t=e.body.data;w(t),Function.isFunction(P)&&P()})).catch((function(e){z(!1)}))}else M.a.post("retail/orders/make",t).then((function(e){var t=e.body.data;f(t);var a={context:"order",order:t._id,currency:t.currency.symbol,amount:t.total,reference:t.reference,made_by:t.customer._id,account:"realfield",phone:t.customer.phone_number?t.customer.phone_number:"",email:t.customer.email_address,mpesa:"KE"===t.customer.country?"1":"0",p1:i.default?i.default.socketId:""};M.a.get("/payments/gateway",a).then((function(e){z(!1);var t=e.body.data;w(t),Function.isFunction(P)&&P()})).catch((function(e){z(!1)}))})).catch((function(e){z(!1)}))}else U(!0)}return s.entries.length>0?Object(A.jsxs)(u.a,{className:"px-4"+(D?" "+D:""),children:[Object(A.jsxs)(m.a,{xs:12,sm:12,className:"mb-4",children:[Object(A.jsx)(k.a,{variant:"h4",children:" Cart "}),Object(A.jsxs)(N.a,{color:"warning",className:"mt-2 w-auto",onClick:function(){F({title:"Empty Cart",body:"Are you sure you want to remove all items from your cart?",actions:{cancel:{text:"Dismiss",color:"grey",onClick:S},proceed:{text:"Empty",color:"error",onClick:function(){S(),_()}}}})},children:[" ","Remove all"," "]})]}),Object(A.jsx)(m.a,{xs:12,className:"p-0 m-0",children:Object(A.jsx)(h.a,{className:"w-full",children:s.entries.map((function(e,t){var a=e.item;return JSON.isJSON(a)||(a={}),Object(A.jsxs)(x.a,{alignItems:"flex-start",className:"inverse mb-2 rounded",children:[Object(A.jsx)(p.a,{children:Object(A.jsx)(v.a,{children:Object(A.jsx)(C.a,{alt:a.name,src:a.featured_image?M.a.getAttachmentFileUrl(a.featured_image):M.a.endpoint("/public/img/realfield/logo-chevron.svg")})})}),Object(A.jsx)(O.a,{primary:a.name,secondary:Object(A.jsxs)(u.a,{className:"p-0",children:[Object(A.jsx)(m.a,{xs:12,className:"m-0 p-0",children:Object(A.jsxs)(k.a,{component:"span",variant:"body2",className:"w-full ",color:"grey",children:[" ",a.description," "]})}),Object(A.jsx)(m.a,{xs:12,className:"m-0 mt-2 p-0",children:Object(A.jsxs)(k.a,{component:"span",variant:"body2",className:"inline",children:[" ","Cost: ",a.cost," "]})}),Object(A.jsx)(m.a,{xs:12,className:"m-0 mt-2 p-0",children:Object(A.jsxs)(k.a,{component:"span",variant:"body2",className:"inline",children:[" ","Options:"," ",e.options_cost," "]})}),Object(A.jsx)(m.a,{xs:12,className:"m-0 mt-2 p-0",children:Object(A.jsxs)(N.a,{color:"warning",onClick:function(t){return function(e){F({title:"Remove from Cart",body:"Are you sure you want to remove cart item?",actions:{cancel:{text:"Dismiss",color:"grey",onClick:S},proceed:{text:"Remove",color:"error",onClick:function(){S(),l(e)}}}})}(e)},disabled:T,children:[" ","Remove"," "]})})]})})]},"cart-item-"+t)}))})}),Object(A.jsxs)(m.a,{xs:12,className:"p-2",children:[Object(A.jsxs)(u.a,{className:"p-0",children:[Object(A.jsx)(m.a,{xs:12,sm:12,md:6,className:"mb-2",children:Object(A.jsx)(g.n,{type:"text",label:"Order Note",name:"note",multiline:!0,rows:4,variant:"outlined",value:s.note,onChange:function(e){return function(e){if(r){var t=JSON.updateJSON(r,{notes:e});M.a.put("retail/orders/"+r._id,t).then((function(a){f(t),j(e)})).catch((function(e){z(!1)}))}}(e)},helperText:"Leave a note with your order"})}),Object(A.jsxs)(m.a,{xs:12,sm:12,md:6,className:"mb-4 flex flex-col",children:[Object(A.jsxs)(k.a,{component:"span",variant:"h2",className:"text-right",children:[Object(A.jsx)("span",{className:"text-gray-500 mr-2 text-base",children:s.currency}),Object(A.jsx)("span",{className:"text-3xl",children:s.total})]}),Object(A.jsxs)(k.a,{component:"span",variant:"h4",className:"text-right",children:[Object(A.jsxs)("span",{className:"text-gray-400 mr-4 text-xs",children:["Options:"," "]}),Object(A.jsx)("span",{className:"text-gray-500 mr-2 text-xs",children:s.currency}),Object(A.jsx)("span",{className:"text-sm",children:s.options_total})]})]})]}),Object(A.jsxs)(u.a,{className:"p-0",children:[Object(A.jsx)(m.a,{xs:12,sm:12,className:"mb-2",children:Object(A.jsxs)(N.a,{color:"primary",className:" w-auto",onClick:function(e){W()},right:!0,children:[" ","Proceed to Checkout"," "]})}),Object(A.jsx)(m.a,{xs:12,sm:12,className:"mb-4",children:Object(A.jsxs)(k.a,{component:"span",variant:"body2",className:"w-full text-right text-gray-700",children:[" ","Shipping & taxes calculated at checkout"," "]})})]}),Object(A.jsx)(E,{open:K,onLogin:W,title:"Login to Proceed"})]})]}):Object(A.jsxs)(u.a,{className:"px-4"+(D?" "+D:""),children:[Object(A.jsx)(m.a,{xs:12,className:"p-0 m-0 my-20 text-center",children:Object(A.jsx)(y.a,{className:"text-6xl m-auto text-gray-500"})}),Object(A.jsx)(m.a,{xs:12,className:"p-0 m-0",children:Object(A.jsxs)(k.a,{component:"span",variant:"subtitle1",className:"w-full text-center text-gray-500",children:[" ","Your Cart is empty"," "]})})]})}))),H=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var c;return Object(n.a)(this,a),(c=t.call(this,e)).onProceedToCheckout=c.onProceedToCheckout.bind(Object(r.a)(c)),c}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title=l.a.title("Cart")}},{key:"onProceedToCheckout",value:function(){var e=this.props.history;e&&e.push("/checkout".toUriWithLandingPagePrefix())}},{key:"render",value:function(){var e=this.props;e.classes,Object(c.a)(e,["classes"]);return Object(A.jsx)(u.a,{className:"relative min-h-screen",children:Object(A.jsx)(m.a,{xs:12,sm:10,md:8,className:"m-auto",children:Object(A.jsx)(z,{className:"w-full",onProceedToCheckout:this.onProceedToCheckout})})})}}]),a}(j.a.Component);t.default=H}}]);