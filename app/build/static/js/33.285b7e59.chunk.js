(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[33],{2143:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(3),i=a(28),r=a(9),s=a(6),o=a(8),l=a(15),u=a(16),p=a(52),b=a.n(p),d=a(104),O=a(358),y=a(204),j=a(206),h=a(17),v=a(13),m=a(29),f=a(55),g=a(1),N=a(30),x=a(1061),q=a(53),S=a.n(q),J=a(19),k=a(0),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).state={counts:{},aggregates:{}};var c=n.props;c.contexts,c.definations,c.cache;return n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.contexts,n=t.definations;Object.entries(a).map((function(t){var a=Object(r.a)(t,2),c=a[0],s=a[1],o=(s.title,s.type),l=(s.icon,s.description,s.query),u=s.value;Object(i.a)(s,["title","type","icon","description","query","value"]);n[c]&&["count","aggregates"].includes(o)&&!u&&e.loadData(c,o,JSON.isJSON(l)?l:{})}))}},{key:"loadData",value:function(e,t,a){var n=this.props,c=n.definations,i=n.apiCallRequest,r=c[e];r&&i(r.name+("records"!==t?"_"+t:""),{uri:r.endpoint,type:t,params:JSON.isJSON(a)?a:{},data:{},cache:!0})}},{key:"render",value:function(){var e,t=this.props,a=t.className,s=(t.auth,t.definations),o=t.cache,l=t.contexts,u=t.theme,p=t.wrapperSize,f=b()(a),g={count:0,aggregates:{}},N={};return JSON.isJSON(l)&&Object.entries(l).map((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1],l=n.title,u=n.type,p=n.icon,b=n.description,d=n.query,O=n.value,y=Object(i.a)(n,["title","type","icon","description","query","value"]);s[a]&&(JSON.isJSON(o.data)&&!O?a+"_"+u in o.data?N[a]=Object(c.a)(Object(c.a)({},y),{},{type:u,title:l||s[a].label,description:b||("count"==u?"Total ":"")+s[a].label,icon:p||s[a].icon,query:JSON.isJSON(d)?d:{},value:o.data[a+"_"+u]}):N[a]=Object(c.a)(Object(c.a)({},y),{},{type:u,title:l||s[a].label,description:b||("count"==u?"Total ":"")+s[a].label,icon:p||s[a].icon,query:JSON.isJSON(d)?d:{},value:g[u]}):N[a]=O?Object(c.a)(Object(c.a)({},y),{},{type:u,title:l||s[a].label,description:b||("count"==u?"Total ":"")+s[a].label,icon:p||s[a].icon,query:JSON.isJSON(d)?d:{},value:O}):Object(c.a)(Object(c.a)({},y),{},{type:u,title:l||s[a].label,description:b||("count"==u?"Total ":"")+s[a].label,icon:p||s[a].icon,query:JSON.isJSON(d)?d:{},value:g[u]}))})),Object(k.jsx)(h.a,(e={className:"p-0 m-0"},Object(n.a)(e,"className",f),Object(n.a)(e,"children",Object.entries(N).map((function(e,t){var a=Object(r.a)(e,2),n=a[0],c=a[1],s=c.title,o=c.type,l=(c.icon,c.description),b=c.size,f=(c.query,c.value),g=c.resolveValue,N=c.view;Object(i.a)(c,["title","type","icon","description","size","query","value","resolveValue","view"]);return Object(k.jsx)(v.a,{xs:12,md:b||(p>=8?3:6),children:Object(k.jsxs)(d.a,{elevation:1,style:{backgroundColor:u.palette.background.paper},children:[Object(k.jsx)(j.a,{title:Object(k.jsx)(m.a,{variant:"h5",style:{color:u.palette.text.disabled,fontWeight:"500"},children:Function.isFunction(s)?s(f):s})}),Object(k.jsx)(y.a,{className:"p-0 m-0",children:Object(k.jsx)(h.a,{className:"p-0 m-0",children:Object(k.jsxs)(v.a,{xs:12,className:"flex items-center justify-center",children:["count"===o&&Object(k.jsxs)(m.a,{variant:"h2",style:{color:u.palette.accent.main,fontWeight:"700",fontSize:"2rem"},children:[" ",f," "]}),"aggregates"===o&&!N&&Function.isFunction(g)&&Object(k.jsxs)(m.a,{variant:"h2",style:{color:u.palette.accent.main,fontWeight:"700",fontSize:"2rem"},children:[" ",g(f)," "]})]})})}),Object(k.jsx)(O.a,{children:Object(k.jsx)(m.a,{variant:"body2",style:{color:u.palette.text.default},children:Function.isFunction(l)?l(f):l})})]})},n+"-numbers")}))),e))}}]),a}(g.Component);z.defaultProps={showGraphs:!0,wrapperSize:12,contexts:{surveys:{type:"count",query:{}},commissions:{type:"count",query:{}},responses:{type:"count",query:{}},queries:{type:"count",query:{}},tracks:{type:"count",query:{}},applications:{type:"count",query:{}},users:{type:"aggregates",query:{group:"gender",role:"collector"},title:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&(t=t+(t.length>0?" / ":"")+e._id.humanize())})),t},description:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&(t=t+(t.length>0?" / ":"")+e._id.humanize())})),"Total "+t},resolveValue:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&e.count&&(t=t+(t.length>0?" / ":"")+e.count)})),t}}}};t.default=Object(f.b)(S()(Object(N.b)((function(e){return{auth:e.auth,cache:e.cache}}),{apiCallRequest:J.hb}),x.a,f.b)(z))}}]);