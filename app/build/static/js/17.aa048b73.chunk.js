(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[17],{2068:function(e,t,a){"use strict";var s=a(28),c=a(9),i=a(6),n=a(8),r=a(31),l=a(15),o=a(16),d=a(2022),m=a(487),h=a(39),j=a(33),O=a(17),b=a(13),u=a(620),x=a(29),p=a(1),v=a.n(p),f=a(30),N=a(34),g=a(19),y=a(0),S=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var s;Object(i.a)(this,a),(s=t.call(this,e)).state={item:{},options:{},options_cost:0,selected_image:null,loading:!1,canAddToCart:!1,variantsError:!1},s.handleOnItemAdd=function(e){var t=s.props,a=t.onItemAdd,c=(t.addToCart,s.state),i=c.item,n=c.options,r=c.options_cost;Function.isFunction(a)&&a({item:i,options:n,options_cost:r})},s.handleOnVariantsChange=function(e){return function(e){var t={};if(JSON.isJSON(e))for(var a=0,i=Object.entries(e);a<i.length;a++){var n=Object(c.a)(i[a],2),r=n[0],l=n[1];t[r]=l}s.calculateOptionsPrice(t),s.canAddToCart(t),s.setState({options:t})}},s.handleOnImageSelect=function(e){return function(t){s.setState({selected_image:e})}};var n=s.props,l=n.item,o=n.options,d=n.loading;return s.state.item=l,s.state.loading=!!d,s.state.options=JSON.isJSON(o)?o:{},s.state.selected_image=JSON.isJSON(l)&&l.featured_image?N.a.getAttachmentFileUrl(l.featured_image):null,s.handleOnItemAdd=s.handleOnItemAdd.bind(Object(r.a)(s)),s.handleOnImageSelect=s.handleOnImageSelect.bind(Object(r.a)(s)),s.handleOnVariantsChange=s.handleOnVariantsChange.bind(Object(r.a)(s)),s}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.item;e.options,e.loading;JSON.isJSON(t)&&(this.calculateOptionsPrice(),this.canAddToCart())}},{key:"getSnapshotBeforeUpdate",value:function(e){return this.mounted=!1,Object.areEqual(e,this.props)?{applyChanges:!1}:{applyChanges:!0}}},{key:"componentDidUpdate",value:function(e,t,a){if(a.applyChanges){var s=JSON.updateJSON(this.state,this.props);this.setState(s),this.calculateOptionsPrice(),this.canAddToCart()}}},{key:"calculateOptionsPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item;if(JSON.isJSON(t)){var a=t.variants,c=t.cost;JSON.isJSON(e)||(e=this.state.options);var i=0;if(JSON.isJSON(a))for(var n=0,r=Object.values(a);n<r.length;n++){var l=r[n],o=l.name,d=Object(s.a)(l,["name"]);if(e[o])if("amount"==d.cost_effect_type)i+=Number.parseNumber(d.cost_effect,0);else if("percentage"==d.cost_effect_type){var m=Number.parseNumber(c,0)*Number.parseNumber(d.cost_effect,0)/100;i+=m}}this.setState({options_cost:i})}}},{key:"canAddToCart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item;if(JSON.isJSON(t)){var a=t.variants;JSON.isJSON(e)||(e=this.state.options);var s=!0,i=!1;if(JSON.isJSON(a))for(var n=0,r=Object.entries(a);n<r.length;n++){var l=Object(c.a)(r[n],2),o=(l[0],l[1]);if(o.required&&(!(o.name in e)||!e[o.name])){s=!1,i=o.label+" is required ";break}}this.setState({canAddToCart:s,variantsError:i})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.item,s=t.options_cost;return t.loading?Object(y.jsxs)(O.a,{className:"p-0 m-0",children:[Object(y.jsxs)(O.a,{children:[Object(y.jsx)(b.a,{xs:12,md:4,className:"p-0 m-0",children:Object(y.jsxs)(O.a,{className:"p-0 m-0",children:[Object(y.jsx)(b.a,{xs:12,children:Object(y.jsx)(m.a,{variant:"rect",width:"90%",height:28})}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsx)(m.a,{variant:"rect",width:"30%",height:37})}),Object(y.jsxs)(b.a,{xs:12,children:[Object(y.jsx)(m.a,{variant:"text",className:"mb-1",width:"80%"}),Object(y.jsx)(m.a,{variant:"text",className:"mb-1",width:"80%"}),Object(y.jsx)(m.a,{variant:"text",className:"mb-1",width:"70%"}),Object(y.jsx)(m.a,{variant:"text",className:"mb-1",width:"30%"})]}),Object(y.jsxs)(b.a,{xs:12,className:"flex",children:[Object(y.jsx)(m.a,{variant:"rect",className:"m-1 w-16 h-8 rounded-full"}),Object(y.jsx)(m.a,{variant:"rect",className:"m-1 w-16 h-8 rounded-full"}),Object(y.jsx)(m.a,{variant:"rect",className:"m-1 w-16 h-8 rounded-full"})]})]})}),Object(y.jsx)(b.a,{xs:12,md:8,className:"p-0 m-0",children:Object(y.jsxs)(O.a,{className:"p-0 m-0 flex flex-col",children:[Object(y.jsx)(m.a,{variant:"rect",className:"w-full",height:400}),Object(y.jsxs)("div",{className:"p-2 w-full flex",children:[Object(y.jsx)(m.a,{variant:"rect",className:"sm:w-1/4 md:w-16 mx-1",width:74,height:64}),Object(y.jsx)(m.a,{variant:"rect",className:"sm:w-1/4 md:w-16 mx-1",width:74,height:64}),Object(y.jsx)(m.a,{variant:"rect",className:"sm:w-1/4 md:w-16 mx-1",width:74,height:64})]})]})})]}),Object(y.jsx)(O.a,{children:Object(y.jsx)(b.a,{xs:12,className:"px-0 m-0",children:Object(y.jsx)(m.a,{variant:"rect",className:"w-24 rounded",height:34})})})]}):Object(y.jsxs)(O.a,{className:"p-0 m-0",children:[Object(y.jsx)(b.a,{xs:12,md:4,className:"p-0 m-0",children:Object(y.jsxs)(O.a,{className:"p-0 m-0",children:[Object(y.jsx)(b.a,{xs:12,children:Object(y.jsx)(x.a,{variant:"h3",gutterBottom:!0,children:a.name})}),a.cost>0&&JSON.isJSON(a.currency)&&Object(y.jsxs)(b.a,{xs:12,children:[Object(y.jsx)("span",{className:"text-2xl text-gray-500",children:a.currency.html_symbol}),Object(y.jsx)("span",{className:"text-3xl text-gray-900",children:(a.cost>0?a.cost:0)+s})]}),Object(y.jsxs)(b.a,{xs:12,children:[Object(y.jsx)("span",{className:"text-gray-500 mr-2",children:"Variants price:"}),Object(y.jsx)("span",{className:"text-gray-900",children:(JSON.isJSON(a.currency)&&a.currency.html_symbol?a.currency.html_symbol:"")+" "+s})]}),Object(y.jsx)(b.a,{xs:12,children:Object(y.jsx)(x.a,{variant:"body1",gutterBottom:!0,children:a.description})}),Object(y.jsxs)(b.a,{xs:12,children:["service"===a.item_type&&Object(y.jsx)(d.a,{className:"m-1",size:"small",label:"Service"}),"product"===a.item_type&&Object(y.jsx)(d.a,{className:"m-1",size:"small",label:"Product"}),a.available&&Object(y.jsx)(d.a,{className:"m-1",size:"small",label:"Available"}),a.taxable&&Object(y.jsx)(d.a,{className:"m-1",size:"small",label:"Taxable"}),a.discountable&&Object(y.jsx)(d.a,{className:"mx-1",size:"small",label:"Discountable"}),Array.isArray(a.categories)&&Object(y.jsxs)("div",{children:[" ",a.categories.map((function(e,t){return Object(y.jsx)(d.a,{label:e,className:"m-1",size:"small"},"category-"+t)}))," "]}),Array.isArray(a.tags)&&Object(y.jsxs)("div",{children:[" ",a.tags.map((function(e,t){return Object(y.jsx)(d.a,{label:e,className:"m-1",size:"small"},"tag-"+t)}))," "]})]})]})}),Object(y.jsx)(b.a,{xs:12,md:8,className:"p-0 m-0",children:Object(y.jsxs)(O.a,{className:"p-0 m-0 flex flex-col",children:[Object(y.jsx)("div",{className:"p-2 w-full flex-grow",children:Object(y.jsx)(u.a,{className:"w-full h-auto",src:this.state.selected_image?this.state.selected_image:"https://realfield.nyc3.cdn.digitaloceanspaces.com/public/img/realfield/logo-chevron.svg"})}),Object(y.jsxs)("div",{className:"p-2 w-full flex",children:[a.featured_image&&Object(y.jsx)(u.a,{className:"sm:w-1/4 md:w-16 mx-1 cursor-pointer hover:opacity-50",src:N.a.getAttachmentFileUrl(a.featured_image),onClick:this.handleOnImageSelect(N.a.getAttachmentFileUrl(a.featured_image))}),a.images.map((function(t,a){return Object(y.jsx)(u.a,{className:"sm:w-1/4 md:w-16 mx-1 cursor-pointer hover:opacity-50",src:N.a.getAttachmentFileUrl(t),onClick:e.handleOnImageSelect(N.a.getAttachmentFileUrl(t))},"item-image-"+a)}))]})]})}),Object(y.jsxs)(O.a,{className:"px-0 m-0",children:[JSON.isJSON(a.variants)&&JSON.isJSON(a.variants)&&Object(y.jsx)(b.a,{xs:12,className:"px-0 m-0",children:Object(y.jsx)(j.d,{label:"Variants",mode:"generation",name:"variants",blueprint:a.variants,value:this.state.options,onChange:this.handleOnVariantsChange("variants"),variant:"outlined",error:this.state.variantsError,validate:!0})}),Object(y.jsx)(b.a,{xs:12,className:"px-0 m-0",children:Object(y.jsxs)(h.a,{color:"primary",onClick:this.handleOnItemAdd,disabled:!this.state.canAddToCart,children:[" ","Add to Cart"," "]})})]})]})}}]),a}(v.a.Component);t.a=Object(f.b)((function(e){return{auth:e.auth,cart:e.ecommerce.cart}}),{addToCart:g.gb})(S)},2167:function(e,t,a){"use strict";a.r(t);var s=a(4),c=a.n(s),i=a(7),n=a(6),r=a(8),l=a(15),o=a(16),d=a(21),m=a(17),h=a(13),j=a(1),O=a.n(j),b=a(323),u=a.n(b),x=a(39),p=a(29),v=a(22),f=a(0),N=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.code,s=e.title,c=e.description,i=e.color,n=e.link;return Object(f.jsx)(m.a,{direction:"row",justify:"center",alignItems:"center",className:"h-full",children:Object(f.jsx)(h.a,{className:"h-full",xs:12,md:8,lg:6,children:Object(f.jsxs)(m.a,{className:"h-full",direction:"column",justify:"center",alignItems:"center",children:[Object(f.jsx)(h.a,{xs:12,children:Object(f.jsx)(p.a,{color:"error",className:"text-6xl",variant:"h1",fullWidth:!0,children:t})}),Object(f.jsx)(h.a,{xs:12,children:Object(f.jsx)(p.a,{color:"grey",className:"text-3xl",variant:"h3",fullWidth:!0,children:a})}),Object(f.jsx)(h.a,{xs:12,children:Object(f.jsx)(p.a,{color:i,variant:"h4",fullWidth:!0,children:s})}),Object(f.jsx)(h.a,{xs:12,children:Object(f.jsx)(p.a,{variant:"body1",fullWidth:!0,children:c})}),Object(f.jsx)(h.a,{xs:12,children:Object(f.jsx)(p.a,{color:"error",variant:"body1",fullWidth:!0,children:Object(f.jsxs)(v.b,{to:n,children:[" ",Object(f.jsxs)(x.a,{variant:"text",children:[" ","Back"," "]})," "]})})})]})})})}}]),a}(O.a.Component);N.defaultProps={title:"Request Failed!",description:"Something went wrong! Request Failed.",icon:Object(f.jsx)(u.a,{className:"text-6xl"}),color:"grey",code:503,link:"/"};var g=N,y=a(2068),S=a(34),w=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).state={item:null,item_id:null,loading:!0,error:!1};var c=e.match.params,i=e.history;return"id"in c?s.state.item_id=c.id:i&&i.push("/catalog".toUriWithLandingPagePrefix()),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){document.title=d.a.title("Catalog"),this.getRecord()}},{key:"getRecord",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.history,S.a.get("retail/items/"+this.state.item_id).then((function(e){var t=e.body.data;a.setState((function(e){return{item:t,loading:!1}}))})).catch((function(e){404===e.code?t.push("/not-found"):a.setState((function(t){return{error:e,loading:!1}}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=(e.item,e.loading),a=e.error;return a?Object(f.jsx)(m.a,{style:{minHeight:"90vh"},className:"relative",children:Object(f.jsx)(h.a,{xs:12,sm:12,md:10,className:"m-auto",children:Object(f.jsx)(g,{code:a.code?a.code:503,description:a.msg})})}):Object(f.jsx)(m.a,{style:{minHeight:"90vh"},className:"relative",children:Object(f.jsx)(h.a,{xs:12,sm:12,md:10,className:"m-auto",children:Object(f.jsx)(y.a,{item:this.state.item,loading:t,className:"w-full"})})})}}]),a}(O.a.Component);t.default=w}}]);