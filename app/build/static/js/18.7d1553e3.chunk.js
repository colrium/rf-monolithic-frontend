(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[18],{2068:function(e,t,a){"use strict";var s=a(28),c=a(9),i=a(6),n=a(8),r=a(31),l=a(15),d=a(16),m=a(2022),o=a(487),h=a(39),j=a(33),b=a(17),x=a(13),O=a(620),u=a(29),v=a(1),p=a.n(v),N=a(30),g=a(34),f=a(19),w=a(0),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;Object(i.a)(this,a),(s=t.call(this,e)).state={item:{},options:{},options_cost:0,selected_image:null,loading:!1,canAddToCart:!1,variantsError:!1},s.handleOnItemAdd=function(e){var t=s.props,a=t.onItemAdd,c=(t.addToCart,s.state),i=c.item,n=c.options,r=c.options_cost;Function.isFunction(a)&&a({item:i,options:n,options_cost:r})},s.handleOnVariantsChange=function(e){return function(e){var t={};if(JSON.isJSON(e))for(var a=0,i=Object.entries(e);a<i.length;a++){var n=Object(c.a)(i[a],2),r=n[0],l=n[1];t[r]=l}s.calculateOptionsPrice(t),s.canAddToCart(t),s.setState({options:t})}},s.handleOnImageSelect=function(e){return function(t){s.setState({selected_image:e})}};var n=s.props,l=n.item,d=n.options,m=n.loading;return s.state.item=l,s.state.loading=!!m,s.state.options=JSON.isJSON(d)?d:{},s.state.selected_image=JSON.isJSON(l)&&l.featured_image?g.a.getAttachmentFileUrl(l.featured_image):null,s.handleOnItemAdd=s.handleOnItemAdd.bind(Object(r.a)(s)),s.handleOnImageSelect=s.handleOnImageSelect.bind(Object(r.a)(s)),s.handleOnVariantsChange=s.handleOnVariantsChange.bind(Object(r.a)(s)),s}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.item;e.options,e.loading;JSON.isJSON(t)&&(this.calculateOptionsPrice(),this.canAddToCart())}},{key:"getSnapshotBeforeUpdate",value:function(e){return this.mounted=!1,Object.areEqual(e,this.props)?{applyChanges:!1}:{applyChanges:!0}}},{key:"componentDidUpdate",value:function(e,t,a){if(a.applyChanges){var s=JSON.updateJSON(this.state,this.props);this.setState(s),this.calculateOptionsPrice(),this.canAddToCart()}}},{key:"calculateOptionsPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item;if(JSON.isJSON(t)){var a=t.variants,c=t.cost;JSON.isJSON(e)||(e=this.state.options);var i=0;if(JSON.isJSON(a))for(var n=0,r=Object.values(a);n<r.length;n++){var l=r[n],d=l.name,m=Object(s.a)(l,["name"]);if(e[d])if("amount"==m.cost_effect_type)i+=Number.parseNumber(m.cost_effect,0);else if("percentage"==m.cost_effect_type){var o=Number.parseNumber(c,0)*Number.parseNumber(m.cost_effect,0)/100;i+=o}}this.setState({options_cost:i})}}},{key:"canAddToCart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item;if(JSON.isJSON(t)){var a=t.variants;JSON.isJSON(e)||(e=this.state.options);var s=!0,i=!1;if(JSON.isJSON(a))for(var n=0,r=Object.entries(a);n<r.length;n++){var l=Object(c.a)(r[n],2),d=(l[0],l[1]);if(d.required&&(!(d.name in e)||!e[d.name])){s=!1,i=d.label+" is required ";break}}this.setState({canAddToCart:s,variantsError:i})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.item,s=t.options_cost;return t.loading?Object(w.jsxs)(b.a,{className:"p-0 m-0",children:[Object(w.jsxs)(b.a,{children:[Object(w.jsx)(x.a,{xs:12,md:4,className:"p-0 m-0",children:Object(w.jsxs)(b.a,{className:"p-0 m-0",children:[Object(w.jsx)(x.a,{xs:12,children:Object(w.jsx)(o.a,{variant:"rect",width:"90%",height:28})}),Object(w.jsx)(x.a,{xs:12,children:Object(w.jsx)(o.a,{variant:"rect",width:"30%",height:37})}),Object(w.jsxs)(x.a,{xs:12,children:[Object(w.jsx)(o.a,{variant:"text",className:"mb-1",width:"80%"}),Object(w.jsx)(o.a,{variant:"text",className:"mb-1",width:"80%"}),Object(w.jsx)(o.a,{variant:"text",className:"mb-1",width:"70%"}),Object(w.jsx)(o.a,{variant:"text",className:"mb-1",width:"30%"})]}),Object(w.jsxs)(x.a,{xs:12,className:"flex",children:[Object(w.jsx)(o.a,{variant:"rect",className:"m-1 w-16 h-8 rounded-full"}),Object(w.jsx)(o.a,{variant:"rect",className:"m-1 w-16 h-8 rounded-full"}),Object(w.jsx)(o.a,{variant:"rect",className:"m-1 w-16 h-8 rounded-full"})]})]})}),Object(w.jsx)(x.a,{xs:12,md:8,className:"p-0 m-0",children:Object(w.jsxs)(b.a,{className:"p-0 m-0 flex flex-col",children:[Object(w.jsx)(o.a,{variant:"rect",className:"w-full",height:400}),Object(w.jsxs)("div",{className:"p-2 w-full flex",children:[Object(w.jsx)(o.a,{variant:"rect",className:"sm:w-1/4 md:w-16 mx-1",width:74,height:64}),Object(w.jsx)(o.a,{variant:"rect",className:"sm:w-1/4 md:w-16 mx-1",width:74,height:64}),Object(w.jsx)(o.a,{variant:"rect",className:"sm:w-1/4 md:w-16 mx-1",width:74,height:64})]})]})})]}),Object(w.jsx)(b.a,{children:Object(w.jsx)(x.a,{xs:12,className:"px-0 m-0",children:Object(w.jsx)(o.a,{variant:"rect",className:"w-24 rounded",height:34})})})]}):Object(w.jsxs)(b.a,{className:"p-0 m-0",children:[Object(w.jsx)(x.a,{xs:12,md:4,className:"p-0 m-0",children:Object(w.jsxs)(b.a,{className:"p-0 m-0",children:[Object(w.jsx)(x.a,{xs:12,children:Object(w.jsx)(u.a,{variant:"h3",gutterBottom:!0,children:a.name})}),a.cost>0&&JSON.isJSON(a.currency)&&Object(w.jsxs)(x.a,{xs:12,children:[Object(w.jsx)("span",{className:"text-2xl text-gray-500",children:a.currency.html_symbol}),Object(w.jsx)("span",{className:"text-3xl text-gray-900",children:(a.cost>0?a.cost:0)+s})]}),Object(w.jsxs)(x.a,{xs:12,children:[Object(w.jsx)("span",{className:"text-gray-500 mr-2",children:"Variants price:"}),Object(w.jsx)("span",{className:"text-gray-900",children:(JSON.isJSON(a.currency)&&a.currency.html_symbol?a.currency.html_symbol:"")+" "+s})]}),Object(w.jsx)(x.a,{xs:12,children:Object(w.jsx)(u.a,{variant:"body1",gutterBottom:!0,children:a.description})}),Object(w.jsxs)(x.a,{xs:12,children:["service"===a.item_type&&Object(w.jsx)(m.a,{className:"m-1",size:"small",label:"Service"}),"product"===a.item_type&&Object(w.jsx)(m.a,{className:"m-1",size:"small",label:"Product"}),a.available&&Object(w.jsx)(m.a,{className:"m-1",size:"small",label:"Available"}),a.taxable&&Object(w.jsx)(m.a,{className:"m-1",size:"small",label:"Taxable"}),a.discountable&&Object(w.jsx)(m.a,{className:"mx-1",size:"small",label:"Discountable"}),Array.isArray(a.categories)&&Object(w.jsxs)("div",{children:[" ",a.categories.map((function(e,t){return Object(w.jsx)(m.a,{label:e,className:"m-1",size:"small"},"category-"+t)}))," "]}),Array.isArray(a.tags)&&Object(w.jsxs)("div",{children:[" ",a.tags.map((function(e,t){return Object(w.jsx)(m.a,{label:e,className:"m-1",size:"small"},"tag-"+t)}))," "]})]})]})}),Object(w.jsx)(x.a,{xs:12,md:8,className:"p-0 m-0",children:Object(w.jsxs)(b.a,{className:"p-0 m-0 flex flex-col",children:[Object(w.jsx)("div",{className:"p-2 w-full flex-grow",children:Object(w.jsx)(O.a,{className:"w-full h-auto",src:this.state.selected_image?this.state.selected_image:"https://realfield.nyc3.cdn.digitaloceanspaces.com/public/img/realfield/logo-chevron.svg"})}),Object(w.jsxs)("div",{className:"p-2 w-full flex",children:[a.featured_image&&Object(w.jsx)(O.a,{className:"sm:w-1/4 md:w-16 mx-1 cursor-pointer hover:opacity-50",src:g.a.getAttachmentFileUrl(a.featured_image),onClick:this.handleOnImageSelect(g.a.getAttachmentFileUrl(a.featured_image))}),a.images.map((function(t,a){return Object(w.jsx)(O.a,{className:"sm:w-1/4 md:w-16 mx-1 cursor-pointer hover:opacity-50",src:g.a.getAttachmentFileUrl(t),onClick:e.handleOnImageSelect(g.a.getAttachmentFileUrl(t))},"item-image-"+a)}))]})]})}),Object(w.jsxs)(b.a,{className:"px-0 m-0",children:[JSON.isJSON(a.variants)&&JSON.isJSON(a.variants)&&Object(w.jsx)(x.a,{xs:12,className:"px-0 m-0",children:Object(w.jsx)(j.d,{label:"Variants",mode:"generation",name:"variants",blueprint:a.variants,value:this.state.options,onChange:this.handleOnVariantsChange("variants"),variant:"outlined",error:this.state.variantsError,validate:!0})}),Object(w.jsx)(x.a,{xs:12,className:"px-0 m-0",children:Object(w.jsxs)(h.a,{color:"primary",onClick:this.handleOnItemAdd,disabled:!this.state.canAddToCart,children:[" ","Add to Cart"," "]})})]})]})}}]),a}(p.a.Component);t.a=Object(N.b)((function(e){return{auth:e.auth,cart:e.ecommerce.cart}}),{addToCart:f.gb})(S)},2160:function(e,t,a){"use strict";a.r(t);var s=a(28),c=a(6),i=a(8),n=a(15),r=a(16),l=a(21),d=a(17),m=a(13),o=a(1),h=a.n(o),j=a(31),b=a(298),x=a(761),O=a.n(x),u=a(30),v=a(19),p=a(2068),N=a(5),g=a(3),f=a(487),w=a(39),S=a(620),y=a(34),_=a(0),J=function(e){Object(n.a)(a,e);var t=Object(r.a)(a);function a(e){var s;Object(c.a)(this,a),(s=t.call(this,e)).state={retailitems:[],loading:!0,load_err:!1},s.handleOnItemSelect=function(e){return function(t){var a=s.props.onItemSelect;Function.isFunction(a)&&a(e,t)}};var i=s.props.params;return s.state.params={p:1},JSON.isJSON(i)&&(s.state.params=Object(g.a)(Object(g.a)({},i),{},{p:1})),s.handleOnItemSelect=s.handleOnItemSelect.bind(Object(j.a)(s)),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"componentDidUpdate",value:function(e,t,a){var s=this,c=this.props.params,i={p:1};JSON.isJSON(c)&&(i=Object(g.a)(Object(g.a)({},c),{},{p:1}),Object.areEqual(this.state.params,i)||this.setState({params:c},(function(){s.loadItems()})))}},{key:"loadItems",value:function(){var e=this,t=this.state.params;this.setState((function(e){return{loading:!0,load_err:null}})),y.a.get("retail/items",t).then((function(t){e.setState((function(e){return{retailitems:t.body.data,loading:!1,load_err:null}}))})).catch((function(t){e.setState((function(e){return{retailitems:[],loading:!1,load_err:t}}))}))}},{key:"render",value:function(){var e=this;return Object(_.jsxs)(d.a,{className:"p-0 m-0",children:[this.state.loading&&Object(_.jsxs)(d.a,{className:"flex-10",children:[Object(_.jsx)(m.a,{xs:12,md:4,lg:3,children:Object(_.jsxs)("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden",children:[Object(_.jsx)(f.a,{variant:"rect",width:"100%",height:224}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(_.jsx)(f.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),Object(_.jsx)(f.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})]})}),Object(_.jsx)(m.a,{xs:12,md:4,lg:3,children:Object(_.jsxs)("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden",children:[Object(_.jsx)(f.a,{variant:"rect",width:"100%",height:224}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(_.jsx)(f.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),Object(_.jsx)(f.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})]})}),Object(_.jsx)(m.a,{xs:12,md:4,lg:3,children:Object(_.jsxs)("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden",children:[Object(_.jsx)(f.a,{variant:"rect",width:"100%",height:224}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(_.jsx)(f.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(_.jsx)(f.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),Object(_.jsx)(f.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})]})})]}),!this.state.loading&&Array.isArray(this.state.retailitems)&&Object(_.jsx)(d.a,{className:"p-4 m-0",children:this.state.retailitems.map((function(t,a){var s;return t.available&&Object(_.jsx)(m.a,(s={xs:12},Object(N.a)(s,"xs",12),Object(N.a)(s,"md",4),Object(N.a)(s,"lg",3),Object(N.a)(s,"className","flex flex-col"),Object(N.a)(s,"children",Object(_.jsxs)("div",{className:"bg-white shadow-xl rounded-lg overflow-hidden",children:[Object(_.jsx)("div",{className:"bg-cover bg-center h-56 p-0",children:Object(_.jsx)(S.a,{className:"w-full h-full",src:t.featured_image?y.a.getAttachmentFileUrl(t.featured_image):"https://realfield.nyc3.cdn.digitaloceanspaces.com/public/img/realfield/logo-chevron.svg"})}),Object(_.jsxs)("div",{className:"p-4",children:[Object(_.jsx)("p",{className:"uppercase truncate tracking-wide text-sm  text-gray-900",children:t.name}),t.cost>0&&JSON.isJSON(t.currency)&&Object(_.jsx)("p",{className:"text-3xl text-gray-900 my-4",children:t.currency.html_symbol+" "+t.cost}),Object(_.jsx)("p",{className:"truncate tracking-wide text-sm  text-gray-500",children:t.description?t.description:"No description available"})]}),Object(_.jsxs)("div",{className:"flex p-4 border-t border-gray-300 text-gray-700",children:[Object(_.jsx)("div",{className:"flex-1 inline-flex items-center",children:Object(_.jsx)("p",{className:" text-gray-900 font-bold",children:"Type"})}),Object(_.jsx)("div",{className:"flex-1 inline-flex items-left",children:Object(_.jsx)("p",{className:"capitalize",children:t.item_type})})]}),Object(_.jsx)("div",{className:"px-4 pt-3 pb-4 border-t border-gray-300 bg-gray-100",children:Object(_.jsx)(w.a,{className:"w-full",color:"primary",onClick:e.handleOnItemSelect(t),children:"View"})})]})),s),t._id)}))})]})}}]),a}(h.a.Component),C=function(e){Object(n.a)(a,e);var t=Object(r.a)(a);function a(e){var s;Object(c.a)(this,a),(s=t.call(this,e)).state={view:"gridview",prev_view:"gridview",items:[],context:null,params:{}},s.handleOnItemSelect=function(e,t){s.props.onContextChange;s.setState((function(t){return{view:"itemview",context:e,prev_view:t.view}}))},s.handleOnItemAdd=function(e){var t=s.props.addToCart;Function.isFunction(t)&&t(e),s.setState((function(e){return{view:e.prev_view,prev_view:e.view,context:{}}}))},s.handleOnBackClick=function(e){s.setState((function(e){return{view:e.prev_view,prev_view:e.view}}))};var i=e.context,n=e.view;return i&&(s.state.context=i),n&&(s.state.view=n),s.handleOnItemSelect=s.handleOnItemSelect.bind(Object(j.a)(s)),s.handleOnItemAdd=s.handleOnItemAdd.bind(Object(j.a)(s)),s.handleOnBackClick=s.handleOnBackClick.bind(Object(j.a)(s)),s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,a){var s=this.props,c=s.context,i=s.view;Object.areEqual(this.state.context,c)&&Object.areEqual(this.state.view,i)||this.setState({view:i,context:c})}},{key:"render",value:function(){return Object(_.jsxs)(d.a,{className:"p-0 m-0",children:[Object(_.jsx)(d.a,{className:"p-0 m-0",children:!["gridview"].includes(this.state.view)&&Object(_.jsx)(m.a,{xs:6,className:"float-left",children:Object(_.jsx)(b.a,{"aria-label":"back",onClick:this.handleOnBackClick,children:Object(_.jsx)(O.a,{fontSize:"inherit"})})})}),Object(_.jsxs)(d.a,{className:"p-0 m-0",children:["gridview"===this.state.view&&Object(_.jsx)(J,{onItemSelect:this.handleOnItemSelect,params:this.state.params}),"itemview"===this.state.view&&Object(_.jsx)(p.a,{onItemAdd:this.handleOnItemAdd,item:this.state.context})]})]})}}]),a}(h.a.Component),k=Object(u.b)((function(e){return{auth:e.auth,order_progress:e.ecommerce.order_progress}}),{addToCart:v.gb,removeFromCart:v.yb,closeDialog:v.pb,openDialog:v.wb})(C),A=function(e){Object(n.a)(a,e);var t=Object(r.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){document.title=l.a.title("Catalog")}},{key:"render",value:function(){var e=this.props;e.classes,Object(s.a)(e,["classes"]);return Object(_.jsx)(d.a,{style:{minHeight:"90vh"},className:"relative",children:Object(_.jsx)(m.a,{xs:12,sm:12,md:10,className:"m-auto",children:Object(_.jsx)(k,{className:"w-full"})})})}}]),a}(h.a.Component);t.default=A}}]);