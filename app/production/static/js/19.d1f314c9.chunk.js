(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[19],{1886:function(e,t,a){e.exports=a.p+"static/media/logo-chevron.cc0777ae.svg"},1948:function(e,t,a){"use strict";a.r(t);var n=a(17),s=a(25),r=a(22),l=a(19),i=a(18),c=a(161),m=a(656),o=a.n(m),d=a(1887),u=a.n(d),h=a(29),v=a(12),p=a(5),f=a(0),x=a.n(f),N=a(58),E=a(2),g=a(1853),b=a(1886),O=a.n(b),w=a(318),y=a(229),S=a(42),_=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).state={retailitems:[],loading:!0,load_err:!1},s.handleOnItemSelect=function(e){return function(t){var a=s.props.onItemSelect;Function.isFunction(a)&&a(e,t)}};var l=s.props.params;return s.state.params={p:1},JSON.isJSON(l)&&(s.state.params=Object(E.a)(Object(E.a)({},l),{},{p:1})),s.handleOnItemSelect=s.handleOnItemSelect.bind(Object(r.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"componentDidUpdate",value:function(e,t,a){var n=this,s=this.props.params,r={p:1};JSON.isJSON(s)&&(r=Object(E.a)(Object(E.a)({},s),{},{p:1}),Object.areEqual(this.state.params,r)||this.setState({params:s},(function(){n.loadItems()})))}},{key:"loadItems",value:function(){var e=this,t=this.state.params;this.setState((function(e){return{loading:!0,load_err:null}})),S.retailitems.getRecords(t).then((function(t){e.setState((function(e){return{retailitems:t.body.data,loading:!1,load_err:null}}))})).catch((function(t){e.setState((function(e){return{retailitems:[],loading:!1,load_err:t}}))}))}},{key:"render",value:function(){var e=this;return x.a.createElement(v.a,{className:"p-0 m-0"},this.state.loading&&x.a.createElement(v.a,{className:"flex-10"},x.a.createElement(p.a,{xs:12,md:6,lg:4},x.a.createElement("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden"},x.a.createElement(g.a,{variant:"rect",width:"100%",height:224}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),x.a.createElement(g.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),x.a.createElement(g.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"}))),x.a.createElement(p.a,{xs:12,md:6,lg:4},x.a.createElement("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden"},x.a.createElement(g.a,{variant:"rect",width:"100%",height:224}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),x.a.createElement(g.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),x.a.createElement(g.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"}))),x.a.createElement(p.a,{xs:12,md:6,lg:4},x.a.createElement("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden"},x.a.createElement(g.a,{variant:"rect",width:"100%",height:224}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),x.a.createElement(g.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),x.a.createElement(g.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),x.a.createElement(g.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})))),!this.state.loading&&Array.isArray(this.state.retailitems)&&x.a.createElement(y.a,{className:"flex-10 overflow-x-hidden overflow-y-scroll"},x.a.createElement(v.a,{className:"p-4 m-0"},this.state.retailitems.map((function(t,a){return t.available&&x.a.createElement(p.a,{xs:12,md:6,lg:4,className:"flex flex-col",key:t._id},x.a.createElement("div",{className:"bg-white shadow-xl rounded-lg overflow-hidden"},x.a.createElement("div",{className:"bg-cover bg-center h-56 p-0"},x.a.createElement(w.a,{className:"w-full h-full",src:t.featured_image?S.attachments.getAttachmentFileUrl(t.featured_image):O.a})),x.a.createElement("div",{className:"p-4"},x.a.createElement("p",{className:"uppercase truncate tracking-wide text-sm  text-gray-900"},t.name),t.cost>0&&JSON.isJSON(t.currency)&&x.a.createElement("p",{className:"text-3xl text-gray-900 my-4"},t.currency.html_symbol+" "+t.cost),x.a.createElement("p",{className:"truncate tracking-wide text-sm  text-gray-500"},t.description?t.description:"No description available")),x.a.createElement("div",{className:"flex p-4 border-t border-gray-300 text-gray-700"},x.a.createElement("div",{className:"flex-1 inline-flex items-center"},x.a.createElement("p",{className:" text-gray-900 font-bold"},"Type")),x.a.createElement("div",{className:"flex-1 inline-flex items-left"},x.a.createElement("p",{className:"capitalize"},t.item_type))),x.a.createElement("div",{className:"px-4 pt-3 pb-4 border-t border-gray-300 bg-gray-100"},x.a.createElement(h.a,{className:"w-full",color:"primary",onClick:e.handleOnItemSelect(t)},"View"))))})))))}}]),a}(x.a.Component),j=Object(N.a)(_),k=a(27),C=a(9),A=a(894),J=a(24),I=a(21),F=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).state={item:{},options:{},options_cost:0,selected_image:null,loading:!0,load_err:!1,canAddToCart:!1,variantsError:!1},s.handleOnItemAdd=function(e){var t=s.props.onItemAdd,a=s.state,n=a.item,r=a.options,l=a.options_cost;Function.isFunction(t)&&t({item:n,options:r,options_cost:l})},s.handleOnVariantsChange=function(e){return function(e){var t={};if(JSON.isJSON(e))for(var a=0,n=Object.entries(e);a<n.length;a++){var r=Object(C.a)(n[a],2),l=r[0],i=r[1];t[l]=i}s.calculateOptionsPrice(t),s.canAddToCart(t),s.setState({options:t})}},s.handleOnImageSelect=function(e){return function(t){s.setState({selected_image:e})}};var l=s.props,i=l.item,c=l.options;return s.state.item=i,s.state.options=JSON.isJSON(c)?c:{},s.state.selected_image=i.featured_image?S.attachments.getAttachmentFileUrl(i.featured_image):null,s.handleOnItemAdd=s.handleOnItemAdd.bind(Object(r.a)(s)),s.handleOnImageSelect=s.handleOnImageSelect.bind(Object(r.a)(s)),s.handleOnVariantsChange=s.handleOnVariantsChange.bind(Object(r.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.calculateOptionsPrice(),this.canAddToCart()}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.item,s=e.item;Object.areEqual(n,s)||this.setState({item:n})}},{key:"calculateOptionsPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item,a=t.variants,n=t.cost;JSON.isJSON(e)||(e=this.state.options);var s=0;if(JSON.isJSON(a))for(var r=0,l=Object.values(a);r<l.length;r++){var i=l[r],c=i.name,m=Object(k.a)(i,["name"]);if(e[c])if("amount"==m.cost_effect_type)s+=Number.parseNumber(m.cost_effect,0);else if("percentage"==m.cost_effect_type){var o=Number.parseNumber(n,0)*Number.parseNumber(m.cost_effect,0)/100;s+=o}}this.setState({options_cost:s})}},{key:"canAddToCart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item.variants;JSON.isJSON(e)||(e=this.state.options);var a=!0,n=!1;if(JSON.isJSON(t))for(var s=0,r=Object.entries(t);s<r.length;s++){var l=Object(C.a)(r[s],2),i=(l[0],l[1]);if(i.required&&(!(i.name in e)||!e[i.name])){a=!1,n=i.label+" is required ";break}}this.setState({canAddToCart:a,variantsError:n})}},{key:"render",value:function(){var e=this,t=this.state,a=t.item,n=t.options_cost;return x.a.createElement(v.a,{className:"p-0 m-0"},x.a.createElement(p.a,{xs:12,md:4,className:"p-0 m-0"},x.a.createElement(v.a,{className:"p-0 m-0"},x.a.createElement(p.a,{xs:12},x.a.createElement(I.a,{variant:"h3",gutterBottom:!0},a.name)),a.cost>0&&JSON.isJSON(a.currency)&&x.a.createElement(p.a,{xs:12},x.a.createElement("span",{className:"text-2xl text-gray-500"},a.currency.html_symbol),x.a.createElement("span",{className:"text-3xl text-gray-900"},(a.cost>0?a.cost:0)+n)),x.a.createElement(p.a,{xs:12},x.a.createElement("span",{className:"text-gray-500 mr-2"},"Variants price:"),x.a.createElement("span",{className:"text-gray-900"},(JSON.isJSON(a.currency)&&a.currency.html_symbol?a.currency.html_symbol:"")+" "+n)),x.a.createElement(p.a,{xs:12},x.a.createElement(I.a,{variant:"body1",gutterBottom:!0},a.description)),x.a.createElement(p.a,{xs:12},"service"===a.item_type&&x.a.createElement(A.a,{className:"m-1",size:"small",label:"Service"}),"product"===a.item_type&&x.a.createElement(A.a,{className:"m-1",size:"small",label:"Product"}),a.available&&x.a.createElement(A.a,{className:"m-1",size:"small",label:"Available"}),a.taxable&&x.a.createElement(A.a,{className:"m-1",size:"small",label:"Taxable"}),a.discountable&&x.a.createElement(A.a,{className:"mx-1",size:"small",label:"Discountable"}),Array.isArray(a.categories)&&x.a.createElement("div",null," ",a.categories.map((function(e,t){return x.a.createElement(A.a,{label:e,className:"m-1",size:"small",key:"category-"+t})}))," "),Array.isArray(a.tags)&&x.a.createElement("div",null," ",a.tags.map((function(e,t){return x.a.createElement(A.a,{label:e,className:"m-1",size:"small",key:"tag-"+t})}))," ")))),x.a.createElement(p.a,{xs:12,md:8,className:"p-0 m-0"},x.a.createElement(v.a,{className:"p-0 m-0 flex flex-col"},x.a.createElement("div",{className:"p-2 w-full flex-grow"},x.a.createElement(w.a,{className:"w-full h-auto",src:this.state.selected_image?this.state.selected_image:O.a})),x.a.createElement("div",{className:"p-2 w-full flex"},Array.isArray(a.tags)&&x.a.createElement("div",{className:"w-full flex"}," ",a.images.map((function(t,a){return x.a.createElement(w.a,{className:"sm:w-1/4 md:w-16 mx-1 cursor-pointer hover:opacity-50",src:S.attachments.getAttachmentFileUrl(t),onClick:e.handleOnImageSelect(S.attachments.getAttachmentFileUrl(t)),key:"item-image-"+a})}))," ")))),x.a.createElement(v.a,{className:"px-0 m-0"},JSON.isJSON(a.variants)&&JSON.isJSON(a.variants)&&x.a.createElement(p.a,{xs:12,className:"px-0 m-0"},x.a.createElement(J.d,{label:"Variants",mode:"generation",name:"variants",blueprint:a.variants,value:this.state.options,onChange:this.handleOnVariantsChange("variants"),variant:"outlined",error:this.state.variantsError})),x.a.createElement(p.a,{xs:12,className:"px-0 m-0"},x.a.createElement(h.a,{color:"primary",onClick:this.handleOnItemAdd,disabled:!this.state.canAddToCart}," ","Add to cart"," "))))}}]),a}(x.a.Component),z=Object(N.a)(F),T=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).state={view:"gridview",prev_view:"gridview",items:[],context:null,params:{}},s.handleOnItemSelect=function(e,t){var a=s.props.onContextChange;s.setState((function(t){return{view:"itemview",context:e,prev_view:t.view}})),Function.isFunction(a)&&a(e,"itemview")},s.handleOnItemAdd=function(e){var t=s.props,a=t.onAddToCart,n=t.onContextChange;Function.isFunction(a)&&a(e),Function.isFunction(n)&&n(null,s.state.prev_view),s.setState((function(e){return{view:e.prev_view,prev_view:e.view,context:{}}}))},s.handleOnBackClick=function(e){var t=s.props.onContextChange;Function.isFunction(t)&&t(null,s.state.prev_view),s.setState((function(e){return{view:e.prev_view,prev_view:e.view}}))};var l=e.context,i=e.view;return l&&(s.state.context=l),i&&(s.state.view=i),s.handleOnItemSelect=s.handleOnItemSelect.bind(Object(r.a)(s)),s.handleOnItemAdd=s.handleOnItemAdd.bind(Object(r.a)(s)),s.handleOnBackClick=s.handleOnBackClick.bind(Object(r.a)(s)),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props,s=n.context,r=n.view;Object.areEqual(this.state.context,s)&&Object.areEqual(this.state.view,r)||this.setState({view:r,context:s})}},{key:"handleOnComplete",value:function(){var e=this.props.onComplete;Function.isFunction(e)&&e(this.state.items)}},{key:"render",value:function(){var e=this.props,t=e.onComplete,a=e.onCancel;return x.a.createElement(v.a,{className:"p-0 m-0"},x.a.createElement(v.a,{className:"p-0 m-0"},!["gridview"].includes(this.state.view)&&x.a.createElement(p.a,{xs:6,className:"float-left"},x.a.createElement(c.a,{"aria-label":"back",onClick:this.handleOnBackClick},x.a.createElement(o.a,{fontSize:"inherit"})))),x.a.createElement(v.a,{className:"p-0 m-0"},"gridview"===this.state.view&&x.a.createElement(j,{onItemSelect:this.handleOnItemSelect,params:this.state.params}),"itemview"===this.state.view&&x.a.createElement(z,{onItemAdd:this.handleOnItemAdd,item:this.state.context})),x.a.createElement(v.a,{className:"p-4"},this.state.items.length>0&&x.a.createElement(p.a,{xs:12,md:6,className:"flex justify-start"},x.a.createElement(h.a,{onClick:t,color:"primary",round:!0},x.a.createElement(u.a,null)," Proceed"," ")),x.a.createElement(p.a,{xs:12,md:this.state.items.length>0?6:12,className:"flex justify-end"},x.a.createElement(h.a,{onClick:a,color:"inverse",round:!0}," ","Back"," "))))}}]),a}(x.a.Component);t.default=Object(N.a)(T)}}]);
//# sourceMappingURL=19.d1f314c9.chunk.js.map