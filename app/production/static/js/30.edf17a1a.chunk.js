(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[30],{1382:function(e,t,a){"use strict";var r=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),i=(0,r(a(61)).default)(n.default.createElement("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"}),"WarningRounded");t.default=i},1923:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),i=a(20),s=a(14),c=a(26),o=a(27),l=a(18),d=a(17),u=a(430),h=a(43),m=a.n(h),f=a(1382),v=a.n(f),p=a(1303),b=a(3),E=a(23),_=a(22),g=a(16),y=a(21),x=a(0),S=a.n(x),N=a(35),O=a(8),w=a(63),j=a.n(w),k=a(72),W=a(438),z=a(34),J=a(50),P=a(1371),A=a(437),R=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;Object(s.a)(this,a),(r=t.call(this,e)).state={title:"",main_title:"New",main_subtitle:"Record",record:null,record_id:null,loading:!0},r.defination=null,r.service=null,r.record_id=null;var n=e.componentProps,i=e.match.params,c=e.definations,l=e.services;return r.context=n.context,r.defination=c[n.context],r.service=l[n.context],"id"in i&&(r.record_id=i.id),r.handleFormSuccess=r.handleFormSuccess.bind(Object(o.a)(r)),r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.auth,a=e.location,r=e.appendNavHistory;r&&a&&this.defination&&r({name:z.e.singularize(this.defination.name)+"_"+(this.record_id?this.record_id:"new"),uri:a.pathname,title:(this.record_id?"Update":"New")+" "+z.e.singularize("function"===typeof this.defination.label?this.defination.label(t.user):this.defination.label),view:null,color:this.defination.color?this.defination.color:b.b.hex.primary,scrollTop:0}),this.record_id?this.getRecord():this.setState((function(e){return{loading:!1}}))}},{key:"handleFormSuccess",value:function(e){var t=this.props.history;JSON.isJSON(e)&&t.push((this.defination.name+"/view/"+e._id).toUriWithDashboardPrefix())}},{key:"getRecord",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a,r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.getRecordById(this.record_id);case 2:(t=e.sent).err?404===t.err.code?this.props.history.push("/not-found"):this.setState((function(e){return{load_error:t.err,loading:!1}})):(a=t.body.data,this.setState((function(e){return{record_id:r.record_id,record:a,loading:!1}})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.auth,r=e.nav,n=!!Array.isArray(r.entries)&&(r.entries.length>1&&r.entries[r.entries.length-2].uri),i=!this.state.loading&&(JSON.isJSON(this.state.record)?this.defination.access.actions.update.restricted(a.user):this.defination.access.actions.create.restricted(a.user));return S.a.createElement(_.a,{className:t.root},S.a.createElement(g.a,{xs:12},this.state.loading?S.a.createElement(_.a,{className:t.full_height,justify:"center",alignItems:"center"},S.a.createElement(p.a,{variant:"rect",width:"100%",height:"100%"})):S.a.createElement(_.a,{className:"p-0 m-0"},this.state.load_error?S.a.createElement(_.a,null,S.a.createElement(g.a,{xs:12},S.a.createElement(y.a,{color:"error",variant:"h1",center:!0,fullWidth:!0},S.a.createElement(u.a,{fontSize:"large"},"error"))),S.a.createElement(g.a,{xs:12},S.a.createElement(y.a,{color:"error",variant:"body1",center:!0,fullWidth:!0},"An error occured.",S.a.createElement("br",null),"Status Code :"," ",this.state.load_error.code,S.a.createElement("br",null),this.state.load_error.msg))):S.a.createElement(_.a,null,i&&S.a.createElement(_.a,{className:t.fullPageHeight,direction:"column",justify:"center",alignItems:"center"},S.a.createElement(g.a,{xs:12},S.a.createElement(y.a,{color:"error",variant:"h1",center:!0,fullWidth:!0},S.a.createElement(v.a,{className:t.errorIcon}))),S.a.createElement(g.a,{xs:12},S.a.createElement(y.a,{color:"grey",variant:"h3",center:!0,fullWidth:!0},"Access Denied!")),S.a.createElement(g.a,{xs:12},S.a.createElement(y.a,{color:"default",variant:"body1",center:!0,fullWidth:!0},"Sorry! Access to this resource is prohibitted since you lack required priviledges. ",S.a.createElement("br",null)," Please contact the system administrator for further details.")),S.a.createElement(g.a,{xs:12},S.a.createElement(y.a,{color:"error",variant:"body1",center:!0,fullWidth:!0},S.a.createElement(O.b,{to:"home".toUriWithDashboardPrefix()}," ",S.a.createElement(E.a,{variant:"text",color:"default",simple:!0}," ","Home"," ")," "),n&&S.a.createElement(O.b,{to:n}," ",S.a.createElement(E.a,{variant:"text",color:"default",simple:!0}," ","Back"," ")," ")))),!i&&S.a.createElement(_.a,{className:"p-0 m-0"},S.a.createElement(g.a,{className:"p-0 m-0",xs:12},S.a.createElement(P.a,{record:this.state.record?this.state.record._id:null,initialValues:this.state.record,defination:this.defination,service:this.service,onSubmitSuccess:this.handleFormSuccess,form:this.defination&&"name"in this.defination?(this.state.record_id?this.state.record_id:"new")+"_"+z.e.singularize(this.defination.name).toLowerCase()+"_form":"record_form"})))))))}}]),a}(S.a.Component);t.default=Object(k.c)(j()(m()(A.a),Object(N.b)((function(e){return{auth:e.auth,nav:e.nav}}),{appendNavHistory:W.a}),J.a)(R))}}]);
//# sourceMappingURL=30.edf17a1a.chunk.js.map