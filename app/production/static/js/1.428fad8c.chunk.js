(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[1],{1378:function(e,t,n){"use strict";var i=n(6),a=n(2),s=n(9),r=n.n(s),l=n(20),c=n(12),u=n(13),o=n(26),d=n(27),f=n(18),p=n(17),b=n(24),h=n(0),m=n.n(h),v=n(35),g=n(63),O=n.n(g),y=n(429),k=n(43),x=n.n(k),j=n(684),F=n(683),_=n(58),S=n(3),C=n(29),N=n.n(C),E=n(41),q=n(23),M=n(431),w=n(691),J=n(432),D=n(433),z=n(1514),A=n(1515),B=n(1512),V=n(1516),P=n(22),R=n(16),K=n(128),W=n(1250),Y=n(1580),I=n(73),U=n(50),L=n(33),H=(n(45),function(e){var t=e.component,n=Object(b.a)(e,["component"]);return m.a.createElement(t,n)}),T=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var i;Object(u.a)(this,n),(i=t.call(this,e)).state={record:!1,loading:{},load_error:!1,submitting:!1,submit_error:!1,fields:{},onChangeEffects:{},onChangeEffectsFields:{},evaluating:!0,field_values:{},default_field_values:{},last_field_changed:!1,show_passwords:{},value_possibilities:{},openSnackBar:!1,snackbarMessage:"",snackbarColor:"success"},i.handleChange=function(e){return function(t){i.setFieldValue(e,t)}};var a=e.defination,s=e.record;return i.creatingNew=!s,i.defination=a,i.ref_input_types=["select","transferlist","multiselect","radio","checkbox","dynamic"],i.handleChange=i.handleChange.bind(Object(d.a)(i)),i.onCloseSnackbar=i.onCloseSnackbar.bind(Object(d.a)(i)),i.handleResetForm=i.handleResetForm.bind(Object(d.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(d.a)(i)),i.handleKeyPress=i.handleKeyPress.bind(Object(d.a)(i)),i.mounted=!1,i.prepareForForm(),i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.mounted=!1,{preparationRequired:!Object.areEqual(e.defination,this.props.defination),applyChangeEffectsRequired:!Object.areEqual(t.field_values,this.state.field_values),loadPossibilitesRequired:Object.size(this.state.onChangeEffectsFields)>0}}},{key:"componentDidUpdate",value:function(e,t,n){this.mounted=!0,n.preparationRequired&&this.loadFieldValuePosibilities(),n.applyChangeEffectsRequired&&this.applyChangeEffects(),n.loadPossibilitesRequired&&this.loadFieldValuePosibilities()}},{key:"prepareForForm",value:function(){var e=this,t=this.props,n=t.defination,i=t.initialValues,a=t.initialize,s=t.exclude,r=t.record,l=t.fields,u=t.form_state,o=(t.auth,t.change,t.onValuesChange);this.defination=n;var d={},f=!0;if(u){if(JSON.isJSON(u.values)&&(console.log("form_state.values",u.values),d=u.values,f=!1,Function.isFunction(o))){for(var p={},b=0,h=Object.keys(d);b<h.length;b++){var m=h[b];m in this.state.value_possibilities?p[m]=this.state.value_possibilities[m][d[m]]:m in n.scope.columns&&(p[m]=d[m])}o(d,p)}}else JSON.isJSON(i)&&Object.size(i)>0&&(d=i);this.state.field_values=d,this.evaluateFields().then((function(t){for(var n=t.evaluatedFields,i=t.onChangeEffects,u=0,o=Object.entries(n);u<o.length;u++){var p=Object(c.a)(o[u],2),b=p[0],h=p[1];(Array.isArray(l)&&l.includes(b)&&!s||!Array.isArray(l)&&!s)&&e.creatingNew&&(h.input.default||h.input.value)&&!(b in d)&&(h.input.value?d[b]=h.input.value:d[b]=h.input.default,f||(f=!0))}f&&a(d),e.setState({record:r,fields:n,arrangedFields:{unpositioned:{}},onChangeEffects:i,evaluating:!1},(function(){e.loadFieldValuePosibilities()}))}))}},{key:"applyChangeEffects",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,i,a,s,l,u,o,d,f,p,b,h,m=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(m.length>0&&void 0!==m[0])||m[0],n=this.props.initialize,i=this,a={},s=JSON.parse(JSON.stringify(this.state.fields)),l=this.state.field_values,u=!1,o=0,d=Object.entries(this.state.onChangeEffects);case 8:if(!(o<d.length)){e.next=18;break}if(f=Object(c.a)(d[o],2),p=f[0],b=f[1],!Function.isFunction(b)){e.next=15;break}return e.next=13,b(i);case 13:h=e.sent,JSON.isJSON(h)&&(s[p]=h,h.input.value&&l[p]!==h.input.value&&(l[p]=h.input.value,u=!0),a[p]=h);case 15:o++,e.next=8;break;case 18:u&&n(l),Object.size(a)>0&&(t?this.setState({fields:s,field_values:l,onChangeEffectsFields:a,evaluating:!1}):(this.state.fields=s,this.state.field_values=l,this.state.onChangeEffectsFields=a,this.state.evaluating=!1));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFieldValuePosibilities",value:function(){var e=this,t=this.props,n=t.auth,s=t.fields,r=t.exclude,l=t.definations,u=t.services,o={},d={},f={};if(Object.size(this.state.onChangeEffectsFields)>0)for(var p=0,b=Object.entries(this.state.onChangeEffectsFields);p<b.length;p++){var h=Object(c.a)(b[p],2),m=h[0],v=h[1];if(JSON.isJSON(v.reference)&&!this.state.loading[m])o[m]=v,d[m]=!0;else if(JSON.isJSON(v.possibilities)&&!(m in this.state.value_possibilities)||!Object.areEqual(this.state.value_possibilities[m],v.possibilities))f[m]=v.possibilities;else if(Array.isArray(v.possibilities)&&!(m in this.state.value_possibilities)){for(var g={},O=0;O<v.possibilities.length;O++)g[v.possibilities[O]]=v.possibilities[O];f[m]=g}}else for(var y=0,k=Object.entries(this.state.fields);y<k.length;y++){var x=Object(c.a)(k[y],2),j=x[0],F=x[1];if(JSON.isJSON(F.reference)&&!this.state.loading[j])j in this.state.value_possibilities||(o[j]=F,d[j]=!0);else if(JSON.isJSON(F.possibilities)&&!(j in this.state.value_possibilities)||!Object.areEqual(this.state.value_possibilities[j],F.possibilities))f[j]=F.possibilities;else if(Array.isArray(F.possibilities)&&!(j in this.state.value_possibilities)){var _={};for(O=0;O<F.possibilities.length;O++)_[F.possibilities[O]]=F.possibilities[O];f[j]=_}}if(Object.size(f)>0&&(this.state.value_possibilities=Object(a.a)(Object(a.a)({},this.state.value_possibilities),f)),Object.size(o)>0){for(var S=function(){var t=Object(c.a)(N[C],2),d=t[0],f=t[1];if(Array.isArray(s)&&s.length>0&&(r&&s.includes(d)||!s.includes(d)))return"continue";if(JSON.isJSON(f.reference)&&String.isString(f.reference.name)&&JSON.isJSON(f.reference.service_query)){var p=!1,b=f.reference.name,h=f.reference.service_query;b in u&&(b=f.reference.name,p=u[b]),h&&e.state.last_field_changed!==d&&e.ref_input_types.includes(f.input.type)&&(e.setState((function(e){return{loading:Object(a.a)(Object(a.a)({},e.loading),{},Object(i.a)({},d,!0))}})),p.getRecords(h).then((function(t){var s=t.body.data,r={},c=f.reference.resolves,u=o;if(c.emulation)if(c.emulation.defination in l){if(Array.isArray(s)){for(var p=[],b=0;b<s.length;b++)c.emulation.key in s[b]&&(Array.isArray(s[b][c.emulation.key])?p=p.concat(s[b][c.emulation.key]):p.push(s[b][c.emulation.key]));s=p}u=l[c.emulation.defination].scope.columns}else s=[];if(s.length>0){for(var h=[],m=0;m<s.length;m++)h.push(Object(i.a)({},d,s[m]));for(var v=L.d.resolveReferenceColumnsDisplays(h,u,n.user),g=0;g<v.length;g++)r[v[g][d].value]=v[g][d].resolve}e.mounted?e.setState((function(e){return{value_possibilities:Object(a.a)(Object(a.a)({},e.value_possibilities),{},Object(i.a)({},d,r)),loading:Object(a.a)(Object(a.a)({},e.loading),{},Object(i.a)({},d,!1))}})):(e.state.value_possibilities=Object(a.a)(Object(a.a)({},e.state.value_possibilities),{},Object(i.a)({},d,r)),e.state.loading=Object(a.a)(Object(a.a)({},e.state.loading),{},Object(i.a)({},d,!1)))})).catch((function(t){e.mounted?e.setState((function(e){return{loading:Object(a.a)(Object(a.a)({},e.loading),{},Object(i.a)({},d,!1)),openSnackBar:!0,snackbarMessage:"Error fetching "+f.label+" ::: "+t.msg,snackbarColor:"warning"}})):(e.state.loading=Object(a.a)(Object(a.a)({},e.state.loading),{},Object(i.a)({},d,!1)),e.state.openSnackBar=!0,e.state.snackbarMessage="Error fetching "+f.label+" ::: "+t.msg,e.state.snackbarColor="warning")})))}},C=0,N=Object.entries(o);C<N.length;C++)S();this.setState({onChangeEffectsFields:{}})}}},{key:"evaluateFields",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,i,a,s,u,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=this).defination.scope.columns,i={},a={},s=r.a.mark((function e(){var n,s,d,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(c.a)(o[u],2),s=n[0],d=n[1],f=JSON.parse(JSON.stringify(d)),!d.input.default){e.next=10;break}if(!Function.isFunction(d.input.default)){e.next=9;break}return e.next=6,t.callDefinationMethod(d.input.default);case 6:f.input.default=e.sent,e.next=10;break;case 9:f.input.default=d.input.default;case 10:if(!Function.isFunction(d.label)){e.next=14;break}return e.next=13,t.callDefinationMethod(d.label);case 13:f.label=e.sent;case 14:if(!Function.isFunction(d.input.type)){e.next=18;break}return e.next=17,t.callDefinationMethod(d.input.type);case 17:f.input.type=e.sent;case 18:if(!Function.isFunction(d.input.default)){e.next=22;break}return e.next=21,t.callDefinationMethod(d.input.default);case 21:f.input.value=e.sent;case 22:if(!Function.isFunction(d.input.value)){e.next=26;break}return e.next=25,t.callDefinationMethod(d.input.value);case 25:f.input.value=e.sent;case 26:if(!Function.isFunction(d.input.required)){e.next=30;break}return e.next=29,t.callDefinationMethod(d.input.required);case 29:f.input.required=e.sent;case 30:if(!Function.isFunction(d.input.props)){e.next=34;break}return e.next=33,t.callDefinationMethod(d.input.props);case 33:f.input.props=e.sent;case 34:if(!d.restricted){e.next=42;break}if(!Function.isFunction(d.restricted.input)){e.next=41;break}return e.next=38,t.callDefinationMethod(d.restricted.input);case 38:f.restricted.input=e.sent,e.next=42;break;case 41:Boolean.isBoolean(d.restricted.input)&&(f.restricted.input=d.restricted.input);case 42:if(!d.reference){e.next=86;break}if(!Function.isFunction(d.reference)){e.next=65;break}return e.next=46,t.callDefinationMethod(d.reference);case 46:if(f.reference=e.sent,!JSON.isJSON(f.reference)){e.next=62;break}if(!Function.isFunction(f.reference.name)){e.next=52;break}return e.next=51,t.callDefinationMethod(f.reference.name);case 51:f.reference.name=e.sent;case 52:if(!Function.isFunction(f.reference.resolves)){e.next=56;break}return e.next=55,t.callDefinationMethod(f.reference.resolves);case 55:f.reference.resolves=e.sent;case 56:if(!Function.isFunction(f.reference.service_query)){e.next=60;break}return e.next=59,t.callDefinationMethod(f.reference.service_query);case 59:f.reference.service_query=e.sent;case 60:e.next=63;break;case 62:delete f.reference;case 63:e.next=86;break;case 65:if(!Function.isFunction(d.reference.name)){e.next=71;break}return e.next=68,t.callDefinationMethod(d.reference.name);case 68:f.reference.name=e.sent,e.next=72;break;case 71:f.reference.name=d.reference.name;case 72:if(!Function.isFunction(d.reference.resolves)){e.next=78;break}return e.next=75,t.callDefinationMethod(d.reference.resolves);case 75:f.reference.resolves=e.sent,e.next=79;break;case 78:f.reference.resolves=d.reference.resolves;case 79:if(!Function.isFunction(d.reference.service_query)){e.next=85;break}return e.next=82,t.callDefinationMethod(d.reference.service_query);case 82:f.reference.service_query=e.sent,e.next=86;break;case 85:f.reference.service_query=d.reference.service_query;case 86:if(!d.possibilities){e.next=91;break}if(!Function.isFunction(d.possibilities)){e.next=91;break}return e.next=90,t.callDefinationMethod(d.possibilities);case 90:f.possibilities=e.sent;case 91:i[s]=f,a[s]=function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(JSON.stringify(d)),!d.input.default){e.next=6;break}if(!Function.isFunction(d.input.default)){e.next=6;break}return e.next=5,t.callDefinationMethod(d.input.default);case 5:n.input.default=e.sent;case 6:if(!Function.isFunction(d.label)){e.next=10;break}return e.next=9,t.callDefinationMethod(d.label);case 9:n.label=e.sent;case 10:if(!Function.isFunction(d.input.type)){e.next=14;break}return e.next=13,t.callDefinationMethod(d.input.type);case 13:n.input.type=e.sent;case 14:if(!Function.isFunction(d.input.disabled)){e.next=18;break}return e.next=17,t.callDefinationMethod(d.input.disabled);case 17:n.input.disabled=e.sent;case 18:if(!Function.isFunction(d.input.default)){e.next=22;break}return e.next=21,t.callDefinationMethod(d.input.default);case 21:n.input.default=e.sent;case 22:if(!Function.isFunction(d.input.value)){e.next=26;break}return e.next=25,t.callDefinationMethod(d.input.value);case 25:n.input.value=e.sent;case 26:if(!Function.isFunction(d.input.required)){e.next=30;break}return e.next=29,t.callDefinationMethod(d.input.required);case 29:n.input.required=e.sent;case 30:if(!Function.isFunction(d.input.props)){e.next=34;break}return e.next=33,t.callDefinationMethod(d.input.props);case 33:n.input.props=e.sent;case 34:if(!d.restricted){e.next=42;break}if(!Function.isFunction(d.restricted.input)){e.next=41;break}return e.next=38,t.callDefinationMethod(d.restricted.input);case 38:n.restricted.input=e.sent,e.next=42;break;case 41:Boolean.isBoolean(d.restricted.input)?n.restricted.input=d.restricted.input:n.restricted.input=!1;case 42:if(!d.reference){e.next=86;break}if(!Function.isFunction(d.reference)){e.next=65;break}return e.next=46,t.callDefinationMethod(d.reference);case 46:if(n.reference=e.sent,!JSON.isJSON(n.reference)){e.next=62;break}if(!Function.isFunction(n.reference.name)){e.next=52;break}return e.next=51,t.callDefinationMethod(n.reference.name);case 51:n.reference.name=e.sent;case 52:if(!Function.isFunction(n.reference.resolves)){e.next=56;break}return e.next=55,t.callDefinationMethod(n.reference.resolves);case 55:n.reference.resolves=e.sent;case 56:if(!Function.isFunction(n.reference.service_query)){e.next=60;break}return e.next=59,t.callDefinationMethod(n.reference.service_query);case 59:n.reference.service_query=e.sent;case 60:e.next=63;break;case 62:delete n.reference;case 63:e.next=86;break;case 65:if(!Function.isFunction(d.reference.name)){e.next=71;break}return e.next=68,t.callDefinationMethod(d.reference.name);case 68:n.reference.name=e.sent,e.next=72;break;case 71:n.reference.name=d.reference.name;case 72:if(!Function.isFunction(d.reference.resolves)){e.next=78;break}return e.next=75,t.callDefinationMethod(d.reference.resolves);case 75:n.reference.resolves=e.sent,e.next=79;break;case 78:n.reference.resolves=d.reference.resolves;case 79:if(!Function.isFunction(d.reference.service_query)){e.next=85;break}return e.next=82,t.callDefinationMethod(d.reference.service_query);case 82:n.reference.service_query=e.sent,e.next=86;break;case 85:n.reference.service_query=d.reference.service_query;case 86:if(!d.possibilities){e.next=91;break}if(!Function.isFunction(d.possibilities)){e.next=91;break}return e.next=90,t.callDefinationMethod(d.possibilities);case 90:n.possibilities=e.sent;case 91:if(Object.areEqual(t.state.fields[s],n)){e.next=95;break}return e.abrupt("return",n);case 95:return e.abrupt("return",!1);case 96:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();case 93:case"end":return e.stop()}}),e)})),u=0,o=Object.entries(n);case 6:if(!(u<o.length)){e.next=11;break}return e.delegateYield(s(),"t0",8);case 8:u++,e.next=6;break;case 11:return e.abrupt("return",{evaluatedFields:i,onChangeEffects:a});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unSetFieldValue",value:function(e){var t=this,n=this.props,i=n.change,a=n.onValuesChange;if(JSON.isJSON(this.state.field_values)){var s=JSON.parse(JSON.stringify(this.state.field_values));e in s&&(delete s[e],JSON.isJSON(s)||(s={}),this.setState({field_values:s},(function(){if(i(e,null),Function.isFunction(a)){for(var n={},r=0,l=Object.keys(s);r<l.length;r++){var c=l[r];c in t.state.value_possibilities&&c!==e&&(n[c]=t.state.value_possibilities[c][s[c]])}a(s,n)}})))}}},{key:"setFieldValue",value:function(e,t){var n=this,i=this.props,a=i.change,s=i.onValuesChange;a(e,t);var r=JSON.parse(JSON.stringify(this.state.field_values));JSON.isJSON(r)||(r={}),r[e]=t,this.setState({field_values:r,last_field_changed:e},(function(){if(Function.isFunction(s)){for(var e={},t=0,i=Object.keys(r);t<i.length;t++){var a=i[t];a in n.state.value_possibilities&&(e[a]=n.state.value_possibilities[a][r[a]])}s(r,e)}}))}},{key:"onCloseSnackbar",value:function(){this.setState({openSnackBar:!1})}},{key:"handleResetForm",value:function(){var e=this.props,t=e.reset,n=e.form,i=e.initialValues;this.setState((function(e){return{field_values:JSON.isJSON(i)?i:{}}})),Function.isFunction(t)&&String.isString(n)&&t(n)}},{key:"handleKeyPress",value:function(e){"s"!==e.key&&"S"!==e.key||!e.ctrlKey||(e.preventDefault(),this.handleSubmit(e))}},{key:"callDefinationMethod",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,i=n.auth,n.form_state,n.initialValues,{},a=null,0===t.length?a=t():1===t.length?a=t(this):2===t.length?a=t(this.state.field_values,i.user):3===t.length&&(a=t(this.state.field_values,i.user,this)),e.abrupt("return",Promise.all([a]).then((function(e){return a})).catch((function(e){console.error("called method error",e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderFieldInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.props,r=(s.auth,s.form_state,s.record,s.initialValues,s.change,s.text_fields_variant),l=s.validation,u=s.layout,o=s.textFieldsProps,d=s.selectFieldsProps,f=s.textareaFieldsProps,p=Object(a.a)(Object(a.a)({},this.state.default_field_values),this.state.field_values),b=void 0;e in p&&(b=p[e]);var h,v,g,O={};if(t.input.props&&(O=t.input.props),"radio"===t.input.type)return"inline"==u?m.a.createElement(H,Object.assign((h={name:e,component:_.j,disabled:n,value:b,validate:l,variant:r,required:l&&t.input.required},Object(i.a)(h,"disabled",n),Object(i.a)(h,"margin","dense"),Object(i.a)(h,"onChange",this.handleChange(e)),Object(i.a)(h,"options",this.state.value_possibilities[e]?this.state.value_possibilities[e]:{}),Object(i.a)(h,"placeholder","Select "+t.label.singularize()),Object(i.a)(h,"validate",l),Object(i.a)(h,"size","small"),h),O)):m.a.createElement(H,Object.assign({name:e,component:_.i,label:t.label,defaultValue:b,onChange:this.handleChange(e),required:t.input.required,disabled:n,options:this.state.value_possibilities[e]?this.state.value_possibilities[e]:{},validate:l},O));if("select"===t.input.type)return m.a.createElement(H,Object.assign((v={name:e,component:_.j,disabled:n,value:b,onChange:this.handleChange(e),options:this.state.value_possibilities[e]?this.state.value_possibilities[e]:{},placeholder:"Select "+t.label.singularize(),validate:!0,variant:r,required:l&&t.input.required},Object(i.a)(v,"disabled",n),Object(i.a)(v,"label",t.label),Object(i.a)(v,"loading",this.state.loading[e]),Object(i.a)(v,"size","small"),v),d,O));if("multiselect"===t.input.type)return b=Array.isArray(b)?b:[],m.a.createElement(H,Object.assign((g={name:e,component:_.h,disabled:n,value:b,label:t.label,onChange:this.handleChange(e),options:this.state.value_possibilities[e]?this.state.value_possibilities[e]:{},placeholder:"Select "+t.label,required:l&&t.input.required},Object(i.a)(g,"disabled",n),Object(i.a)(g,"variant",r),Object(i.a)(g,"isMulti",!0),Object(i.a)(g,"validate",l),Object(i.a)(g,"loading",this.state.loading[e]),g),d,O));if("transferlist"===t.input.type)return this.state.value_possibilities[e]?m.a.createElement(H,Object.assign({name:e,component:_.n,label:t.label,defaultValue:b,onChange:this.handleChange(e),value_options:this.state.value_possibilities[e],validate:l},O)):"";if(["email","number","phone","text","password"].includes(t.input.type))return m.a.createElement(H,Object.assign({name:e,type:t.input.type,disabled:n,component:_.m,defaultValue:b,label:t.label,variant:r,onChange:this.handleChange(e),required:t.input.required,fullWidth:!0,validate:l},o,O));if("textarea"===t.input.type)return m.a.createElement(H,Object.assign({name:e,disabled:n,component:_.m,label:t.label,variant:r,multiline:!0,rows:4,defaultValue:b,onChange:this.handleChange(e),required:t.input.required,fullWidth:!0,validate:l},f,O));if("wysiwyg"===t.input.type)return m.a.createElement(H,Object.assign({name:e,disabled:n,component:_.o,label:t.label,variant:r,multiline:!0,rows:4,defaultValue:b,onChange:this.handleChange(e),controls:["bold","italic","underline","highlight","link","media","numberList","bulletList","quote"],required:t.input.required,fullWidth:!0,validate:l},O));if("date"===t.input.type)return m.a.createElement(H,Object.assign({fullWidth:!0,margin:"normal",name:e,label:t.label,disabled:n,component:_.b,autoOk:!0,variant:"inline",openTo:"date",invalidDateMessage:"",value:b,onChange:this.handleChange(e),required:t.input.required,inputVariant:r,format:"DD/MM/YYYY",color:"primary"},O,{validate:l}));if("datetime"===t.input.type)return m.a.createElement(H,Object.assign({name:e,label:t.label,disabled:n,component:_.c,autoOk:!0,variant:"inline",inputVariant:r,value:b,onChange:this.handleChange(e),required:t.input.required,validate:l},O));if("checkbox"===t.input.type)return m.a.createElement(H,Object.assign({name:e,disabled:n,checked:b,value:b,component:_.a,label:t.label,onChange:this.handleChange(e),required:t.input.required,validate:l},O));if("slider"===t.input.type){var y=void 0!==b&&b,k=5,x=!1,j=!1,F=[],S=[];if((String.isString(t.input.default)||Number.isNumber(t.input.default))&&t.input.default.length>0&&(y=Number.parseNumber(t.input.default)),this.state.value_possibilities[e]){for(var C=0,N=Object.entries(this.state.value_possibilities[e]);C<N.length;C++){var E=Object(c.a)(N[C],2),q=E[0],M=E[1];q=/[-+]?(?:\d*\.\d+\.?\d*)(?:[eE][-+]?\d+)?/gim.test(q)?parseFloat(q):!!/^[-+]?(\d*)?\d+$/gim.test(q)&&parseInt(q),k=S.length>0?Math.abs(q-S[S.length-1])<k?Math.abs(q-S[S.length-1]):k:y?k:q,y=y||q,x=x?q<x?q:x:q,j=j?q>j?q:j:q,S.push(q),F.push({value:q,label:M})}return x=x||0,j=j||1,y=y||x,m.a.createElement(H,Object.assign({name:e,label:t.label,component:_.k,marks:!0,min:x,max:j,step:k,defaultValue:y,onChange:this.handleChange(e),validate:l},O))}return""}if("file"===t.input.type){var w={maxFileSize:3e8,upload:!0,filesLimit:Array.isArray(t.type)?20:1};return O=Object(a.a)(Object(a.a)({},w),O),m.a.createElement(H,Object.assign({name:e,label:t.label,component:_.e,value:b,onChange:this.handleChange(e),required:t.input.required,validate:l,variant:r},O))}if("map"===t.input.type)return m.a.createElement(H,Object.assign({name:e,label:t.label,component:_.g,value:b,onChange:this.handleChange(e),required:t.input.required,validate:l},O));if(["street_number","place_id","coordinates","formatted_address","address_components","route","neighborhood","political","locality","administrative_area_level_2","administrative_area_level_1","country","postal_code"].includes(t.input.type))return m.a.createElement(H,Object.assign({name:e,type:t.input.type,label:t.label,component:_.f,value:b,onChange:this.handleChange(e),required:t.input.required,validate:l,variant:r},O));if("dynamic"===t.input.type){if(O.mode=["defination","generation"].includes(O.mode)?O.mode:"defination",O.blueprint=JSON.isJSON(O.blueprint)?O.blueprint:{},String.isString(b))try{b=JSON.parse(b)}catch(J){b={}}return m.a.createElement(H,Object.assign({name:e,component:_.d,label:t.label,value:b,onChange:this.handleChange(e),disabled:n,variant:r,required:t.input.required,validate:l},O))}}},{key:"renderField",value:function(e){var t=this.props,n=t.layout,i=t.inputColumnSize,a=this.state.fields[e],s=this.state.submitting;return!this.state.submitting&&a.restricted&&(s=a.restricted.input),"inline"==n?m.a.createElement(B.a,{key:"field_"+e},this.renderFieldInput(e,a,s)):m.a.createElement(R.a,{className:"p-0 m-0 px-1 py-1",md:a.input.size?i<12&&a.input.size<i?i:a.input.size:i,key:"field_"+e},this.renderFieldInput(e,a,s))}},{key:"handleSubmit",value:function(){var e=Object(l.a)(r.a.mark((function e(t){var n,i,a,s,l,c,u,o,d,f=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t,i=this.props,a=i.service,s=i.record,i.fields,i.exclude,l=i.onSubmit,c=i.onSubmitSuccess,u=i.onSubmitSuccessMessage,o=this.state.field_values&&"object"===typeof this.state.field_values?this.state.field_values:{},(l||a)&&this.setState((function(e){return{submitting:!0}})),l?(d=l(o,n),Promise.all([d]).then((function(e){f.setState({openSnackBar:!0,snackbarMessage:u||L.e.singularize(f.defination.label)+" changes saved",snackbarColor:"success",submitting:!1}),Function.isFunction(c)&&c(e)})).catch((function(e){f.setState({openSnackBar:!0,snackbarMessage:"object"===typeof e.msg?JSON.stringify(e.msg):e.msg,snackbarColor:"error",submitting:!1})}))):a&&(s?a.update(s,o).then((function(e){f.setState({openSnackBar:!0,snackbarMessage:u||L.e.singularize(f.defination.label)+" changes saved",snackbarColor:"success",submitting:!1}),Function.isFunction(c)&&c(e.body.data)})).catch((function(e){f.setState({openSnackBar:!0,snackbarMessage:"object"===typeof e.msg?JSON.stringify(e.msg):e.msg,snackbarColor:"error",submitting:!1})})):a.create(o).then((function(e){f.setState({openSnackBar:!0,snackbarMessage:u||"New "+L.e.singularize(f.defination.label)+" added",snackbarColor:"success",submitting:!1}),Function.isFunction(c)&&c(e.body.data)})).catch((function(e){f.setState({openSnackBar:!0,snackbarMessage:"object"===typeof e.msg?JSON.stringify(e.msg):e.msg,snackbarColor:"error",submitting:!1})})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.props,a=n.classes,s=n.className,r=(n.defination,n.record),l=n.form,c=n.fields,u=n.exclude,o=n.show_title,d=n.show_submit,f=n.show_discard,p=n.SubmitBtn,h=n.submitBtnProps,v=n.DiscardBtn,g=n.discardBtnProps,O=n.submit_btn_text,k=(n.pristine,n.layout),x=(Object(b.a)(n,["classes","className","defination","record","form","fields","exclude","show_title","show_submit","show_discard","SubmitBtn","submitBtnProps","DiscardBtn","discardBtnProps","submit_btn_text","pristine","layout"]),N()((e={},Object(i.a)(e,a.root,!0),Object(i.a)(e,s,s),Object(i.a)(e,a.submitting,this.state.submitting),e)));return m.a.createElement("form",{className:x,id:l||"".concat(this.defination.name,"-form"),autoComplete:"off",onKeyDown:this.handleKeyPress,onSubmit:this.handleSubmit},m.a.createElement(M.a,{elevation:0,outlineColor:"transparent",className:"p-0 bg-transparent"},o?m.a.createElement(D.a,{avatar:m.a.createElement(E.a,{"aria-label":"Password",color:this.defination?this.defination.color:S.b.hex.default},r?m.a.createElement(j.a,null):m.a.createElement(F.a,null)),title:this.defination?L.e.singularize(this.defination.label):"Record",subheader:r?"Update ":"New "}):"",m.a.createElement(J.a,{className:"m-0 p-0 py-4"},"normal"==k&&m.a.createElement(P.a,{className:"m-0 p-0"},Object.keys(this.state.fields).map((function(e,n){return Array.isArray(c)&&c.length>0?u?c.includes(e)?"":t.renderField(e):c.includes(e)?t.renderField(e):"":t.renderField(e)}))),"inline"==k&&m.a.createElement(P.a,{className:"m-0 p-0"},m.a.createElement(R.a,{xs:12},m.a.createElement(z.a,{className:"w-full "},m.a.createElement(A.a,null,m.a.createElement(V.a,null,Object.keys(this.state.fields).map((function(e,n){return Array.isArray(c)&&!c.includes(e)||(Array.isArray(u)?u.includes(e):u)?"":t.renderField(e)})))))))),(f||d)&&Object.keys(this.state.fields).length>0&&m.a.createElement(w.a,null,m.a.createElement(P.a,{className:"m-0 p-0"},f&&m.a.createElement(R.a,{xs:12,md:6,className:"flex flex-row items-center justify-center md:items-start md:justify-start"},!v&&m.a.createElement(q.a,{className:"sm:w-full md:w-auto",variant:"text",outlined:!0,onClick:this.handleResetForm}," Discard changes "),v&&m.a.createElement(v,Object.assign({className:"sm:w-full md:w-auto",variant:"text",outlined:!0,onClick:this.handleResetForm},g||{}))),d&&m.a.createElement(R.a,{xs:12,md:f?6:12,className:"flex flex-row items-center justify-center md:items-end md:justify-end"},!p&&m.a.createElement(q.a,{type:"submit",className:"sm:w-full md:w-auto",color:"primary",outlined:!0}," ",O||"Save Changes"," "),p&&m.a.createElement(p,Object.assign({type:"submit",className:"sm:w-full md:w-auto",color:"primary",outlined:!0},h||{})))))),m.a.createElement(y.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.openSnackBar,autoHideDuration:6e3,onClose:this.onCloseSnackbar},m.a.createElement(K.a,{onClose:this.onCloseSnackbar,color:this.state.snackbarColor,message:this.state.snackbarMessage})))}}]),n}(m.a.Component);T.defaultProps={text_fields_variant:"filled",layout:"normal",exclude:!1,show_title:!0,show_submit:!0,show_discard:!0,validation:!0,inputColumnSize:12};t.a=Object(I.c)(O()(Object(v.b)((function(e,t){return{auth:e.auth,form_state:e.form[t.form]}}),{change:W.a,reset:W.b}),x()((function(e){return{root:{padding:"0"},content:{},submitting:{cursor:"progress !important"}}})),U.a)(Object(Y.a)({enableReinitialize:!0})(T)))}}]);
//# sourceMappingURL=1.428fad8c.chunk.js.map