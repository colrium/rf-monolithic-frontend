(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[10,21],{1357:function(e,t,a){e.exports=a.p+"static/media/empty-state-table.cdb06dd9.svg"},1384:function(e,t,a){"use strict";var n=a(6),r=a(9),i=a.n(r),s=a(20),o=a(12),l=a(2),c=a(14),d=a(26),u=a(27),m=a(18),p=a(17),f=a(255),h=a(43),v=a.n(h),g=a(22),b=a(16),y=a(21),w=a(0),x=a.n(w),E=a(35),O=a(63),_=a.n(O),C=a(1625),N=a(1496),j=a(1497),k=a(213),S=a(461),A=a(1248),D=a(1402),R=a.n(D),P=a(1424),M=a.n(P),q=a(1423),J=a.n(q),V=a(1403),F=a.n(V),I=a(55),z=a(59),L=a(94),B=a(264),T=a.n(B),U=a(263),W=a.n(U),H=a(412),Y=a(1357),X=a.n(Y),K=a(1311),G=a(1346),Z=a(1679),$=a(2032),Q=a(1316),ee=a(1456),te=a.n(ee),ae=a(3),ne=a(42),re=a(431),ie=a(691),se=a(432),oe=a(433),le=a(92),ce=a(77),de=a(33),ue=a(45),me=a(437),pe=v()({indicator:{backgroundColor:ae.b.hex.accent}})(G.a),fe=v()((function(e){return{root:{textTransform:"none",minWidth:50,fontWeight:e.typography.fontWeightRegular,marginRight:e.spacing(),"&:hover":{color:ae.b.hex.default,opacity:1},"&$selected":{color:ae.b.hex.accent,fontWeight:e.typography.fontWeightMedium},"&:focus":{color:ae.b.hex.accent}},selected:{}}}))((function(e){return x.a.createElement(K.a,e)})),he=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).calendarRef=x.a.createRef(),n.state={view:"month",view_title:(new Date).format(ce.b.dateformats.month),calendars:[],tasks:[],schedules:[]},n.handleChangeCalendarView=function(e,t){if(n.calendarRef.current){var a=n.calendarRef.current.getInstance().getDate().toDate();n.setState((function(e){return{view:t,view_title:"day"===t?a.format(ce.b.dateformats.date):"week"===t?a.format(ce.b.dateformats.week):a.format(ce.b.dateformats.month)}}))}else n.setState((function(e){return{view:t}}))},n.handleClickPrevButton=function(){if(n.calendarRef.current){var e=n.calendarRef.current.getInstance();e.prev();var t=e.getDate().toDate();n.setState((function(e){return{view_title:"day"===e.view?t.format(ce.b.dateformats.date):"week"===e.view?t.format(ce.b.dateformats.week):t.format(ce.b.dateformats.month)}}))}},n.handleClickNextButton=function(){if(n.calendarRef.current){var e=n.calendarRef.current.getInstance();e.next();var t=e.getDate().toDate();n.setState((function(e){return{view_title:"day"===e.view?t.format(ce.b.dateformats.date):"week"===e.view?t.format(ce.b.dateformats.week):t.format(ce.b.dateformats.month)}}))}},n.handleOnEditEntryClick=function(e){n.calendarRef.current},n.handleOnDeleteEntryClick=function(e){n.calendarRef.current};var r=e.theme,i=e.view,s=e.calendars,o=e.tasks,d=e.schedules,m=e.show_actions,p=e.icon,f=e.title,h=e.subtitle,v=e.icon_color,g=e.title_color,b=e.subtitle_color,y=e.calendarProps;return n.state=Object(l.a)(Object(l.a)({},n.state),{},{theme:r,view:i,view_title:"day"===i?(new Date).format(ce.b.dateformats.date):"week"===i?(new Date).format(ce.b.dateformats.week):(new Date).format(ce.b.dateformats.month),calendars:s,tasks:o,schedules:d,show_actions:m,icon:p,title:f,subtitle:h,icon_color:v,title_color:g,subtitle_color:b,calendarProps:y}),n.handleChangeCalendarView=n.handleChangeCalendarView.bind(Object(u.a)(n)),n.handleClickPrevButton=n.handleClickPrevButton.bind(Object(u.a)(n)),n.handleClickNextButton=n.handleClickNextButton.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.initCalendarEvents()}},{key:"getSnapshotBeforeUpdate",value:function(e){return{refreshRequired:!Object.areEqual(e,this.props)}}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props,r=n.theme,i=n.view,s=n.calendars,o=n.tasks,l=n.schedules,c=n.show_actions,d=n.icon,u=n.title,m=n.subtitle,p=n.icon_color,f=n.title_color,h=n.subtitle_color,v=n.calendarProps;a.refreshRequired&&this.setState({theme:r,view:i,view_title:"day"===i?(new Date).format(ce.b.dateformats.date):"week"===i?(new Date).format(ce.b.dateformats.week):(new Date).format(ce.b.dateformats.month),calendars:s,tasks:o,schedules:l,show_actions:c,icon:d,title:u,subtitle:m,icon_color:p,title_color:f,subtitle_color:h,calendarProps:v},this.initCalendarEvents)}},{key:"initCalendarEvents",value:function(){var e=this.props,t=e.onSelect,a=e.onClickEntry,n=e.onClickEdit,r=e.onClickDelete,i=this.calendarRef.current.getInstance();i&&i.on({clickSchedule:function(e){de.e.isOfType(a,"function")&&a(e.schedule)},beforeCreateSchedule:function(e){de.e.isOfType(t,"function")&&t(e)},beforeUpdateSchedule:function(e){de.e.isOfType(n,"function")&&n(e)},beforeDeleteSchedule:function(e){de.e.isOfType(r,"function")&&r(e)}})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.height,n=e.defaultView,r=e.disableDblClick,i=e.disableClick,s=e.isReadOnly,o=e.useDetailPopup,c=e.useCreationPopup,d=e.scheduleView,u=e.taskView,m=this.state,p=m.theme,f=m.view,h=m.view_title,v=m.calendars,w=m.tasks,E=m.schedules,O=(m.show_actions,m.icon),_=m.title,C=m.subtitle,N=m.icon_color,j=(m.title_color,m.subtitle_color,m.calendarProps),k=Object(l.a)({height:a+"px",defaultView:n,disableDblClick:r,disableClick:i,isReadOnly:s,useDetailPopup:o,useCreationPopup:c,scheduleView:d,taskView:u},j);return x.a.createElement(re.a,{elevation:0,outlineColor:"#cfd8dc"},x.a.createElement(oe.a,{avatar:x.a.createElement(ne.a,{"aria-label":_,style:{background:N}},O),title:_,subheader:C}),x.a.createElement(se.a,{className:"p-0 m-0"},x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{sm:6,md:4},x.a.createElement(pe,{value:f,onChange:this.handleChangeCalendarView,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"view change tabs"},x.a.createElement(fe,{value:"month",label:"Month"}),x.a.createElement(fe,{value:"week",label:"Week"}),x.a.createElement(fe,{value:"day",label:"Day"}))),x.a.createElement(b.a,{sm:6,md:4},x.a.createElement(y.a,{variant:"h3",center:!0}," ",h," ")),x.a.createElement(b.a,{sm:12,md:4},x.a.createElement("div",{className:"float-right"},x.a.createElement(L.a,{onClick:this.handleClickPrevButton},x.a.createElement(Z.a,null)),x.a.createElement(L.a,{onClick:this.handleClickNextButton},x.a.createElement($.a,null))))),x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{xs:12},x.a.createElement(te.a,Object.assign({theme:p,view:f,className:t.calendar,calendars:v,tasks:w,schedules:E,ref:this.calendarRef},k)))))),x.a.createElement(ie.a,null,x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{xs:12},x.a.createElement(y.a,{variant:"subtitle2",display:"block",color:"default",gutterBottom:!0}," ","Calendar index"," ")),x.a.createElement(b.a,{xs:12},v.map((function(e,t){return x.a.createElement(le.a,{color:e.bgColor?e.bgColor:ae.b.hex.secondary,text:e.name,key:"calendar-"+t})}))))))}}]),a}(x.a.Component);he.defaultProps={calendars:[],tasks:[],schedules:[],view:"month",theme:{"common.border":"1px solid rgba("+ae.b.rgb.grey+", 0.5)","common.backgroundColor":"#fcfcfc","common.holiday.color":ae.b.hex.grey,"common.saturday.color":ae.b.hex.grey,"common.dayname.color":ae.b.hex.default,"common.today.color":ae.b.hex.primary,"week.currentTime.color":ae.b.hex.primarydark},show_actions:!0,icon:x.a.createElement(Q.a,null),title:"My",subtitle:"Calendar",icon_color:ae.b.hex.primary,title_color:ae.b.hex.primary,subtitle_color:ae.b.hex.grey,calendarProps:{},height:900,defaultView:"month",disableDblClick:!0,disableClick:!1,isReadOnly:!1,useDetailPopup:!0,useCreationPopup:!1,scheduleView:!0,taskView:!0};var ve=Object(ue.a)(v()(me.a)(he)),ge=a(170),be=a(11),ye=a(50),we=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).calendarRef=x.a.createRef(),n.state={loading:!0,load_error:!1,records:[]},n.handleDeleteItem=function(e){return function(t){var a=n.props,r=a.openDialog,i=a.closeDialog;r({title:"Deleting safely",body:"Please wait. Executing safe delete...",actions:{}}),n.state.service.delete(e).then((function(e){i(),n.loadData()})).catch((function(e){console.log("CalendarView delete error",e),i()}))}};var r=e.defination,i=e.service,s=e.query;e.app;return n.state.defination=r,n.state.service=i,n.state.query=s?Object(l.a)(Object(l.a)({},s),{},{p:1}):{p:1},n.handleEditItem=n.handleEditItem.bind(Object(u.a)(n)),n.handleDeleteItemConfirm=n.handleDeleteItemConfirm.bind(Object(u.a)(n)),n.handleDeleteItem=n.handleDeleteItem.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.loadContext()}},{key:"getSnapshotBeforeUpdate",value:function(e){return{contextReloadRequired:!Object.areEqual(e.defination,this.props.defination)&&!Object.areEqual(e.service,this.props.service),dataReloadRequired:!Object.areEqual(e.query,this.props.query)}}},{key:"componentDidUpdate",value:function(e,t,a){if(a.contextReloadRequired&&this.loadContext(),a.dataReloadRequired){var n=this.props.query;this.setState({query:n?Object(l.a)(Object(l.a)({},n),{},{p:1}):{p:1}},this.loadData)}}},{key:"componentWillUnmount",value:function(){var e=this.props;e.openDialog;(0,e.closeDialog)()}},{key:"handleEditItem",value:function(e){var t=this.props.auth;this.state.defination.access.actions.update.restricted(t.user)||(window.location.href="/"+this.state.defination.access.actions.update.uri(e.schedule.id))}},{key:"handleDeleteItemConfirm",value:function(e){var t=this.props,a=t.openDialog,n=t.closeDialog;a({title:"Confirm Delete",body:"Are you sure you want delete "+e.schedule.title+"? This action might be irreversible",actions:{cancel:{text:"Cancel",color:"default",onClick:function(){return n()}},delete:{text:"Delete",color:"error",onClick:this.handleDeleteItem(e.schedule.id)}}})}},{key:"loadContext",value:function(){var e=this.props,t=e.defination,a=e.service,n=e.query;e.auth;t&&this.setState({defination:t,service:a,query:n?Object(l.a)(Object(l.a)({},n),{},{p:1}):{p:1},calendars:[{id:t.name,name:t.label,bgColor:t.color,borderColor:t.color}],records:[],loading:!1},this.loadData)}},{key:"loadData",value:function(){var e=this,t=this.props,a=(t.auth,t.cache),n=t.defination,r=t.apiCallRequest,i=t.cache_data,s=t.onLoadData,o=t.load_data;if(n)if(o)r(n.name,{uri:n.endpoint,type:"records",params:this.state.query,data:{},cache:i}).then((function(t){console.log("calendar data",t),Function.isFunction(s)&&s(t,e.state.query),e.prepareData(t)})).catch((function(t){console.log("calendar error",t),e.setState((function(e){return{records:[],load_error:t,loading:!1}}))}));else{var l=Array.isArray(a.data[n.name])?a.data[n.name]:[];Function.isFunction(s)&&s(l,this.state.query),this.prepareData(l)}else this.setState((function(e){return{records:[],load_error:{msg:"No Context defination or provided"},loading:!1}}))}},{key:"prepareData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.props,n=(a.auth,a.cache),r=a.defination,i=Array.isArray(t)?t:Array.isArray(n.data[r.name])?n.data[r.name]:[];r&&r.scope.columns;Function.isFunction(r.views.listing.calendarview.resolveData)&&r.views.listing.calendarview.resolveData(i,!0).then((function(t){e.setState((function(e){return{records:t,loading:!1}}))})).catch((function(t){e.setState((function(e){return{records:[],loading:!1}}))}))}},{key:"render",value:function(){var e=this.props.classes;return x.a.createElement(g.a,{className:e.root},this.state.defination&&x.a.createElement(b.a,{className:"p-0 m-0",xs:12},this.state.loading?x.a.createElement(g.a,{className:e.full_height,justify:"center",alignItems:"center"},x.a.createElement(b.a,{xs:1},x.a.createElement(ge.a,{size:24,thickness:4,className:e.progress,color:"secondary",disableShrink:!0}))):x.a.createElement(g.a,{className:"p-0 m-0"},this.state.load_error?x.a.createElement(g.a,null,x.a.createElement(b.a,{xs:12},x.a.createElement(y.a,{color:"error",variant:"h1",center:!0,fullWidth:!0},x.a.createElement(H.a,{fontSize:"large"},"error"))),x.a.createElement(b.a,{xs:12},x.a.createElement(y.a,{color:"error",variant:"body1",center:!0,fullWidth:!0},"An error occured.",x.a.createElement("br",null),"Status Code :"," ",this.state.load_error.code,x.a.createElement("br",null),this.state.load_error.msg))):x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{className:"p-0 m-0",xs:12},Array.isArray(this.state.records)&&this.state.records.length>0?x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{xs:12},x.a.createElement(ve,{icon:this.state.defination.icon,title:this.state.defination.label,title_color:this.state.defination.color,icon_color:this.state.defination.color,subtitle:"",calendars:this.state.calendars,view:"month",schedules:this.state.records,className:e.calendar,onClickEdit:this.handleEditItem,onClickDelete:this.handleDeleteItemConfirm}))):x.a.createElement(g.a,{className:"p-0 m-0",justify:"center",alignItems:"center"},x.a.createElement("img",{alt:"Empty list",className:e.emptyImage,src:X.a}),x.a.createElement(y.a,{className:e.emptyText,color:"grey",variant:"body2",center:!0,fullWidth:!0},"No"," ",this.state.defination.label?this.state.defination.label:"Records"," ","found")))))))}}]),a}(x.a.Component);we.defaultProps={calendarProps:{height:"900px",defaultView:"month",disableDblClick:!0,disableClick:!0,isReadOnly:!1,useDetailPopup:!0,useCreationPopup:!1,scheduleView:!0,taskView:!1},query:{p:1},cache_data:!0,load_data:!0};var xe=Object(ye.a)(_()(v()((function(e){return{root:{padding:"0"}}})),Object(E.b)((function(e){return{auth:e.auth,app:e.app}}),{apiCallRequest:be.gb,openDialog:be.sb,closeDialog:be.pb}))(we)),Ee=(a(1390),a(1407)),Oe=a(1338),_e=a(1204),Ce=a(1207),Ne=a(1280),je=a(1284),ke=a(1250),Se=a(1409),Ae=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!0,load_error:!1,raw_records:[],records:[]},n.handleDeleteItemConfirm=function(e){return function(t){var a=n.props.dispatch;Object(u.a)(n);a(be.sb({title:"Confirm Delete",body:"Are you sure you want delete entry? This action might be irreversible",actions:{cancel:{text:"Cancel",color:"default",onClick:function(){return a(be.pb())}},delete:{text:"Delete",color:"error",onClick:n.handleDeleteItem(e)}}}))}},n.handleDeleteItem=function(e){return function(e){var t=n.props.dispatch;t(be.sb({title:"Deleting safely",body:"Please wait. Executing safe delete...",actions:{close:{text:"Close",color:"default",onClick:function(){return t(be.pb())}}}}))}};e.defination;return n.handleDeleteItemConfirm=n.handleDeleteItemConfirm.bind(Object(u.a)(n)),n.handleDeleteItem=n.handleDeleteItem.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cache,a=e.defination;this.mounted=!0,this.loadContext(),this.prepareData(Array.isArray(t.data[a.name])?t.data[a.name]:[])}},{key:"getSnapshotBeforeUpdate",value:function(e){this.mounted=!1;var t=this.props;t.cache,t.defination;return{contextReloadRequired:!Object.areEqual(e.defination,this.props.defination),dataReloadRequired:!Object.areEqual(e.query,this.props.query),dataPreparationRequired:!1}}},{key:"componentDidUpdate",value:function(e,t,a){if(a.contextReloadRequired&&(this.loadContext(),this.prepareData()),a.dataReloadRequired){var n=this.props.query;this.setState({query:n?Object(l.a)(Object(l.a)({},n),{},{p:1}):{p:1}},this.loadData)}}},{key:"loadContext",value:function(){var e=this.props,t=e.defination,a=e.service,n=e.query;e.cache;t&&this.setState({defination:t,service:a,query:n?Object(l.a)(Object(l.a)({},n),{},{p:1}):{p:1},loading:!1},this.loadData)}},{key:"loadData",value:function(){var e=this,t=this.props,a=(t.auth,t.cache),n=t.defination,r=t.apiCallRequest,i=t.cache_data,s=t.onLoadData,o=t.load_data;if(n){if(o)r(n.name,{uri:n.endpoint,type:"records",params:this.state.query,data:{},cache:i}).then((function(t){Function.isFunction(s)&&s(t,e.state.query),e.prepareData(t)})).catch((function(t){e.setState((function(e){return{records:[],load_error:t,loading:!1}}))}));else if(i){var l=Array.isArray(a.data[n.name])?a.data[n.name]:[];Function.isFunction(s)&&s(l,this.state.query),this.prepareData(l)}}else this.setState((function(e){return{records:[],load_error:{msg:"No Context defination or provided"},loading:!1}}))}},{key:"prepareData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.props,n=a.auth,r=a.cache,i=a.defination,s=a.entryItemProps,o=Array.isArray(t)?t:Array.isArray(r.data[i.name])?r.data[i.name]:[];i&&i.scope.columns;Function.isFunction(i.views.listing.listview.resolveData)&&i.views.listing.listview.resolveData(o,n.user,s).then((function(a){e.setState((function(e){return{raw_records:t,records:a,loading:!1}}))})).catch((function(t){e.setState((function(e){return{records:[],raw_records:[],loading:!1}}))}))}},{key:"prepareForData",value:function(){var e=this.props,t=(e.classes,e.defination);e.auth,e.dispatch,t.scope.columns;this.state.records=[],this.state.loading=!1}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.defination,r=(t.service,t.onClickEntry);return x.a.createElement(g.a,{className:a.root},x.a.createElement(b.a,{className:"p-0 m-0",xs:12},this.state.loading?x.a.createElement(g.a,null,x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-3/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-8/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-4/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-3/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-5/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-9/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-4/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-3/12"}))),x.a.createElement(b.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},x.a.createElement(Se.a,{variant:"circle",width:40,height:40}),x.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},x.a.createElement(Se.a,{variant:"text",className:"w-4/12"})))):x.a.createElement(g.a,{className:"p-0 m-0"},this.state.load_error?x.a.createElement(g.a,null,x.a.createElement(b.a,{xs:12},x.a.createElement(y.a,{color:"error",variant:"h1",center:!0,fullWidth:!0},x.a.createElement(H.a,{fontSize:"large"},"error"))),x.a.createElement(b.a,{xs:12},x.a.createElement(y.a,{color:"error",variant:"body1",className:"w-full text-center",center:!0,fullWidth:!0},"An error occured.",x.a.createElement("br",null),"Status Code :"," ",this.state.load_error.code,x.a.createElement("br",null),this.state.load_error.msg))):x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{className:"p-0 m-0",xs:12},Array.isArray(this.state.records)&&this.state.records.length>0?x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{xs:12},x.a.createElement(_e.a,{className:"p-0 transparent-bg"},this.state.records.map((function(t,i){return x.a.createElement("div",{key:n.name+"-"+i},x.a.createElement(Ce.a,{button:!0,alignItems:"flex-start",onClick:function(){Function.isFunction(r)&&r(e.state.raw_records[i],i)},className:a.listItem},t.avatar&&x.a.createElement(Ne.a,null," ",t.avatar," "),t.icon&&x.a.createElement(je.a,null," ",t.icon," "),x.a.createElement(ke.a,{primary:t.title,secondary:t.body})),x.a.createElement(Oe.a,{component:"li"}))}))))):x.a.createElement(g.a,{className:"p-0 m-0",justify:"center",alignItems:"center"},x.a.createElement("img",{alt:"Empty list",className:a.emptyImage,src:X.a}),x.a.createElement(y.a,{className:a.emptyText,color:"grey",variant:"body2",center:!0,fullWidth:!0},"No"," ",n.label?n.label:"Records"," ","found")))))))}}]),a}(x.a.Component);Ae.defaultProps={show_actions:!0,show_links:!0,query:{p:1},load_data:!0,cache_data:!0};var De=_()(v()((function(e){return{root:{padding:"0"},listItem:{background:"transparent",transition:e.transitions.create("background",{easing:e.transitions.easing.sharp,duration:50}),"&:hover":{background:e.palette.action.hover}}}})),Object(E.b)((function(e,t){t.defination;return{auth:e.auth,cache:e.cache,api:e.api}}),{apiCallRequest:be.gb,openDialog:be.sb,closeDialog:be.pb}),ye.a)(Ae),Re=a(1258),Pe=(a(1393),a(1209)),Me=(a(1406),a(1463)),qe=a.n(Me),Je=a(348),Ve=a.n(Je),Fe=a(1382),Ie=a.n(Fe),ze=a(1442),Le=a.n(ze),Be=a(1441),Te=a.n(Be),Ue=a(453),We=a.n(Ue),He=a(1464),Ye=a.n(He),Xe=a(1465),Ke=a.n(Xe),Ge=a(1401),Ze=a.n(Ge),$e=a(1467),Qe=a.n($e),et=a(1466),tt=a.n(et),at=a(1468),nt=a.n(at),rt=a(1435),it=a.n(rt),st=a(67),ot=a(41),lt=a(74),ct={Add:Object(w.forwardRef)((function(e,t){return x.a.createElement(qe.a,Object.assign({},e,{ref:t}))})),Check:Object(w.forwardRef)((function(e,t){return x.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),Clear:Object(w.forwardRef)((function(e,t){return x.a.createElement(We.a,Object.assign({},e,{ref:t}))})),Delete:Object(w.forwardRef)((function(e,t){return x.a.createElement(Ye.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(w.forwardRef)((function(e,t){return x.a.createElement(Te.a,Object.assign({},e,{ref:t}))})),Edit:Object(w.forwardRef)((function(e,t){return x.a.createElement(Ke.a,Object.assign({},e,{ref:t}))})),Export:Object(w.forwardRef)((function(e,t){return x.a.createElement(tt.a,Object.assign({},e,{ref:t}))})),Filter:Object(w.forwardRef)((function(e,t){return x.a.createElement(Ze.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(w.forwardRef)((function(e,t){return x.a.createElement(R.a,Object.assign({},e,{ref:t}))})),LastPage:Object(w.forwardRef)((function(e,t){return x.a.createElement(F.a,Object.assign({},e,{ref:t}))})),NextPage:Object(w.forwardRef)((function(e,t){return x.a.createElement(Te.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(w.forwardRef)((function(e,t){return x.a.createElement(Le.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(w.forwardRef)((function(e,t){return x.a.createElement(We.a,Object.assign({},e,{ref:t}))})),Search:Object(w.forwardRef)((function(e,t){return x.a.createElement(W.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(w.forwardRef)((function(e,t){return x.a.createElement(Ve.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(w.forwardRef)((function(e,t){return x.a.createElement(Qe.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(w.forwardRef)((function(e,t){return x.a.createElement(nt.a,Object.assign({},e,{ref:t}))}))},dt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!0,load_error:!1,defination:null,service:null,query:{p:1},dt_columns:[],records:[],raw_data:[],raw_data_mutated:!1,mouseX:null,mouseY:null,actionsView:"contextMenu",context:null},n.handleSocketsOnCreate=function(e){var t=n.props,a=t.defination,r=(t.sockets,e.context),i=e.action;n.state.raw_data;a.model===r&&n.setState((function(e){var t=e.raw_data;console.log("handleSocketsOnCreate context",r),console.log("handleSocketsOnCreate action",i);var a=Array.isArray(t)?t:[];return a.unshift(i.result),console.log("handleSocketsOnCreate new_raw_data",a),{raw_data:a,raw_data_mutated:!0}}))},n.handleDeleteItemConfirm=function(e){return function(t){var a=n.props,r=a.openDialog,i=a.closeDialog;Object(u.a)(n);r({title:"Confirm Delete",body:"Are you sure you want delete entry? This action might be irreversible",actions:{cancel:{text:"Cancel",color:"default",onClick:function(){return i()}},delete:{text:"Delete",color:"error",onClick:n.handleDeleteItem(e)}}})}},n.handleDeleteItem=function(e){return function(t){var a=n.props,r=a.openDialog;(0,a.closeDialog)(),e._id&&(e=e._id),n.state.service.delete(e).then((function(t){n.setState((function(t){var a=t.records;return Array.isArray(a)&&(a=a.filter((function(t){if(t.entry){if(t.entry._id===e)return!1}else if(t._id===e)return!1;return!0}))),Array.isArray(a)||(a=[]),{records:a}}))})).catch((function(e){r({title:"Delete failed",body:e.msg,actions:{}})}))}},n.handleOnRowContextMenu=function(e){return function(t){t.preventDefault();var a=t.clientX-2,r=t.clientY-4;console.log("this.state.raw_data[index]",n.state.raw_data[e]),n.setState((function(t){return{mouseX:a,mouseY:r,context:t.raw_data[e]}}))}},n.handleOnRowContextMenuClose=function(e){e.preventDefault(),n.setState({mouseX:null,mouseY:null})};var r=e.defination,i=e.service,s=e.query,o=e.cache.data;return n.state.defination=r,n.state.service=i,n.state.query=s?Object(l.a)(Object(l.a)({},s),{},{p:1}):{p:1},n.state.records=Array.isArray(o[r.name])?o[r.name]:[],n.mounted=!1,n.handleDeleteItemConfirm=n.handleDeleteItemConfirm.bind(Object(u.a)(n)),n.handleDeleteItem=n.handleDeleteItem.bind(Object(u.a)(n)),n.handleOnRowContextMenu=n.handleOnRowContextMenu.bind(Object(u.a)(n)),n.handleSocketsOnCreate=n.handleSocketsOnCreate.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cache,a=e.defination,n=e.sockets;n&&n.default&&n.default.on("create",this.handleSocketsOnCreate),this.mounted=!0,this.loadContext(),this.prepareData(Array.isArray(t.data[a.name])?t.data[a.name]:[])}},{key:"getSnapshotBeforeUpdate",value:function(e){this.mounted=!1;var t=this.props;t.cache,t.defination;return{contextReloadRequired:!Object.areEqual(e.defination,this.props.defination),dataReloadRequired:!Object.areEqual(e.query,this.props.query),dataPreparationRequired:!1}}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(this.mounted=!0,a.contextReloadRequired&&(this.loadContext(),this.prepareData()),a.dataReloadRequired){var r=this.props.query;this.setState({query:r?Object(l.a)(Object(l.a)({},r),{},{p:1}):{p:1}},(function(){n.loadData(r?Object(l.a)(Object(l.a)({},r),{},{p:1}):{p:1})}))}this.state.raw_data_mutated&&this.setState({raw_data_mutated:!1},this.prepareData(this.state.raw_data))}},{key:"componentWillUnmount",value:function(){var e=this.props.sockets;e&&e.default&&e.default.off("create",this.handleSocketsOnCreate)}},{key:"loadContext",value:function(){var e=this,t=this.props,a=t.classes,n=t.defination,r=t.service,i=t.query,s=t.auth;t.actionsType;if(n){var c=n.scope.columns,d=[];if(!n.access.restricted(s.user)){d.push({title:String.isString(n.label)?n.label.singularize():"ID",field:"_id"});for(var u=function(){var t=Object(o.a)(p[m],2),n=t[0],r=t[1],i=!0;r.restricted&&"display"in r.restricted&&"function"===typeof r.restricted.display&&(i=!r.restricted.display(!1,s.user)),i&&(Function.isFunction(e.state.defination.views.listing.tableview.resolveData)?r.reference||r.possibilities?d.push(Object(l.a)({field:n,title:r.label,render:function(e){return Array.isArray(e[n])?x.a.createElement(g.a,{spacing:2},e[n].map((function(e,t){return x.a.createElement("div",{key:t},e," ")}))):e||""}},r.tableProps)):d.push(Object(l.a)({field:n,title:r.label},r.tableProps)):r.reference&&"file"!==r.input.type&&!r.isAttachment?d.push(Object(l.a)({field:n,title:r.label,render:function(e){return Array.isArray(e[n])?x.a.createElement(g.a,{spacing:2},e[n].map((function(e,t){return x.a.createElement(Re.a,{className:a.valueChip,key:e.value,label:e.resolve})}))):Boolean(e[n])?x.a.createElement(Re.a,{label:e[n].resolve}):""}},r.tableProps)):r.reference&&("file"===r.input.type||r.isAttachment)?d.push(Object(l.a)({field:n,title:r.label,render:function(e){return Array.isArray(e[n])?x.a.createElement(g.a,{spacing:2},e[n].map((function(e,t){return x.a.createElement(Re.a,{className:a.valueChip,avatar:x.a.createElement(ne.a,{color:"#cfd8dc",textColor:"#000000",src:"image"===de.c.fileType(e.resolve)?ot.attachments.getAttachmentFileUrl(e.value):void 0},de.c.fileIcon(e.resolve)),label:e.resolve,onClick:function(t){t.preventDefault(),window.open(ot.attachments.getAttachmentFileUrl(e.value),"_blank").focus()},key:"file-"+e.value})}))):Boolean(e[n])?x.a.createElement(Re.a,{avatar:x.a.createElement(ne.a,{color:"#cfd8dc",textColor:"#000000",src:"image"===de.c.fileType(e[n].resolve)?ot.attachments.getAttachmentFileUrl(e[n].value):void 0},de.c.fileIcon(e[n].resolve)),onClick:function(t){t.preventDefault(),window.open(ot.attachments.getAttachmentFileUrl(e[n].value),"_blank").focus()},label:e[n].resolve}):""}},r.tableProps)):d.push(Object(l.a)({field:n,title:r.label},r.tableProps)))},m=0,p=Object.entries(c);m<p.length;m++)u()}this.setState({defination:n,service:r,query:i?Object(l.a)(Object(l.a)({},i),{},{p:1}):{p:1},dt_columns:d,records:[],loading:!1},(function(){e.loadData(i?Object(l.a)(Object(l.a)({},i),{},{p:1}):{p:1})}))}}},{key:"parseData",value:function(e){for(var t=this.props,a=t.defination,n=t.auth,r=e,i=a.scope.columns,s=0,l=Object.entries(i);s<l.length;s++){var c=Object(o.a)(l[s],2),d=c[0],u=c[1];if("date"===u.input.type&&(e[d]?r[d]=new Date(e[d]).format(ce.b.dateformats.date):r[d]=""),"datetime"===u.input.type&&e[d]&&(e[d]?r[d]=new Date(e[d]).format(ce.b.dateformats.datetime):r[d]=""),"time"===u.input.type&&(e[d]?r[d]=new Date(e[d]).format(ce.b.dateformats.time):r[d]=""),"boolean"===u.type&&(e[d]?r[d]="Yes":r[d]="No"),JSON.isJSON(r[d])&&!u.reference&&(r[d]=JSON.stringify(r[d])),u.possibilities)if(JSON.isJSON(u.possibilities))e[d]in u.possibilities&&(r[d]=u.possibilities[e[d]]);else if(Function.isFunction(u.possibilities)){var m=u.possibilities(e,n.user);JSON.isJSON(m)&&e[d]in m&&(r[d]=m[e[d]])}}return r}},{key:"loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.props,n=(a.auth,a.cache),r=a.defination,i=a.apiCallRequest,s=a.cache_data,o=a.onLoadData,l=a.load_data;if(r)if(l)this.setState({loading:!0,load_error:!1}),i(r.name,{uri:r.endpoint,type:"records",params:t,data:{},cache:s}).then((function(a){Function.isFunction(o)&&o(a,t),e.setState({loading:!1}),e.prepareData(a)})).catch((function(t){e.setState((function(e){return{records:[],load_error:t,loading:!1}}))}));else{var c=Array.isArray(n.data[r.name])?n.data[r.name]:[];this.prepareData(c),Function.isFunction(o)&&o(c,t)}else this.setState((function(e){return{records:[],load_error:{msg:"No Context defination or provided"},loading:!1}}))}},{key:"prepareData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props,a=t.auth,n=t.cache,r=t.defination,i=Array.isArray(e)?e:Array.isArray(n.data[r.name])?n.data[r.name]:[],s=r?r.scope.columns:{},o=[];o=de.d.resolveReferenceColumnsDisplays(i,s,a.user);var l=this,c=o.map((function(e){return l.parseData(e)}));this.setState((function(e){return{records:c}}))}},{key:"downloadCSV",value:function(e){e.toCSV()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.defination,n=e.api,r=(e.cache,e.actionsType),i=e.history;e.location;return x.a.createElement(g.a,{className:t.root},x.a.createElement(b.a,{className:"p-0 m-0",xs:12},this.state.loading&&x.a.createElement(g.a,{className:t.full_height,justify:"center",alignItems:"center"},x.a.createElement(b.a,{xs:12,className:"flex relative flex-row"},x.a.createElement("div",{className:"flex-grow"},x.a.createElement(Se.a,{variant:"text",width:150})),x.a.createElement("div",{className:"flex"},x.a.createElement(Se.a,{variant:"circle",width:32,height:32,className:"float-right mx-2"}),x.a.createElement(Se.a,{variant:"circle",width:32,height:32,className:"float-right mx-2"}),x.a.createElement(Se.a,{variant:"circle",width:32,height:32,className:"float-right mx-2"}),x.a.createElement(Se.a,{variant:"circle",width:32,height:32,className:"float-right mx-2"}))),x.a.createElement(b.a,{xs:12},x.a.createElement(Se.a,{variant:"rect",width:"100%",height:70,className:"mt-2"}),x.a.createElement(Se.a,{variant:"rect",width:"100%",height:70,className:"mt-2"}),x.a.createElement(Se.a,{variant:"rect",width:"100%",height:70,className:"mt-2"}),x.a.createElement(Se.a,{variant:"rect",width:"100%",height:70,className:"mt-2"}))),!this.state.loading&&Array.isArray(this.state.records)&&x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{className:"p-0 m-0",xs:12},"context"===r&&x.a.createElement(Pe.a,{onContextMenu:this.handleOnRowContextMenuClose,onClickAway:this.handleOnRowContextMenuClose},x.a.createElement(S.a,{open:null!==this.state.mouseY,onClose:this.handleOnRowContextMenuClose,anchorReference:"anchorPosition",anchorPosition:null!==this.state.mouseY&&null!==this.state.mouseX?{top:this.state.mouseY,left:this.state.mouseX}:void 0},x.a.createElement(A.a,{onClick:this.handleOnRowContextMenuClose},"Copy"),x.a.createElement(A.a,{onClick:this.handleOnRowContextMenuClose},"Print"),x.a.createElement(A.a,{onClick:this.handleOnRowContextMenuClose},"Highlight"),x.a.createElement(A.a,{onClick:this.handleOnRowContextMenuClose},"Email"))),this.state.records.length>0?x.a.createElement(it.a,{icons:ct,columns:this.state.dt_columns,data:this.state.records,options:{search:!1,exportButton:!0,exportCsv:function(e,t){var n={};e.map((function(e){n[e.field]=e.title})),t.unshift(n),t.forEach((function(e){Object.entries(e).map((function(t){var a=Object(o.a)(t,2),n=a[0],r=a[1];JSON.isJSON(r)&&(e[n]=r.resolve)}))})),t.toCSV((a?a.label:"Records")+" - "+(new Date).format("d M Y H:i:s A")+".csv")},paging:!1},title:(n.loading?"Loading ":"")+a.label+(n.loading?"...":""),onRowClick:function(e,t){i.push(("/"+a.name+"/view/"+t._id).toUriWithDashboardPrefix())}}):x.a.createElement(g.a,{className:"p-0 m-0",justify:"center",alignItems:"center"},x.a.createElement("img",{alt:"Empty list",className:t.emptyImage,src:X.a}),x.a.createElement(y.a,{className:t.emptyText,color:"grey",variant:"body2",center:!0,fullWidth:!0},"No"," ",a.label?a.label:"Records"," ","found")))),!!n&&(n.busy&&n.error)&&x.a.createElement(g.a,null,x.a.createElement(b.a,{xs:12},x.a.createElement(y.a,{color:"error",variant:"body2",center:!0,fullWidth:!0},"An error occured. \n "+n.error.msg+" \n Displaying cached data."))))))}}]),a}(x.a.Component);dt.defaultProps={show_actions:!0,show_links:!0,query:{p:1},cache_data:!0,load_data:!0,actionsType:"inline"};var ut=_()(v()((function(e){return{root:{padding:"0"},data_actions_wrapper:{display:"inline-block",whiteSpace:"nowrap","& > *":{display:"inline-block",whiteSpace:"nowrap"}},valueChip:{margin:e.spacing(.5)},emptyImage:{maxWidth:200,width:"100%"},emptyText:{marginTop:e.spacing(3)}}})),lt.c,st.i,Object(E.b)((function(e,t){return{auth:e.auth,cache:e.cache,api:e.api}}),{openDialog:be.sb,closeDialog:be.pb,apiCallRequest:be.gb}))(dt);function mt(e){var t=Object(I.a)(),a=e.count,n=e.page,r=e.rowsPerPage,i=e.onChangePage;return x.a.createElement("div",{className:"ml-2 flex-shrink-0"},x.a.createElement(L.a,{onClick:function(e){i(e,0)},disabled:0===n,"aria-label":"first page"},"rtl"===t.direction?x.a.createElement(F.a,null):x.a.createElement(R.a,null)),x.a.createElement(L.a,{onClick:function(e){i(e,n-1)},disabled:0===n,"aria-label":"previous page"},"rtl"===t.direction?x.a.createElement(J.a,null):x.a.createElement(M.a,null)),x.a.createElement(L.a,{onClick:function(e){i(e,n+1)},disabled:n>=Math.ceil(a/r)-1,"aria-label":"next page"},"rtl"===t.direction?x.a.createElement(M.a,null):x.a.createElement(J.a,null)),x.a.createElement(L.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(a/r)-1))},disabled:n>=Math.ceil(a/r)-1,"aria-label":"last page"},"rtl"===t.direction?x.a.createElement(R.a,null):x.a.createElement(F.a,null)))}var pt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).state={defination:null,service:null,view:"tableview",views:{},showViewOptions:!0,showAddBtn:!0,searchKeyword:"",query:{},pages:10,page:1,viewMenuAnchorEl:null,sortFields:[],filterAccordionExpanded:!1,filterableFields:{},filterContext:!1,filterMenuAnchor:null,filters:{values:{},labels:{}}},n.mounted=!1,n.searchkeywordRef=x.a.createRef(),n.handleViewItemClick=function(e){return function(t){n.mounted?n.setState({view:e,viewMenuAnchorEl:null}):(n.state.view=e,n.state.viewMenuAnchorEl=null)}},n.handleShowViewsMenu=function(e){var t=e.currentTarget;n.mounted?n.setState({viewMenuAnchorEl:t}):n.state.viewMenuAnchorEl=t},n.handleCloseViewsMenu=function(){n.mounted?n.setState({viewMenuAnchorEl:null}):n.state.viewMenuAnchorEl=null},n.handleOnPageChanged=function(e,t){n.setState((function(e){return{page:t+1,query:Object(l.a)(Object(l.a)({},e.query),{},{page:t+1}),viewMenuAnchorEl:null}}))},n.handleOnRecordsPerPageChanged=function(e){var t=Number.parseNumber(e.target.value,n.state.query.pagination);n.setState((function(e){return{page:1,query:Object(l.a)(Object(l.a)({},e.query),{},{pagination:t})}}))};var r=e.defination,i=e.service,s=e.query,d=(e.cache,e.app);n.state.defination=r,n.state.service=i,n.state.query=s?Object(l.a)(Object(l.a)({},s),{},{p:1,pagination:"rpp"in s?s.rpp:"pagination"in s?s.pagination:d.preferences.data.pagination,page:"pg"in s?s.pg:"page"in s?s.page:1}):{p:1,pagination:"rpp"in s?s.rpp:"pagination"in s?s.pagination:d.preferences.data.pagination,page:"pg"in s?s.pg:"page"in s?s.page:1};var m={},p=!1,f="";if(Object.entries(r.scope.columns).map((function(e,t){var a=Object(o.a)(e,2),n=a[0],r=a[1];["file","dynamic","textarea","password","wysiwyg","map","file","slider","multiselect"].includes(r.input.type)||(m[n]=r)})),JSON.isJSON(s)){var h=!1,v=Object.keys(m);Object.entries(s).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];!h&&v.includes(a)&&(p=a,f=n,f=String.isString(n)?n:String(n),h=!0)}))}return p||!s.q&&!s.query?(n.state.searchKeyword=f,n.state.filterContext=p):s.q?n.state.searchKeyword=s.q:n.state.searchKeyword=s.query,n.handleViewItemClick=n.handleViewItemClick.bind(Object(u.a)(n)),n.handleOnPageChanged=n.handleOnPageChanged.bind(Object(u.a)(n)),n.handleOnRecordsPerPageChanged=n.handleOnRecordsPerPageChanged.bind(Object(u.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.mounted=!0,this.prepareForRender()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getSnapshotBeforeUpdate",value:function(e){return this.mounted=!1,{prepareForRenderRequired:!Object.areEqual(e.query,this.props.query)}}},{key:"componentDidUpdate",value:function(e,t,a){this.mounted=!0,a.prepareForRenderRequired&&this.prepareForRender()}},{key:"prepareForRender",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r,s,c,d,u,m,p,f,h,v,g,b,y,w,x,E,O,_;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.defination,n=t.service,r=t.query,s=t.view,c=t.showViewOptions,d=t.showAddBtn,u=t.app,a&&n){m={tableview:"Table View",listview:"List View",googlemapview:"Map View",vectormapview:"Vector Map View",calendarview:"Calendar View"},p={},f="tableview",a.views.listing.default in m&&(f=a.views.listing.default);for(h=0,v=Object.entries(m);h<v.length;h++)g=Object(o.a)(v[h],2),b=g[0],y=g[1],b in a.views.listing&&(p[b]=y);w={},x=!1,E="",Object.entries(a.scope.columns).map((function(e,t){var a=Object(o.a)(e,2),n=a[0],r=a[1];["file","dynamic","textarea","password","wysiwyg","map","file","slider","multiselect"].includes(r.input.type)||(w[n]=r)})),JSON.isJSON(r)&&(O=!1,_=Object.keys(w),Object.entries(r).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];!O&&_.includes(a)&&(x=a,E=n,E=String.isString(n)?n:String(n),O=!0)}))),console.log("this.searchkeywordRef","this.searchkeywordRef"),this.mounted?this.setState((function(e){return{defination:a,service:n,query:r?Object(l.a)(Object(l.a)({},r),{},{p:1,pagination:"rpp"in r?r.rpp:"pagination"in r?r.pagination:u.preferences.data.pagination,page:"pg"in r?r.pg:"page"in r?r.page:1}):{p:1,pagination:"rpp"in r?r.rpp:"pagination"in r?r.pagination:u.preferences.data.pagination,page:"pg"in r?r.pg:"page"in r?r.page:1},views:p,view:s||f,showViewOptions:c,showAddBtn:d,filterableFields:w,searchKeyword:E,filterContext:x}})):this.state=Object(l.a)(Object(l.a)({},this.state),{},{defination:a,service:n,query:r?Object(l.a)(Object(l.a)({},r),{},{p:1,pagination:"rpp"in r?r.rpp:"pagination"in r?r.pagination:u.preferences.data.pagination,page:"pg"in r?r.pg:"page"in r?r.page:1}):{p:1,pagination:"rpp"in r?r.rpp:"pagination"in r?r.pagination:u.preferences.data.pagination,page:"pg"in r?r.pg:"page"in r?r.page:1},views:p,view:s||f,showViewOptions:c,showAddBtn:d,filterableFields:w,searchKeyword:E,filterContext:x})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.auth,i=(t.query,t.defination),s=(t.service,t.cache),c=(t.api,t.showPagination),d=t.showSorter,u=t.cache_data,m=t.onLoadData,p=t.load_data,h=t.onClickEntry,v=(t.sorterFormLayoutType,this.state.view);return x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(g.a,{className:"p-0 m-0"},this.state.showViewOptions&&x.a.createElement(b.a,{sm:12,md:8},Object.entries(this.state.views).map((function(t,a){var n=Object(o.a)(t,2),r=n[0],i=n[1];return x.a.createElement(f.a,{color:"primary",variant:r===v?"contained":"text",onClick:function(t){console.log(r),e.setState({view:r,viewMenuAnchorEl:null})},key:"btn-view-"+r},i)}))),this.state.showAddBtn&&i&&!i.access.actions.create.restricted(r.user)&&x.a.createElement(b.a,{sm:12,md:this.state.showViewOptions?4:12},i.access.actions.create.link.inline.default({className:"float-right"}))),x.a.createElement(g.a,{className:"p-1 m-0"},d&&"googlemapview"!==v&&x.a.createElement(b.a,{xs:12,className:"p-0 m-0 mb-2"},x.a.createElement(g.a,{className:"p-0 m-0"},x.a.createElement(b.a,{xs:12,className:"p-0"},x.a.createElement(N.a,{expanded:this.state.filterAccordionExpanded,className:"p-0",variant:"outlined"},x.a.createElement(k.a,{component:"form",elevation:0,className:a.searchRoot,onSubmit:function(t){t.preventDefault(),e.setState((function(e){return{query:e.filterContext?Object(l.a)(Object(l.a)({},e.query),{},Object(n.a)({},e.filterContext,e.searchKeyword)):Object(l.a)(Object(l.a)({},e.query),{},{q:e.searchKeyword})}})),console.log("Search submit searchKeyword",e.state.searchKeyword)}},!this.state.filterContext&&x.a.createElement(L.a,{className:a.filterIconButton,"aria-label":"Filter",onClick:function(t){t.preventDefault(),e.setState({filterMenuAnchor:t.currentTarget})}},x.a.createElement(T.a,null)),this.state.filterContext&&this.state.filterableFields[this.state.filterContext]&&x.a.createElement(f.a,{"aria-label":"Filter",size:"small",color:"secondary",onClick:function(t){t.preventDefault(),e.setState({filterMenuAnchor:t.currentTarget})}},Function.isFunction(this.state.filterableFields[this.state.filterContext].label)?this.state.filterContext.humanize():this.state.filterableFields[this.state.filterContext].label),x.a.createElement(S.a,{id:"filter-fields-menu",anchorEl:this.state.filterMenuAnchor,keepMounted:!0,open:Boolean(this.state.filterMenuAnchor),onClose:function(){return e.setState({filterMenuAnchor:null})}},Object.entries(this.state.filterableFields).map((function(t,a){var n=Object(o.a)(t,2),r=n[0],i=n[1];return x.a.createElement(A.a,{onClick:function(){e.setState({filterContext:e.state.filterContext!==r&&r,filterMenuAnchor:null})}},Function.isFunction(i.label)?r.humanize():i.label)}))),x.a.createElement(z.m,{className:a.searchInput,placeholder:"Search...",inputProps:{"aria-label":"Search"},defaultValue:this.state.searchKeyword,onFocus:function(){e.state.filterAccordionExpanded||e.setState({filterAccordionExpanded:!0})},onChange:function(t){e.setState((function(e){var a={searchKeyword:t};if(e.query&&e.query.q){var n=JSON.fromJSON(e.query);delete n.q,a.query=n}return a}))},variant:"base",ref:function(t){return e.searchkeywordRef=t}}),x.a.createElement(L.a,{type:"submit",className:a.searchIconButton,"aria-label":"search"},x.a.createElement(W.a,null))),x.a.createElement(j.a,{className:"p-0"},Object.keys(this.state.filters.values).length>0&&x.a.createElement(g.a,{className:"m-0"},Object.entries(this.state.filters.labels).map((function(e,t){var a=Object(o.a)(e,2),n=a[0],r=a[1];return x.a.createElement(Re.a,{className:"mx-1 my-1 max-w-xs",color:"secondary",label:(String.isString(i.scope.columns[n].label)?i.scope.columns[n].label+" : ":"")+r,variant:"outlined",style:{maxWidth:180},key:"filter-chip-"+t})})))))))),x.a.createElement(b.a,{xs:12,className:"p-0 m-0"},"tableview"==v&&x.a.createElement(ut,{defination:i,service:this.state.service,query:this.state.query,cache_data:u,load_data:p,onLoadData:m,onClickEntry:h}),"googlemapview"===v&&x.a.createElement(Ee.default,{context:i.name,service:this.state.service,query:this.state.query,cache_data:u,load_data:p,onLoadData:m,onClickEntry:h}),"calendarview"===v&&x.a.createElement(xe,{defination:i,service:this.state.service,query:this.state.query,cache_data:u,load_data:p,onLoadData:m,onClickEntry:h}),"listview"===v&&x.a.createElement(De,{defination:i,service:this.state.service,query:this.state.query,cache_data:u,load_data:p,onLoadData:m,onClickEntry:h}))),c&&"googlemapview"!=v&&x.a.createElement(g.a,{className:"p-0 m-0 mb-4"},x.a.createElement(b.a,{xs:12,className:"p-2 flex items-center justify-center"},x.a.createElement(C.a,{count:i.name in s.res?s.res[i.name].count:1,page:i.name in s.res?s.res[i.name].page-1:this.state.page-1,rowsPerPage:this.state.query.pagination,onChangePage:this.handleOnPageChanged,labelRowsPerPage:"Records per page",rowsPerPageOptions:[5,10,25,50,100,{value:-1,label:"All"}],onChangeRowsPerPage:this.handleOnRecordsPerPageChanged,ActionsComponent:mt,SelectProps:{label:"Records per page",variant:"outlined"},classes:{toolbar:"flex-col-reverse px-2"}}))))}}]),a}(x.a.Component);pt.defaultProps={show_actions:!0,show_links:!0,showViewOptions:!0,showAddBtn:!0,showPagination:!0,showSorter:!0,sorterFormLayoutType:"inline",query:{},load_data:!0,cache_data:!0};t.a=_()(v()((function(e){return{root:{padding:e.spacing(),backgroundColor:e.palette.background.paper},calendar:{borderRight:"1px solid rgba("+ae.b.rgb.grey+", 0.5) !important",borderLeft:"1px solid rgba("+ae.b.rgb.grey+", 0.5) !important"},activeVieBtn:{background:ae.b.hex.primary,color:ae.b.hex.inverse,border:"1px solid"+ae.b.hex.primary},viewBtnGroup:{position:"absolute !important",right:e.spacing()},searchRoot:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",margin:0},searchInput:{marginLeft:e.spacing(1),flex:1},searchIconButton:{padding:10},searchDivider:{height:28,margin:4}}})),Object(E.b)((function(e){return{auth:e.auth,cache:e.cache,api:e.api,app:e.app}}),{}),ye.a)(pt)},1390:function(e,t,a){"use strict";var n=a(2),r=a(14),i=a(26),s=a(27),o=a(18),l=a(17),c=a(43),d=a.n(c),u=(a(1357),a(266)),m=a(22),p=a(16),f=a(21),h=a(0),v=a.n(h),g=a(35),b=a(63),y=a.n(b),w=a(11),x=a(50),E=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var i;Object(r.a)(this,a),(i=t.call(this,e)).state={loading:!0,load_error:!1,defination:null,service:null,query:{p:1},records:[]},i.handleDeleteItemConfirm=function(e){return function(t){var a=i.props,n=a.openDialog,r=a.closeDialog;Object(s.a)(i);n({title:"Confirm Delete",body:"Are you sure you want delete entry? This action might be irreversible",actions:{cancel:{text:"Cancel",color:"default",onClick:function(){return r()}},delete:{text:"Delete",color:"error",onClick:function(t){r(),i.handleDeleteItem(e)}}}})}},i.handleDeleteItem=function(e){return function(e){var t=i.props,a=t.openDialog,n=t.closeDialog;a({title:"Deleting safely",body:"Please wait. Executing safe delete...",actions:{close:{text:"Close",color:"default",onClick:function(){return n()}}}})}};var o=e.defination,l=e.service,c=e.query;return i.state.defination=o,i.state.service=l,i.state.query=c?Object(n.a)(Object(n.a)({},c),{},{p:1}):{p:1},i.handleDeleteItemConfirm=i.handleDeleteItemConfirm.bind(Object(s.a)(i)),i.handleDeleteItem=i.handleDeleteItem.bind(Object(s.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cache,a=e.defination;this.mounted=!0,this.loadContext(),this.prepareData(Array.isArray(t.data[a.name])?t.data[a.name]:[])}},{key:"getSnapshotBeforeUpdate",value:function(e){this.mounted=!1;var t=this.props;t.cache,t.defination;return{contextReloadRequired:!Object.areEqual(e.defination,this.props.defination),dataReloadRequired:!Object.areEqual(e.query,this.props.query),dataPreparationRequired:!1}}},{key:"componentDidUpdate",value:function(e,t,a){if(a.contextReloadRequired&&(this.loadContext(),this.prepareData()),a.dataReloadRequired){var r=this.props.query;this.setState({query:r?Object(n.a)(Object(n.a)({},r),{},{p:1}):{p:1}},this.loadData)}}},{key:"loadContext",value:function(){var e=this.props,t=e.defination,a=e.service,r=e.query;e.cache;t&&this.setState({defination:t,service:a,query:r?Object(n.a)(Object(n.a)({},r),{},{p:1}):{p:1},loading:!1},this.loadData)}},{key:"loadData",value:function(){var e=this,t=this.props,a=(t.auth,t.cache),n=t.defination,r=t.apiCallRequest,i=t.cache_data,s=t.onLoadData,o=t.load_data;if(n)if(o)r(n.name,{uri:n.endpoint,type:"records",params:this.state.query,data:{},cache:i}).then((function(t){Function.isFunction(s)&&s(t),e.prepareData(t)})).catch((function(t){e.setState((function(e){return{records:[],load_error:t,loading:!1}}))}));else{var l=Array.isArray(a.data[n.name])?a.data[n.name]:[];Function.isFunction(s)&&s(l),this.prepareData(l)}else this.setState((function(e){return{records:[],load_error:{msg:"No Context defination or provided"},loading:!1}}))}},{key:"prepareData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.props,n=(a.auth,a.cache),r=a.defination,i=Array.isArray(t)?t:Array.isArray(n.data[r.name])?n.data[r.name]:[];r&&r.scope.columns;Function.isFunction(r.views.listing.googlemapview.resolveData)&&r.views.listing.googlemapview.resolveData(i,!0).then((function(t){e.setState((function(e){return{records:t,loading:!1}}))})).catch((function(t){e.setState((function(e){return{records:[],loading:!1}}))}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.googleMapProps,n=e.api,r=e.defination;return v.a.createElement(m.a,{className:t.root},v.a.createElement(p.a,{className:"p-0 m-0",xs:12},v.a.createElement(m.a,{className:"p-0 m-0"},v.a.createElement(m.a,{className:"p-0 m-0"},v.a.createElement(p.a,{className:"p-0 m-0",xs:12},v.a.createElement(m.a,{className:"p-0 m-0"},v.a.createElement(p.a,{xs:12,className:"p-0 m-0"},v.a.createElement(u.a,Object.assign({defaultZoom:12,zoom:12},a,{polylines:r&&"polyline"===r.views.listing.googlemapview.type?this.state.records:[],markers:"marker"===r.views.listing.googlemapview.type?this.state.records:[],circles:"circle"===r.views.listing.googlemapview.type?this.state.records:[],showCurrentPosition:!0})))))),!!n&&(n.complete&&n.error)&&v.a.createElement(m.a,null,v.a.createElement(p.a,{xs:12},v.a.createElement(f.a,{color:"error",variant:"body2",center:!0,fullWidth:!0},"An error occured. \n "+n.error.msg))))))}}]),a}(v.a.Component);E.defaultProps={googleMapProps:{mapHeight:900,showClientsPositions:!0,showCurrentPosition:!0},query:{},load_data:!0,cache_data:!0};y()(d()((function(e){return{root:{padding:"0"}}})),Object(g.b)((function(e,t){t.defination;return{auth:e.auth,cache:e.cache,api:e.api}}),{apiCallRequest:w.gb,openDialog:w.sb,closeDialog:w.pb}),x.a)(E)},1406:function(e,t,a){"use strict";var n=a(2),r=a(6),i=a(12),s=a(14),o=a(26),l=a(27),c=a(18),d=a(17),u=a(24),m=a(255),p=a(461),f=a(1248),h=a(43),v=a.n(h),g=a(4),b=a(1277),y=a(94),w=a(257),x=a.n(w),E=a(21),O=a(1384),_=a(1340),C=a(1346),N=a(1311),j=a(1245),k=a(22),S=a(16),A=a(0),D=a.n(A),R=a(35),P=a(63),M=a.n(P),q=a(50),J=a(431),V=a(691),F=a(432),I=a(433),z=a(77),L=a(33);var B=Object(R.b)((function(e){return{auth:e.auth}}),{})(Object(q.a)((function(e){var t=Object.assign({},e),a=D.a.useState(!0),n=Object(i.a)(a,2),r=(n[0],n[1],t.record),s=t.defination,o=t.auth,l={};function c(e){return s.scope.columns[e].reference&&l[e]?Array.isArray(l[e])?D.a.createElement(D.a.Fragment,null,l[e].map((function(t,a){return D.a.createElement(E.a,{color:"default",paragraph:!0,key:e+"-"+a},t.resolve)}))):D.a.createElement(E.a,{color:"default",paragraph:!0},l[e].resolve):Array.isArray(l[e])?D.a.createElement(D.a.Fragment,null,l[e].map((function(t,a){return D.a.createElement(E.a,{color:"default",paragraph:!0,key:e+"-"+a},t)}))):JSON.isJSON(l[e])?D.a.createElement(E.a,{color:"default",paragraph:!0},JSON.stringify(l[e])):"date"===s.scope.columns[e].input.type||"datetime"===s.scope.columns[e].input.type?"date"===s.scope.columns[e].input.type?D.a.createElement(E.a,{color:"default",paragraph:!0},l[e]?new Date(l[e]).format(z.b.dateformats.date):""):D.a.createElement(E.a,{color:"default",paragraph:!0},l[e]?new Date(l[e]).format(z.b.dateformats.datetime):""):"boolean"===s.scope.columns[e].type?D.a.createElement(E.a,{color:"default",paragraph:!0},l[e]?"Yes":"No"):D.a.createElement(E.a,{color:"default",paragraph:!0},l[e]?l[e]:"")}return"function"===typeof s.views.single.cardview.resolveData?(l=s.views.single.cardview.resolveData(r,o.user,!0),JSON.isJSON(l)||(l={}),l.resolver="defination"):(l=L.d.resolveReferenceColumnsDisplays([r],s.scope.columns,o.user)[0],JSON.isJSON(l)||(l={}),l.resolver="helper"),s&&r?D.a.createElement(J.a,{elevation:0,outlineColor:"#CCCCCC"},D.a.createElement(I.a,{avatar:function(){var e=null;return"defination"===l.resolver&&(e=l.avatar),e}(),title:function(){var e="";if("defination"===l.resolver)e=l.title;else if("helper"===l.resolver)for(var t=s.scope.identity.primary,a=0;a<t.length;a++)e+=s.scope.columns[t[a]].reference&&l[t[a]]?l[t[a]].resolve:l[t[a]];return e}(),subheader:function(){var e="";if("defination"===l.resolver)e=l.subtitle;else if("helper"===l.resolver)for(var t=s.scope.identity.secondary,a=0;a<t.length;a++)e+=s.scope.columns[t[a]].reference&&l[t[a]]?l[t[a]].resolve:l[t[a]];return e}()}),D.a.createElement(F.a,{className:"p-0 m-0"},function(){var e="";return"defination"===l.resolver?e=l.body:"helper"===l.resolver&&(e=D.a.createElement(k.a,{className:"p-0 m-0"},Object.entries(s.scope.columns).map((function(e,t){var a=Object(i.a)(e,2),n=a[0],s=a[1];return s.restricted&&Function.isFunction()?!s.restricted.display(r,o.user)&&D.a.createElement(k.a,{className:"p-0 m-0",key:t},D.a.createElement(S.a,{xs:5},D.a.createElement(E.a,{color:"grey",paragraph:!0},s.label)),D.a.createElement(S.a,{xs:7},c(n))):D.a.createElement(k.a,{className:"p-0 m-0",key:t},D.a.createElement(S.a,{xs:5},D.a.createElement(E.a,{color:"grey",paragraph:!0},s.label)),D.a.createElement(S.a,{xs:7},c(n)))})))),e}()),D.a.createElement(V.a,null)):D.a.createElement(k.a,null)}))),T=a(28),U=a(41);function W(e){var t=e.children,a=e.value,n=e.index,r=Object(u.a)(e,["children","value","index"]);return D.a.createElement(E.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},r),D.a.createElement(j.a,{className:"p-0"},t))}var H=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={view:"cardview",views:{},viewMenuAnchorEl:null,expanded:!0},n.handleViewMenuItemClick=function(e){return function(t){n.setState({view:e,viewMenuAnchorEl:null})}},n.handleShowViewsMenu=function(e){n.setState({viewMenuAnchorEl:e.currentTarget})},n.handleCloseViewsMenu=function(){n.setState({viewMenuAnchorEl:null})},n.prepareForView(),n.handleExpandClick=n.handleExpandClick.bind(Object(l.a)(n)),n.handleViewMenuItemClick=n.handleViewMenuItemClick.bind(Object(l.a)(n)),n.handleRelatedTabValueChange=n.handleRelatedTabValueChange.bind(Object(l.a)(n)),n.handleCloseViewsMenu=n.handleCloseViewsMenu.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleRelatedTabValueChange",value:function(e,t){this.setState({relatedTab:t})}},{key:"handleExpandClick",value:function(){this.setState((function(e){return{expanded:!e.expanded}}))}},{key:"prepareForView",value:function(){var e=this.props,t=e.defination,a=e.auth,n={cardview:"Card View",googlemapview:"Google Map View",vectormapview:"Vector Map View",calendarview:"Calendar View"},r={},s="cardview";t.views.single.default in n&&(s=t.views.single.default);for(var o=0,l=Object.entries(n);o<l.length;o++){var c=Object(i.a)(l[o],2),d=c[0],u=c[1];d in t.views.single&&(r[d]=u)}var m=null;if(JSON.isJSON(t.scope.dependants))for(var p=0,f=Object.entries(t.scope.dependants);p<f.length;p++){var h=Object(i.a)(f[p],2),v=h[0];h[1];if(T[v].name!==t.name){if(String.isString(m))break;T[v].access.restricted(a.user)||(m=T[v].name)}}this.state.views=r,this.state.view=s,this.state.relatedTab=m}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,s=t.auth,o=t.defination,l=t.record,c=t.service;return D.a.createElement(k.a,{className:a.root},D.a.createElement(k.a,null,D.a.createElement(S.a,{xs:12},D.a.createElement(m.a,{className:a.viewSelectBtn,onClick:this.handleShowViewsMenu,"aria-label":"view-select"},this.state.views[this.state.view]),D.a.createElement(p.a,{id:"lock-menu",anchorEl:this.state.viewMenuAnchorEl,keepMounted:!0,open:Boolean(this.state.viewMenuAnchorEl),onClose:this.handleCloseViewsMenu},Object.entries(this.state.views).map((function(t,a){var n=Object(i.a)(t,2),r=n[0],s=n[1];return D.a.createElement(f.a,{key:r,selected:r===e.state.view,onClick:e.handleViewMenuItemClick(r)},s)}))))),D.a.createElement(k.a,null,"cardview"===this.state.view&&D.a.createElement(B,{defination:o,service:c,record:l})),D.a.createElement(k.a,{className:"p-0"},D.a.createElement(S.a,{xs:12},D.a.createElement(k.a,null,D.a.createElement(S.a,{xs:2,md:1},D.a.createElement(y.a,{className:Object(g.a)(a.expand,Object(r.a)({},a.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"show more"},D.a.createElement(x.a,null))),D.a.createElement(S.a,{xs:10,md:11},D.a.createElement(E.a,{className:a.relationsSectionTitle,color:this.state.expanded?"default":"grey",variant:"body2"}," ","Related to this"," ",o.label.singularize()," ")))),D.a.createElement(S.a,{xs:12},D.a.createElement(b.a,{in:this.state.expanded,timeout:"auto"},JSON.isJSON(o.scope.dependants)?D.a.createElement(_.a,{position:"static",color:"default",elevation:0},D.a.createElement(C.a,{value:this.state.relatedTab,onChange:this.handleRelatedTabValueChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"related data tabs"},Object.entries(o.scope.dependants).map((function(e,t){var a,n=Object(i.a)(e,2),r=n[0];n[1];return!T[r].access.restricted(s.user)&&D.a.createElement(N.a,Object.assign({value:r,label:T[r].label,icon:T[r].icon,key:t+"_tab"},{id:"scrollable-force-tab-".concat(a=r),"aria-controls":"scrollable-force-tabpanel-".concat(a)}))})))):D.a.createElement(E.a,{color:"grey",paragraph:!0}," ","No Related data"," "),JSON.isJSON(o.scope.dependants)&&Object.entries(o.scope.dependants).map((function(t,a){var o=Object(i.a)(t,2),c=o[0],d=o[1];return!T[c].access.restricted(s.user)&&D.a.createElement(W,{className:"p-0",value:e.state.relatedTab,index:c,key:"tab-"+a},D.a.createElement(O.a,{defination:T[c],service:U[c],query:Object(n.a)(Object(n.a)({},d.query),{},Object(r.a)({},d.column,l._id)),show_actions:!1,showAddBtn:!1}))}))))))}}]),a}(D.a.Component);H.defaultProps={};t.a=M()(v()((function(e){return{root:{padding:e.spacing()},viewSelectBtn:{position:"absolute !important",right:e.spacing(),bottom:e.spacing()},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},relationsSectionTitle:{height:"100%",lineHeight:"48px",verticalAlign:"middle"}}})),Object(R.b)((function(e){return{auth:e.auth}}),{}),q.a)(H)},1407:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(12),i=a(9),s=a.n(i),o=a(6),l=a(2),c=a(20),d=a(14),u=a(26),m=a(27),p=a(18),f=a(17),h=a(94),v=a(29),g=a.n(v),b=a(43),y=a.n(b),w=a(1352),x=a(1204),E=a(1207),O=a(1250),_=a(1280),C=a(260),N=a.n(C),j=a(220),k=(a(3),a(42)),S=a(431),A=a(691),D=a(432),R=a(433),P=a(22),M=a(16),q=a(21),J=a(2033),V=a(2034),F=a(605),I=a(1457),z=a.n(I),L=a(0),B=a.n(L),T=a(35),U=a(11),W=a(74),H=a(63),Y=a.n(H),X=a(266),K=(a(1390),a(1384)),G=a(59),Z=a(50),$=a(450),Q=a.n($),ee=a(451),te=a.n(ee),ae=!1,ne=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).state={definations:{},services:{},defination:null,service:null,drawerOpen:!0,show_client_positions:!0,clients_positions:{},context:"commissions",context_entry:null,defaultZoom:10,multicontexts:!0,rendered_contexts:[],contexts_props:{},zoom:15,query:{},records:[],markers:[],circles:[],polylines:[]},n.toggleDrawer=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&e!==n.state.drawerOpen&&n.setState((function(t){return{drawerOpen:e}}))}},n.handleOnDrawerNavigationValueChange=function(e,t){var a=n.props,r=a.definations,i=a.services,s=a.cache;n.setState((function(e){return{context:t,context_entry:null,context_entries:["commissions","tracks"].includes(t)&&Array.isArray(s.data[t])?s.data[t]:[],defination:["commissions","tracks"].includes(t)?r[t]:e.defination,service:["commissions","tracks"].includes(t)?i[t]:e.service}}))},n.handleClientListItemClick=function(e,t){return function(e){console.log("handleClientListItemClick client",t,"googleMap",ae),ae&&(ae.panTo({lat:t.position.latitude,lng:t.position.longitude}),ae.context.__SECRET_MAP_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.setZoom(15))}},n.handleToggleContextRender=function(e,t){var a=n.props,r=a.definations,i=(a.cache,a.apiCallRequest),d=a.app;n.setState((function(t){var a=t.rendered_contexts.indexOf(e);return{rendered_contexts:t.rendered_contexts.includes(e)?t.rendered_contexts.removeAtIndex(a):t.rendered_contexts.concat([e])}}),Object(c.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r[e]&&t?i(r[e].name,{uri:r[e].endpoint,type:"records",params:JSON.isJSON(n.state.contexts_props[e])?n.state.contexts_props[e].query:{page:1,pagination:d.preferences.data.pagination,populate:1},data:{},cache:!0}).then((function(t){r[e]&&Function.isFunction(r[e].views.listing.googlemapview.resolveData)&&Array.isArray(t)&&r[e].views.listing.googlemapview.resolveData(t,!0).then((function(a){n.isMounted()?n.setState((function(n){return{context_entry_type:r[e].views.listing.googlemapview.type,context_entry:t.length>0?0:void 0,contexts_props:Object(l.a)(Object(l.a)({},n.contexts_props),{},Object(o.a)({},e,Object(l.a)(Object(l.a)({},n.contexts_props[e]),{},{elements:a,element:r[e].views.listing.googlemapview.type,loaded:!0})))}})):(n.state.context_entry_type=r[e].views.listing.googlemapview.type,n.state.context_entry=t.length>0?0:void 0,n.state.contexts_props=Object(l.a)(Object(l.a)({},n.state.contexts_props),{},Object(o.a)({},e,Object(l.a)(Object(l.a)({},n.state.contexts_props[e]),{},{elements:a,element:r[e].views.listing.googlemapview.type,loaded:!0}))))}))})).catch((function(e){})):r[e]&&(n.isMounted()?n.setState((function(t){return{context_entry_type:void 0,context_entry:void 0,contexts_props:Object(l.a)(Object(l.a)({},t.contexts_props),{},Object(o.a)({},e,Object(l.a)(Object(l.a)({},t.contexts_props[e]),{},{elements:[],element:r[e].views.listing.googlemapview.type,loaded:!1})))}})):(n.state.context_entry_type=void 0,n.state.context_entry=void 0,n.state.contexts_props=Object(l.a)(Object(l.a)({},n.state.contexts_props),{},Object(o.a)({},e,Object(l.a)(Object(l.a)({},n.state.contexts_props[e]),{},{elements:[],element:r[e].views.listing.googlemapview.type,loaded:!1})))));case 1:case"end":return a.stop()}}),a)}))))},n.handleContextEntryClick=function(e,t){n.setState({context_entry:t})};var r=n.props,i=(r.device,r.cache),u=r.context,p=r.contexts,f=(r.definations,r.app);return n.elementRef=B.a.createRef(),n.prepareForView(),n.toggleDrawer=n.toggleDrawer.bind(Object(m.a)(n)),n.handleOnLoadMap=n.handleOnLoadMap.bind(Object(m.a)(n)),n.handleClientListItemClick=n.handleClientListItemClick.bind(Object(m.a)(n)),n.handleOnToggleShowClients=n.handleOnToggleShowClients.bind(Object(m.a)(n)),n.handleOnClientsPositionsLoaded=n.handleOnClientsPositionsLoaded.bind(Object(m.a)(n)),n.handleOnClientPositionAvailable=n.handleOnClientPositionAvailable.bind(Object(m.a)(n)),n.handleOnClientPositionUnavailable=n.handleOnClientPositionUnavailable.bind(Object(m.a)(n)),n.handleOnClientPositionChanged=n.handleOnClientPositionChanged.bind(Object(m.a)(n)),n.handleOnDrawerNavigationValueChange=n.handleOnDrawerNavigationValueChange.bind(Object(m.a)(n)),n.handleContextEntryClick=n.handleContextEntryClick.bind(Object(m.a)(n)),n.handleToggleContextRender=n.handleToggleContextRender.bind(Object(m.a)(n)),n.state=Object(l.a)(Object(l.a)({},n.state),{},{context:u||n.state.context,defaultZoom:f.preferences.data.defaultMapZoom,multicontexts:!!Array.isArray(p)&&p.length>1,rendered_contexts:u?[u]:[],contexts_props:u?Object(o.a)({},u,{query:{page:1,pagination:f.preferences.data.pagination,populate:1},element:"marker",records:[]}):{},context_entries:Array.isArray(i.data[n.state.defination.name])?i.data[n.state.defination.name]:[],drawerOpen:!1}),n}return Object(u.a)(a,[{key:"isMounted",value:function(){return null!=this.elementRef.current}},{key:"componentDidMount",value:function(){}},{key:"prepareForView",value:function(){for(var e=this.props,t=e.auth,a=e.definations,n=e.services,i=e.app,s=null,o=null,l={},c={},d=this.state.contexts_props,u=0,m=Object.entries(a);u<m.length;u++){var p=Object(r.a)(m[u],2),f=p[0],h=p[1];h.access.restricted(t.user)||h.views.listing.googlemapview&&Function.isFunction(h.views.listing.googlemapview.resolveData)&&(l[f]=h,c[f]=n[f],d[f]={query:{page:1,pagination:i.preferences.data.pagination,populate:1},element:h.views.listing.googlemapview.type,elements:[],loaded:!1},null===s&&(s=h,o=n[f]))}this.state.contexts_props=d,this.state.definations=l,this.state.services=c,this.state.defination=s,this.state.service=o}},{key:"handleOnToggleShowClients",value:function(e){this.setState((function(e){return{show_client_positions:!e.show_client_positions}}))}},{key:"handleOnLoadMap",value:function(e,t){ae=e}},{key:"handleOnClientsPositionsLoaded",value:function(e){this.setState((function(t){return{clients_positions:e}}))}},{key:"handleOnClientPositionAvailable",value:function(e,t){this.setState((function(a){return{clients_positions:Object(l.a)(Object(l.a)({},a.clients_positions),{},Object(o.a)({},e,t))}}))}},{key:"handleOnClientPositionUnavailable",value:function(e,t){this.setState((function(t){var a=t.clients_positions;return delete a[e],{clients_positions:a}}))}},{key:"handleOnClientPositionChanged",value:function(e,t){this.setState((function(a){return{clients_positions:a.drawerOpen?Object(l.a)(Object(l.a)({},a.clients_positions),{},Object(o.a)({},e,t)):a.clients_positions}}))}},{key:"render",value:function(){var e,t=this,a=this.props,i=a.theme,s=a.classes,c=(a.showAll,a.device),d=(a.sockets,a.definations),u=a.services,m=a.contexts,p=a.actions,f=this.state,v=f.context,b=f.clients_positions,y=(f.show_client_positions,f.rendered_contexts),C=f.contexts_props,F=[],I=[],L=[];return y.map((function(e){d[e]&&e in C&&("marker"===C[e].element&&Array.isArray(C[e].elements)?I=I.concat(C[e].elements):"circle"===C[e].element&&Array.isArray(C[e].elements)?F=F.concat(C[e].elements):"polyline"===C[e].element&&Array.isArray(C[e].elements)&&(L=L.concat(C[e].elements)))})),B.a.createElement(S.a,{elevation:0,outlineColor:i.palette.text.primary,style:{backgroundColor:i.palette.background.paper},ref:this.elementRef},B.a.createElement(R.a,{avatar:B.a.createElement(k.a,{style:{backgroundColor:"rgba(0,0,0,0.05)",color:i.palette.text.primary}},B.a.createElement(z.a,null)),title:this.props.context?d[this.props.context]?d[this.props.context].label+" Map":"Map":"Map Overview",subheader:"Click on any context marker, route or polyline in the map for more infomation on the context ",action:B.a.createElement("div",null,Array.isArray(p)&&p.map((function(e,t){var a=e.onClick,r=e.icon,i=Object(n.a)(e,["onClick","icon"]);return B.a.createElement(h.a,Object.assign({"aria-label":"Action",className:"mx-1 inverse-text translucent ",onClick:a,style:{backgroundColor:"rgba(0,0,0,0.05)"},key:"action-button-"+t},i),r)})),B.a.createElement(h.a,{"aria-label":"menu",color:"inherit",className:"mx-1 inverse-text ",onClick:this.toggleDrawer(!this.state.drawerOpen),style:{backgroundColor:"rgba(0,0,0,0.05)"}},B.a.createElement(N.a,{path:j.f,title:"Map Overview Drawer Menu",rotate:this.state.drawerOpen?0:180,size:.8,color:i.palette.text.primary})))}),B.a.createElement(D.a,{className:"p-0 m-0 overflow-x-hidden"},B.a.createElement(P.a,{className:"p-0 m-0"},B.a.createElement(M.a,{xs:12,className:s.wrapper},B.a.createElement("div",{className:g()(s.content,(e={},Object(o.a)(e,s.contentDrawerMargin,c.window_size.width>=1280),Object(o.a)(e,s.contentShift,this.state.drawerOpen&&c.window_size.width>=1280),e)),style:{minHeight:c.window_size.height,backgroundColor:i.palette.background.paper}},B.a.createElement(X.a,{mapHeight:c.window_size.height,showClientsPositions:y.includes("clients_positions"),showCurrentPosition:!0,onLoadClientsPositions:this.handleOnClientsPositionsLoaded,onClientPositionAvailable:this.handleOnClientPositionAvailable,onClientPositionUnavailable:this.handleOnClientPositionUnavailable,onClientPositionChanged:this.handleOnClientPositionChanged,selectedEntry:this.state.context_entry,selectedEntryType:this.state.context_entry_type?this.state.context_entry_type:"clients_position",defaultZoom:this.state.defaultZoom,zoom:this.state.zoom,onMapLoad:this.handleOnLoadMap,polylines:L,markers:I,circles:F})),B.a.createElement(w.a,{className:s.drawer,variant:c.window_size.width>=1280?"persistent":"temporary",anchor:"right",open:this.state.drawerOpen,onClose:this.toggleDrawer(!1),onOpen:this.toggleDrawer(!0),classes:{paper:c.window_size.width>=1280?s.drawerPaper:s.temporaryDrawerPaper}},this.state.multicontexts&&B.a.createElement(J.a,{value:v,onChange:this.handleOnDrawerNavigationValueChange,showLabels:!0,className:"w-full"},B.a.createElement(V.a,{value:"clients_positions",label:"Users",icon:B.a.createElement(N.a,{path:j.a,title:"Clients Postions Users",size:1})}),Object.entries(this.state.definations).map((function(e,t){var a=Object(r.a)(e,2),n=a[0],i=a[1];return B.a.createElement(V.a,{value:n,label:i.label,icon:i.icon,key:"googlemapview-btn-"+n+"-option"})}))),"clients_positions"===v&&0===Object.size(b)&&B.a.createElement(P.a,null,B.a.createElement(M.a,{xs:12,className:"flex items-center justify-center p-2"},B.a.createElement(N.a,{path:j.d,title:"No Records available yet.",color:"#CCCCCC",size:5})),B.a.createElement(M.a,{xs:12,className:"flex items-center justify-center p-2"},B.a.createElement(q.a,null,"No Records available yet."))),"clients_positions"===v&&B.a.createElement(x.a,{className:s.root},Object.entries(b).map((function(e,a){var n=Object(r.a)(e,2),i=n[0],s=n[1],o=!0;if(a>0&&s.user._id===b[Object.keys(b)[a-1]].user._id&&(o=!1),s.user&&o)return B.a.createElement(E.a,{className:"cursor-pointer hover:bg-gray-400",onClick:t.handleClientListItemClick(i,s),key:"client-"+i},B.a.createElement(_.a,null,B.a.createElement(k.a,{src:String.isString(s.user.gender)&&"female"===s.user.gender.trim().toLowerCase()?Q.a:te.a})),B.a.createElement(O.a,{primary:s.user.first_name+" "+s.user.last_name,secondary:String.isString(s.user.role)?s.user.role.humanize():""}))}))),"commissions"===v&&B.a.createElement(K.a,{defination:d.commissions,service:u.commissions,query:{},showViewOptions:!1,showAddBtn:!1,showSorter:!0,sorterFormLayoutType:"normal",view:"listview",onLoadData:function(e,a){d[v]&&Function.isFunction(d[v].views.listing.googlemapview.resolveData)&&Array.isArray(e)&&d[v].views.listing.googlemapview.resolveData(e,!0).then((function(n){t.setState((function(t){return{contexts_props:Object(l.a)(Object(l.a)({},t.contexts_props),{},Object(o.a)({},v,Object(l.a)(Object(l.a)({},t.contexts_props[v]),{},{query:a,elements:n,loaded:!0}))),records:e}}))})).catch((function(a){t.setState((function(t){return{contexts_props:Object(l.a)(Object(l.a)({},t.contexts_props),{},Object(o.a)({},v,Object(l.a)(Object(l.a)({},t.contexts_props[v]),{},{elements:[],loaded:!0}))),records:e}}))}))},onClickEntry:this.handleContextEntryClick}),"tracks"===v&&B.a.createElement(K.a,{defination:d.tracks,service:u.tracks,showViewOptions:!1,showAddBtn:!1,showSorter:!0,showPagination:!0,sorterFormLayoutType:"normal",view:"listview",onLoadData:function(e,a){d[v]&&Function.isFunction(d[v].views.listing.googlemapview.resolveData)&&Array.isArray(e)&&d[v].views.listing.googlemapview.resolveData(e,!0).then((function(n){t.setState((function(t){return{contexts_props:Object(l.a)(Object(l.a)({},t.contexts_props),{},Object(o.a)({},v,Object(l.a)(Object(l.a)({},t.contexts_props[v]),{},{query:a,elements:n,loaded:!0}))),records:e}}))})).catch((function(n){t.setState((function(t){return{contexts_props:Object(l.a)(Object(l.a)({},t.contexts_props),{},Object(o.a)({},v,Object(l.a)(Object(l.a)({},t.contexts_props[v]),{},{query:a,elements:[],loaded:!0}))),records:e}}))}))},onClickEntry:this.handleContextEntryClick}))))),B.a.createElement(A.a,null,B.a.createElement(P.a,{className:"p-0 m-0"},Array.isArray(m)&&m.map((function(e,a){return B.a.createElement(M.a,{xs:12,md:Math.round(12/m.length),className:"flex items-center justify-center",key:"context_entry_switch-"+a},B.a.createElement(G.l,{label:"clients_positions"===e?"Users":d[e]?d[e].label:e,value:t.state.rendered_contexts.includes(e),onChange:function(a){t.handleToggleContextRender(e,a)}}))})),B.a.createElement(M.a,{xs:12},B.a.createElement(q.a,{variant:"body2"},this.props.context&&d[this.props.context]?d[this.props.context].label+" Map from a glance":"Map from a glance")))))}}]),a}(B.a.Component);ne.defaultProps={contexts:["clients_positions","commissions","tracks"],context:"clients_positions",actions:[]};t.default=Object(W.c)(Y()(y()((function(e){return{root:{padding:"0"},wrapper:{display:"flex",margin:0,padding:0},drawer:{width:e.appDrawer.width,flexShrink:0},drawerPaper:{width:e.appDrawer.width,position:"absolute",zIndex:e.zIndex.appBar/2,backgroundColor:e.palette.background.paper},temporaryDrawerPaper:{width:e.appDrawer.width,background:e.palette.background.default},content:{flexGrow:1,padding:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentDrawerMargin:{marginRight:-e.appDrawer.width},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}})),Object(T.b)((function(e){return{app:e.app,auth:e.auth,cache:e.cache,device:e.device}}),{apiCallRequest:U.gb,closeDialog:U.pb,openDialog:U.sb}),F.a,Z.a)(ne))},1409:function(e,t,a){"use strict";var n=a(1),r=a(5),i=a(0),s=a(4),o=(a(7),a(34)),l=a(13),c=i.forwardRef((function(e,t){var a=e.animation,o=void 0===a?"pulse":a,l=e.classes,c=e.className,d=e.component,u=void 0===d?"span":d,m=e.height,p=e.variant,f=void 0===p?"text":p,h=e.width,v=Object(r.a)(e,["animation","classes","className","component","height","variant","width"]),g=Boolean(v.children);return i.createElement(u,Object(n.a)({ref:t,className:Object(s.a)(l.root,l[f],c,g&&[l.withChildren,!h&&l.fitContent,!m&&l.heightAuto],!1!==o&&l[o])},v,{style:Object(n.a)({width:h,height:m},v.style)}))}));t.a=Object(l.a)((function(e){return{root:{display:"block",backgroundColor:Object(o.d)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(c)},1443:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");t.default=i},1444:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People");t.default=i},1499:function(e,t,a){"use strict";var n=a(12),r=a(0),i=a.n(r);function s(e){var t=e.className,a=e.children,s=e.offset,o=e.onViewportVisibilityChange,l=(e.placeholder,e.placeholderType,Object(r.useRef)());!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0px",a=Object(r.useState)(!1),i=Object(n.a)(a,2),s=i[0],l=i[1];Object(r.useEffect)((function(){var a=new IntersectionObserver((function(e){var t=Object(n.a)(e,1)[0];l(t.isIntersecting),Function.isFunction(o)&&o(t.isIntersecting)}),{rootMargin:t});return e.current&&a.observe(e.current),function(){a.unobserve(e.current)}}),[])}(l,0-Number.parseNumber(s,0)+"px");return i.a.createElement("div",{className:t||"w-full ",ref:l},a)}s.defaultProps={placeholderType:"skeleton",placeholder:{variant:"rect",width:"100%",height:200,animation:"wave"},offset:0},t.a=s},1723:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"AudiotrackOutlined");t.default=i},1724:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M4 6.47L5.76 10H20v8H4V6.47M22 4h-4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4z"}),"MovieOutlined");t.default=i},1725:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");t.default=i},1726:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.default=i},1727:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{fill:"none",d:""}),r.default.createElement("path",{d:"M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"})),"Contacts");t.default=i},1728:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");t.default=i},1729:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");t.default=i},1730:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");t.default=i},1731:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=i},1732:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutline");t.default=i},1733:function(e,t,a){"use strict";var n=a(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(61)).default)(r.default.createElement("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");t.default=i},2053:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(26),i=a(18),s=a(17),o=(a(3),a(22)),l=a(16),c=a(0),d=a.n(c),u=a(35),m=a(63),p=a.n(m),f=a(605),h=a(11),v=a(6),g=a(2),b=a(12),y=a(24),w=a(29),x=a.n(w),E=a(43),O=a.n(E),_=a(1273),C=a(1340),N=a(728),j=a(461),k=a(1248),S=a(72),A=a(1443),D=a.n(A),R=a(1726),P=a.n(R),M=a(1444),q=a.n(M),J=a(1727),V=a.n(J),F=a(1442),I=a.n(F),z=a(1441),L=a.n(z),B=a(257),T=a.n(B),U=a(1338),W=a(429),H=a(1214),Y=a(1281),X=a(1732),K=a.n(X),G=a(606),Z=a.n(G),$=a(1731),Q=a.n($),ee=a(394),te=a.n(ee),ae=a(1725),ne=a.n(ae),re=a(604),ie=a.n(re),se=a(1724),oe=a.n(se),le=a(1723),ce=a.n(le),de=a(1733),ue=a.n(de),me=a(1728),pe=a.n(me),fe=a(1729),he=a.n(fe),ve=a(1730),ge=a.n(ve),be=a(1204),ye=a(1207),we=a(1250),xe=a(1280),Ee=a(1218),Oe=a(1352),_e=a(1342),Ce=(a(431),a(691),a(432),a(433),a(1409)),Ne=a(213),je=a(94),ke=a(259),Se=a(436),Ae=a(1499),De=a(1384),Re=a(59),Pe=a(74),Me=a(67),qe=a(41);function Je(e){return d.a.createElement(H.a,Object.assign({elevation:6,variant:"filled"},e))}var Ve=function(){var e=Object(c.useRef)(),t=Object(Pe.b)().sockets,a=Object(c.useCallback)((function(){e.current&&e.current.scrollIntoView()}),[e.current]);return Object(c.useEffect)((function(){return t.default.on("message-sent",a),t.default.on("new-message",a),a(),function(){t.default.off("message-sent",a),t.default.off("new-message",a)}}),[]),d.a.createElement("div",{ref:e})};function Fe(e){var t,a=e.classes,n=e.className,r=(e.layout,e.communication.messaging),i=(e.activeConversation,e.auth),s=e.device.window_size,u=e.apiCallRequest,m=e.theme,p=e.setMessagingCache,f=(e.clearMessagingCache,Object(y.a)(e,["classes","className","layout","communication","activeConversation","auth","device","apiCallRequest","theme","setMessagingCache","clearMessagingCache"]),d.a.createRef()),h=d.a.createRef(),w=Object(Me.h)(),E=Object(Me.g)(),O=Object(Pe.b)(),A=O.definations,R=O.services,M=O.sockets,J=(r.unread_count,r.unread_ids,r.conversations),F=(r.contacts,r.drafts,r.active_conversation),z=r.active_conversation_messages,B=Object(c.useState)(Array.isArray(J)?J:[]),H=Object(b.a)(B,2),X=H[0],G=H[1],$=Object(c.useState)(F),ee=Object(b.a)($,2),ae=(ee[0],ee[1],Object(c.useState)(z)),re=Object(b.a)(ae,2),se=(re[0],re[1],Object(c.useState)({desc:"created_on"})),le=Object(b.a)(se,2),de=le[0],me=(le[1],Object(c.useState)({desc:"created_on"})),fe=Object(b.a)(me,2),ve=fe[0],Fe=fe[1],Ie=Object(c.useState)(!0),ze=Object(b.a)(Ie,2),Le=ze[0],Be=ze[1],Te=Object(c.useState)(!0),Ue=Object(b.a)(Te,2),We=(Ue[0],Ue[1]),He=Object(c.useState)({}),Ye=Object(b.a)(He,2),Xe=Ye[0],Ke=Ye[1],Ge=Object(c.useState)([]),Ze=Object(b.a)(Ge,2),$e=(Ze[0],Ze[1]),Qe=Object(c.useState)(!1),et=Object(b.a)(Qe,2),tt=et[0],at=et[1],nt=Object(c.useState)([]),rt=Object(b.a)(nt,2),it=(rt[0],rt[1]),st=Object(c.useState)(!1),ot=Object(b.a)(st,2),lt=ot[0],ct=ot[1],dt=Object(c.useState)(!1),ut=Object(b.a)(dt,2),mt=ut[0],pt=ut[1],ft=Object(c.useState)({mouseX:null,mouseY:null}),ht=Object(b.a)(ft,2),vt=ht[0],gt=ht[1],bt=Object(c.useState)(!1),yt=Object(b.a)(bt,2),wt=(yt[0],yt[1]),xt=Object(c.useState)(!1),Et=Object(b.a)(xt,2),Ot=Et[0],_t=Et[1],Ct=Object(c.useState)(!0),Nt=Object(b.a)(Ct,2),jt=Nt[0],kt=Nt[1],St=Object(c.useState)(!1),At=Object(b.a)(St,2),Dt=(At[0],At[1],[{icon:d.a.createElement(ie.a,null),name:"image",label:"Image",color:m.palette.error.main},{icon:d.a.createElement(ce.a,null),name:"audio",label:"Audio",color:m.palette.accent.main},{icon:d.a.createElement(oe.a,null),name:"video",label:"Video",color:m.palette.warning.main},{icon:d.a.createElement(ne.a,null),name:"file",label:"File",color:m.palette.info.main}]),Rt=function(){A&&(Be(!0),u(A.conversations.name,{uri:"/inbox",type:"records",params:Object(g.a)(Object(g.a)({},de),{},{p:"1"}),data:{},cache:!1}).then((function(e){Array.isArray(e)&&p("conversations",e),at(!1),Be(!1)})).catch((function(e){console.log("conversations e",e);var t=e;JSON.isJSON(e)&&(t="msg"in e?e.msg:JSON.stringify(e)),at(t),Be(!1)})))},Pt=function(e,t){return function(a){a.preventDefault(),gt({type:e,entry:t,mouseX:a.clientX-2,mouseY:a.clientY-4})}},Mt=function(){gt({mouseX:null,mouseY:null})},qt=function(e){if(e){var t=[];(e=Array.isArray(e)?e:[e]).map((function(e){JSON.isJSON(e)&&"_id"in e?t.push(e._id):String.isEmpty(e)||t.push(e)})),ct(!1);var a=-1;if(J.map((function(e,n){if(-1===a&&"individual"===e.type){var r=e.owner,s=e.recipients[0];JSON.isJSON(e.owner)&&"_id"in e.owner&&(r=e.owner._id),r=r,s=JSON.isJSON(e.recipients[0])&&"_id"in e.recipients[0]?e.recipients[0]._id:e.recipients[0],(r==i.user._id&&t.includes(s)||s===i.user._id&&t.includes(r))&&(a=n)}})),-1!==a){var n=J,r=JSON.parse(JSON.stringify(n[a]));n.remove(a),n.unshift(r),zt(r),p("conversations",n),p("active_conversation_messages",[]),p("active_conversation",r),Ke({is_reply:!1,sender:i.user,reply_for:null,type:"text",content:"",conversation:r._id})}else{var s={recipients:t,participants:e,state:{total:0,unread:0,read:0,last_message:{}},owner:i.user._id,started_by:i.user,type:Array.isArray(e)&&e.length>1?"group":"individual"};p("active_conversation_messages",[]),M.default&&M.default.emit("create-conversation",s)}}},Jt=function(e){var t=e.user,a=e.presence;it((function(e){try{var n=JSON.parse(JSON.stringify(e)),r=t;return JSON.isJSON(t)&&(r=t._id),n.forEach((function(e){r===e._id&&(e.presence=a)})),n}catch(i){return console.error(i),e}})),p("conversations",(function(e){try{var n=JSON.parse(JSON.stringify(e)),r=t;return JSON.isJSON(t)&&(r=t._id),n.forEach((function(e){if("individual"===e.type){var t=e.owner;JSON.isJSON(e.owner)&&(t=e.owner._id),t===r?JSON.isJSON(e.owner)&&(e.owner.presence=a):Array.isArray(e.recipients)&&e.recipients.length>0&&JSON.isJSON(e.recipients[0])&&(e.recipients[0].presence=a)}})),n}catch(i){return console.error(i),e}}))},Vt=function(e){var t=e.conversation,a=e.user;p("conversations",(function(e){try{var n=JSON.parse(JSON.stringify(e)),r=a;JSON.isJSON(a)&&(r=a._id);var s=t;return JSON.isJSON(t)&&(s=t._id),n.forEach((function(e){if(e._id===s){var t=Array.isArray(e.typing)?e.typing:[],n=!1;t.map((function(e){n||e._id!==r||(n=!0)})),n||r===i.user._id||(e.typing=t.concat([a]))}})),n}catch(o){return console.error(o),e}})),p("active_conversation",(function(e){if(!e)return!1;try{var t=JSON.parse(JSON.stringify(e)),n=a;if(JSON.isJSON(a)&&(n=a._id),Array.isArray(t.typing)){var r=Array.isArray(t.typing)?t.typing:[],s=!1;r.map((function(e){s||e._id!==n||(s=!0)})),s||n===i.user._id||(t.typing=r.concat([a]))}else n!==i.user._id&&(t.typing=[a]);return t}catch(o){return console.error(o),e}}))},Ft=function(e){var t=e.conversation,a=e.user;p("conversations",(function(e){try{var n=JSON.parse(JSON.stringify(e)),r=a;JSON.isJSON(a)&&(r=a._id);var i=t;return JSON.isJSON(t)&&(i=t._id),n.forEach((function(e){if(e._id===i){var t=Array.isArray(e.typing)?e.typing:[];e.typing=t.filter((function(e){return e._id!==r})),Array.isArray(e.typing)||(e.typing=[])}})),n}catch(s){return console.error(s),e}})),p("active_conversation",(function(e){if(!e)return!1;var n=a;JSON.isJSON(a)&&(n=a._id);var r=t;if(JSON.isJSON(t)&&(r=t._id),r!==e._id)return e;try{var i=JSON.parse(JSON.stringify(e)),s=Array.isArray(i.typing)?i.typing:[];return i.typing=s.filter((function(e){return e._id!==n})),Array.isArray(i.typing)||(i.typing=[]),i}catch(o){return console.error(o),e}}))},It=function(e){e.conversation;var t=e.messages;wt(!1),p("active_conversation_messages",t)},zt=function(e){e?(wt(!0),p("active_conversation_messages",[]),M.default&&M.default.emit("get-conversation-messages",{conversation:e._id,user:i.user})):wt(!1)},Lt=function(e){at(e)},Bt=function(e){var t=e.message;e.user;p("active_conversation_messages",(function(e){try{var a=JSON.parse(JSON.stringify(e));return Array.isArray(a)&&a.forEach((function(e){e._id===t._id&&(e.state=t.state)})),a}catch(n){return console.error(n),e}}))},Tt=function(e){var t=e.message;e.user;p("active_conversation_messages",(function(e){try{var a=JSON.parse(JSON.stringify(e));return Array.isArray(a)&&a.forEach((function(e){e._id===t._id&&(e.state=t.state)})),a}catch(n){return console.error(n),e}}))},Ut=function(e){var t=e.message;e.user;p("active_conversation_messages",(function(e){try{var a=JSON.parse(JSON.stringify(e));return Array.isArray(a)&&a.forEach((function(e){e._id===t._id&&(e.state=t.state)})),a}catch(n){return console.error(n),e}}))};return Object(c.useEffect)((function(){G(J)}),[J]),Object(c.useEffect)((function(){F&&jt&&(zt(F),kt(!1))}),[F,jt]),Object(c.useEffect)((function(){if(w&&!Ot){var e=new URLSearchParams(w.search).get("with");console.log("location withRecipient",e),String.isEmpty(e)||(-1!==e.indexOf("@")?Fe({email_address:e.trim()}):Fe({_id:e.trim()}),_t(!0))}}),[w,Ot]),Object(c.useEffect)((function(){console.log("contactsQuery",ve)}),[ve]),Object(c.useEffect)((function(){if(Array.isArray(J)){var e=[];J.map((function(t){if("individual"===t.type){var a=t.owner;JSON.isJSON(t.owner)&&(a=t.owner._id),a!==i.user._id?e.push(a):Array.isArray(t.recipients)&&t.recipients.length>0&&(JSON.isJSON(t.recipients[0])?e.push(t.recipients[0]._id):e.push(t.recipients[0]))}})),$e(e)}}),[J]),Object(c.useEffect)((function(){Rt()}),[A,de]),Object(c.useEffect)((function(){if(M.default)return M.default.on("presence-changed",Jt),M.default.on("user-changed-presence",Jt),M.default.on("message-typing-started",Vt),M.default.on("message-typing-stopped",Ft),M.default.on("conversation-messages",It),M.default.on("messages-deleted-for-user",Bt),M.default.on("messages-deleted-for-all",Tt),M.default.on("message-marked-as-received",Ut),M.default.on("message-received",Ut),M.default.on("message-marked-as-read",Ut),M.default.on("message-read",Ut),M.default.on("delete-conversation-for-user-error",Lt),M.default.on("delete-message-for-user-error",Lt),M.default.on("delete-message-for-all-error",Lt),function(){M.default.off("presence-changed",Jt),M.default.off("user-changed-presence",Jt),M.default.off("message-typing-started",Vt),M.default.off("message-typing-stopped",Ft),M.default.off("conversation-messages",It),M.default.off("messages-deleted-for-user",Bt),M.default.off("messages-deleted-for-all",Tt),M.default.off("delete-conversation-for-user-error",Lt),M.default.off("message-marked-as-received",Ut),M.default.off("message-received",Ut),M.default.off("message-marked-as-read",Ut),M.default.off("message-read",Ut),M.default.off("delete-message-for-user-error",Lt),M.default.off("delete-message-for-all-error",Lt),M.default.off("create-conversation-error",Lt)}}),[M]),d.a.createElement(Ne.a,{className:x()((t={"p-0 m-0 relative":!0},Object(v.a)(t,a.root,!0),Object(v.a)(t,n,!0),t))},d.a.createElement(C.a,{position:"absolute",color:"transparent",className:a.mainAppBar},d.a.createElement(N.a,null,F&&d.a.createElement(je.a,{onClick:function(){E&&Ot&&E.push(E.location.pathname),p("active_conversation_messages",[]),p("active_conversation",!1)},className:"mr-2",edge:"start",color:"inherit","aria-label":"back-to-conversations"},d.a.createElement(D.a,null)),F&&("individual"==F.type?i.user._id!==F.owner._id&&i.user._id!==F.owner||!F.participants[0].avatar?F.started_by.avatar?d.a.createElement(Ee.a,{className:"mr-6 w-6 h-6",src:qe.attachments.getAttachmentFileUrl(F.started_by.avatar)}):d.a.createElement(Ee.a,{className:"mr-2 w-6 h-6 bg-transparent accent-text"},d.a.createElement(P.a,null)):d.a.createElement(Ee.a,{className:"mr-6 w-6 h-6",src:qe.attachments.getAttachmentFileUrl(F.participants[0].avatar)}):F.group_avatar?d.a.createElement(Ee.a,{className:"mr-6",src:qe.attachments.getAttachmentFileUrl(F.group_avatar)}):d.a.createElement(Ee.a,{className:"mr-6 w-6 h-6 bg-transparent accent-text"}," ","group"===F.type?d.a.createElement(q.a,null):d.a.createElement(P.a,null))),F&&d.a.createElement(S.a,{variant:"h6",className:"capitalize flex-grow"},"individual"==F.type?i.user._id===F.owner._id||i.user._id===F.owner?F.participants[0].first_name+" "+F.participants[0].last_name:F.started_by.first_name+" "+F.started_by.last_name:"group"==F.type?F.group_name:"Realfield"),!F&&d.a.createElement(S.a,{variant:"h6",className:"capitalize flex-grow"},"Conversations"),!F&&!lt&&d.a.createElement(je.a,{onClick:function(){return ct(!0)},className:"mr-2",edge:"end",color:"inherit","aria-label":"Contacts"},d.a.createElement(V.a,null)))),d.a.createElement(Oe.a,{className:x()(Object(v.a)({},a.drawer,!0)),variant:s.width>=768?"persistent":"temporary",anchor:"right",open:lt,onClose:function(){return ct(!1)},onOpen:function(){return ct(!0)},classes:{paper:s.width>=768?a.drawerPaper:a.temporaryDrawerPaper}},d.a.createElement("div",{className:"w-full flex flex-row items-center h-16 secondary"},d.a.createElement(je.a,{className:"mx-2",color:"inherit"},d.a.createElement(V.a,null)),d.a.createElement(S.a,{variant:"h6",className:"capitalize flex-grow"},"Contacts"),d.a.createElement(je.a,{className:"mx-2",color:"inherit",onClick:function(){return ct(!1)}},"ltr"===m.direction?d.a.createElement(L.a,null):d.a.createElement(I.a,null))),d.a.createElement(U.a,null),d.a.createElement(ke.a,{className:a.bodyWrapper},A&&d.a.createElement(De.a,{show_actions:!1,show_links:!1,showViewOptions:!1,showAddBtn:!1,cache_data:!1,showPagination:!0,showSorter:!0,defination:A.users,service:R.users,query:ve,view:"listview",onClickEntry:function(e){return qt(e)},onLoadData:function(e,t){Ot&&Array.isArray(e)&&e.map((function(a){a._id!==t._id&&a.email_address!==t.email_address||(qt(a),console.log("onLoadData",e,t))}))}}))),!F&&d.a.createElement(l.a,{md:12,className:"flex flex-col relative min-h-full p-0"},d.a.createElement(Ne.a,{square:!0,className:a.paper},d.a.createElement(ke.a,{className:a.bodyWrapper},Le&&(!Array.isArray(J)||Array.isArray(J)&&0===J.length)&&d.a.createElement(o.a,null,d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:80,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-3/6"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:110,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-8/12"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:80,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-4/12"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:90,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-3/6"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:70,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-10/12"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:80,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-9/12"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:120,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-4/5"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:100,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-3/6"}))),d.a.createElement(l.a,{md:12,className:"flex flex-row items-center relative p-0 px-4 my-4"},d.a.createElement(Ce.a,{variant:"circle",width:40,height:40}),d.a.createElement("div",{className:"flex-grow mx-2 flex flex-col"},d.a.createElement(Ce.a,{variant:"text",width:80,className:"mb-1"}),d.a.createElement(Ce.a,{variant:"text",className:"w-11/12"})))),!Le&&(!Array.isArray(J)||Array.isArray(J)&&0===X.length)&&d.a.createElement(o.a,null,d.a.createElement(l.a,{md:12,className:"flex flex-col items-center relative p-0 px-4 my-4"},d.a.createElement(S.a,{variant:"subtitle1",color:"textSecondary",className:"mx-0 my-12 h-20 w-20 md:w-40  md:h-40 rounded-full text-4xl md:text-6xl flex flex-row items-center justify-center",style:{color:m.palette.text.disabled,background:m.palette.background.default}},d.a.createElement(Z.a,{fontSize:"inherit"})),d.a.createElement(S.a,{variant:"body2",color:"textSecondary",className:"mx-0",style:{color:m.palette.text.disabled}},"You don't have any active conversations yet"))),Array.isArray(J)&&!Le&&d.a.createElement(be.a,{className:a.list},J.map((function(e,t){if(0===t||t>0&&J[t-1]._id!==J[t]._id){var n="",r=!1,s=!1,o=!1,l=!1,c=!1;if(e.state.total>0&&e.state.last_message&&(o=e.state.last_message.content,e.state.last_message.sender===i.user._id?c="You":e.owner===e.state.last_message.sender?c=e.started_by.first_name:Array.isArray(e.participants)&&e.participants.map((function(t){t._id===e.state.last_message.sender&&(c=t.first_name)})),("deleted-for-sender"!==e.state.last_message.state||e.state.last_message.sender._id!==i.user._id&&e.state.last_message.sender!==i.user._id)&&"deleted-for-all"!==e.state.last_message.state||(l=!0)),"individual"==e.type){var u=e.owner;JSON.isJSON(e.owner)&&(u=e.owner._id),i.user._id===u?Array.isArray(e.participants)&&e.participants.length>0&&(r=e.participants[0],n=e.participants[0].first_name+" "+e.participants[0].last_name,s=e.participants[0].avatar):(r=e.started_by,n=e.started_by.first_name+" "+e.started_by.last_name,s=e.started_by.avatar)}else"group"==e.type&&(n=e.group_name,s=e.group_avatar);return d.a.createElement(ye.a,{className:"px-8 content-between",onClick:function(t){p("active_conversation_messages",[]),p("active_conversation",e),zt(e)},onContextMenu:Pt("conversation",e),key:"chat-"+t,style:{background:"conversation"===vt.type&&vt.entry._id===e._id?m.palette.background.default:"transparent"},button:!0},r&&d.a.createElement(xe.a,null,d.a.createElement(_.a,{variant:"dot",badgeContent:" ",anchorOrigin:{vertical:"bottom",horizontal:"right"},classes:{dot:"online"===r.presence?"bg-green-600":"away"==r.presence?"bg-orange-500":"bg-gray-500"}},r.avatar&&d.a.createElement(Ee.a,{className:a.contactAvatar,src:qe.attachments.getAttachmentFileUrl(r.avatar)}),!r.avatar&&d.a.createElement(Ee.a,{className:a.contactAvatar},d.a.createElement(P.a,null)))),!r&&d.a.createElement(xe.a,null,s&&d.a.createElement(Ee.a,{src:qe.attachments.getAttachmentFileUrl(s)}),!s&&d.a.createElement(Ee.a,{className:a.iconAvatar},"group"===e.type?d.a.createElement(q.a,null):d.a.createElement(P.a,null))),d.a.createElement(we.a,{className:"flex flex-col justify-center",primary:d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:"capitalize font-bold"},n),secondary:d.a.createElement("div",{className:"w-full flex flex-row"},Array.isArray(e.typing)&&d.a.createElement(S.a,{variant:"body2",color:"primary",className:"mx-0"},e.typing.length>1?e.typing.length+" people are typing...":1===e.typing.length?e.typing[0].first_name+" is typing...":""),(!Array.isArray(e.typing)||0===e.typing.length)&&d.a.createElement("div",{className:"flex flex-row items-center flex-grow"},d.a.createElement(S.a,{variant:"body2",color:"textPrimary",className:"font-bold mr-2"},c||""),d.a.createElement(S.a,{variant:"body2",color:"textSecondary",className:"flex-grow truncate mr-2 font-normal"},o||"No messages yet"),l&&d.a.createElement("div",{className:"flex flex-row items-center w-full",style:{color:m.palette.divider}},d.a.createElement(S.a,{variant:"body1",color:"inherit",className:"flex-grow"},"Message deleted"),d.a.createElement(pe.a,{className:"mx-2 text-xs",fontSize:"small"})),!l&&d.a.createElement("div",{className:"flex flex-row items-center w-full",style:{color:m.palette.text.disabled}},"sent"===e.state.last_message.state&&e.state.last_message.sender===i.user._id&&d.a.createElement(he.a,{className:"mx-1 text-xs",fontSize:"small"}),("partially-received"===e.state.last_message.state||"received"===e.state.last_message.state)&&e.state.last_message.sender===i.user._id&&d.a.createElement(ge.a,{className:"mx-1 text-xs",fontSize:"small"}),("partially-read"===e.state.last_message.state||"read"===e.state.last_message.state)&&e.state.last_message.sender===i.user._id&&d.a.createElement(ge.a,{className:"mx-1 text-xs",color:"secondary",fontSize:"small"}))),(!Array.isArray(e.typing)||0===e.typing.length)&&d.a.createElement(S.a,{variant:"body2",color:"secondary",className:"mx-2"}))}),e.state.incoming_unread>0&&d.a.createElement(Y.a,null,d.a.createElement(Ee.a,{className:"bg-transparent primary-text h-4 w-4 text-xs"},e.state.incoming_unread)))}}))))),d.a.createElement(C.a,{position:"absolute",color:"secondary",className:a.chatsAppBar},d.a.createElement(N.a,null,d.a.createElement(je.a,{edge:"start",color:"inherit","aria-label":"Refresh",onClick:function(){Rt(),A&&(We(!0),u("contacts",{uri:"/contacts",type:"records",params:{p:"1"},data:{},cache:!1}).then((function(e){Array.isArray(e)&&(p("contacts",e),it(e)),at(!1),We(!1)})).catch((function(e){console.log("contacts e",e);var t=e;JSON.isJSON(e)&&(t="msg"in e?e.msg:JSON.stringify(e)),at(t),We(!1)})))}},d.a.createElement(Q.a,null)),d.a.createElement(_e.a,{color:"primary","aria-label":"add",className:a.fabButton,onClick:function(){return ct(!lt)}},!lt&&d.a.createElement(K.a,null),lt&&d.a.createElement(te.a,null)),d.a.createElement("div",{className:a.grow})))),F&&d.a.createElement(Ne.a,{square:!0,elevation:0,className:a.chatPaperWrapper},d.a.createElement(l.a,{md:12,className:"h-full p-0 flex flex-col relative"},!["audio","file","video","image"].includes(Xe.type)&&d.a.createElement(ke.a,{className:"flex-grow "+a.chatScrollWrapper,style:{flex:10,backgroundColor:m.palette.background.default},scrollToBottomOnChildChange:!1,ref:h},d.a.createElement(o.a,{className:"px-4"},z.map((function(e,t){var n=!1,r=!0;if(t>0&&(z[t]._id===z[t-1]._id||e.conversation._id!==F._id&&e.conversation!==F._id)&&(r=!1),e&&r)return("deleted-for-sender"===e.state&&e.sender._id===i.user._id||"deleted-for-all"===e.state)&&(n=!0),d.a.createElement(l.a,{xs:12,className:"flex p-0 py-1 "+(e.sender._id===i.user._id||e.sender===i.user._id?"flex-row-reverse":"flex-row"),id:"message-"+e._id,key:"conversation-"+F._id+"-message-"+t},d.a.createElement(Ae.a,{className:"p-2 mx-4  flex flex-col px-4 "+(e.sender._id===i.user._id||e.sender===i.user._id?"bg-green-200 "+a.chatBubbleLocal:"bg-white "+a.chatBubbleExternal),onViewportVisibilityChange:function(t){t&&M.default&&e.sender._id!==i.user._id&&e.sender!==i.user._id&&("sent"===e.state?M.default.emit("mark-message-as-received",{message:e,user:i.user}):"received"!==e.state&&"partially-received"!==e.state||M.default.emit("mark-message-as-read",{message:e,user:i.user}))}},!n&&d.a.createElement("div",{className:"individual"!==F.type?"flex flex-row w-full items-center":"flex flex-row-reverse w-full items-center"},"individual"!==F.type&&JSON.isJSON(e.sender)&&d.a.createElement(S.a,{variant:"body1",className:"flex-grow text-gray-500 font-bold"},e.sender.first_name+" "+e.sender.last_name),d.a.createElement(je.a,{"aria-label":"Toggle Menu",onClick:Pt("message",e),className:"",size:"small"},d.a.createElement(T.a,{fontSize:"inherit"}))),!n&&["audio","file","video","image"].includes(e.type)&&Array.isArray(e.attachments)&&d.a.createElement("div",{className:"flex flex-col items-center cursor-pointer mb-2"},e.attachments.map((function(t){return d.a.createElement("div",{className:"p-2 w-11/12 border border-gray-400 rounded"},"image"===e.type&&d.a.createElement(Se.a,{className:"w-full h-auto",src:qe.attachments.getAttachmentFileUrl(t),alt:t.name,onClick:function(e){e.preventDefault(),window.open(qe.attachments.getAttachmentFileUrl(t),"_blank").focus()}}),"audio"===e.type&&d.a.createElement("div",{className:"w-full h-auto flex flex-row items-center",onClick:function(e){e.preventDefault(),window.open(qe.attachments.getAttachmentFileUrl(t),"_blank").focus()}},d.a.createElement(ce.a,{className:"text-2xl"}),d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:"flex-grow truncate"},t.name)),"video"===e.type&&d.a.createElement("div",{className:"w-full h-auto flex flex-row items-center",onClick:function(e){e.preventDefault(),window.open(qe.attachments.getAttachmentFileUrl(t),"_blank").focus()}},d.a.createElement(oe.a,{className:"text-2xl"}),d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:"flex-grow truncate"},t.name)),"file"===e.type&&d.a.createElement("div",{className:"w-full h-auto flex flex-row items-center",onClick:function(e){e.preventDefault(),window.open(qe.attachments.getAttachmentFileUrl(t),"_blank").focus()}},d.a.createElement(ne.a,{className:"text-2xl"}),d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:"flex-grow truncate"},t.name)))}))),!n&&d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:"flex-grow",paragraph:!0},e.content),n&&d.a.createElement("div",{className:"flex flex-row items-center w-full",style:{color:m.palette.divider}},d.a.createElement(S.a,{variant:"body1",color:"inherit",className:"flex-grow"},"Message deleted"),d.a.createElement(pe.a,{className:"mx-2",fontSize:"small"})),!n&&d.a.createElement("div",{className:"flex flex-row items-center w-full",style:{color:m.palette.text.disabled}},e.created_on&&d.a.createElement(S.a,{variant:"body2",className:"text-xs flex-grow"},e.created_on instanceof Date?e.created_on.toLocaleString():new Date(e.created_on).toLocaleString()),"sent"===e.state&&(e.sender._id===i.user._id||e.sender===i.user._id)&&d.a.createElement(he.a,{className:"mx-2",fontSize:"small"}),("partially-received"===e.state||"received"===e.state)&&(e.sender._id===i.user._id||e.sender===i.user._id)&&d.a.createElement(ge.a,{className:"mx-2",fontSize:"small"}),("partially-read"===e.state||"read"===e.state)&&(e.sender._id===i.user._id||e.sender===i.user._id)&&d.a.createElement(ge.a,{className:"mx-2",color:"secondary",fontSize:"small"}))))})),!!Array.isArray(F.typing)&&F.typing.length>0&&d.a.createElement(l.a,{xs:12,className:"flex p-0 py-1 flex-row"},d.a.createElement("div",{className:a.avatar}," "),d.a.createElement("div",{className:"p-2 mx-4  flex flex-col px-4  rounded-full"},d.a.createElement("div",{className:a.typing_loader}))),d.a.createElement(Ve,null))),d.a.createElement(o.a,{className:["audio","file","video","image"].includes(Xe.type)?"flex-grow flex flex-col":a.chatInputsWrapper,style:{backgroundColor:m.palette.background.paper,top:["audio","file","video","image"].includes(Xe.type)?0:"auto"}},Xe.reply_for&&d.a.createElement(l.a,{xs:12,className:"flex flex-row items-center bg-green-200"},d.a.createElement("div",{className:"p-2 mx-4"},d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:"font-bold"},Xe.reply_for.sender.first_name+" "+Xe.reply_for.sender.last_name),d.a.createElement(S.a,{variant:"body1",color:"textPrimary",className:""},Xe.reply_for.content))),["audio","file","video","image"].includes(Xe.type)&&d.a.createElement(l.a,{xs:12,className:"flex flex-grow flex-row items-center bg-grey-200"},d.a.createElement(Re.e,{variant:"outlined",value:["audio","file","video","image"].includes(Xe.type)&&Array.isArray(Xe.attachments)&&Xe.attachments>0?Xe.attachments[0]:void 0,onChange:function(e){Ke((function(t){try{var a=JSON.parse(JSON.stringify(t));return e?a.attachments=[e]:delete a.attachments,a}catch(n){return console.error(n),t}})),console.log("FileInput newValue ",e)},filesLimit:1,acceptedFiles:"file"===Xe.type?["image/*","video/*","audio/*","application/*"]:[Xe.type+"/*"]})),mt&&d.a.createElement(l.a,{xs:12,className:"flex flex-row items-center justify-evenly bg-grey-200"},Dt.map((function(e){return d.a.createElement(_e.a,{key:e.name,color:e.color,"aria-label":"Attach "+e.label,onClick:function(){var t;pt(!1),t=e.name,Ke((function(e){try{var a=JSON.parse(JSON.stringify(e));return a.type=t,a}catch(n){return console.error(n),e}}))},style:{background:e.color,color:m.palette.background.paper},className:"mx-2"},e.icon)}))),d.a.createElement(l.a,{xs:12,className:"flex flex-row items-center"},d.a.createElement(je.a,{onClick:function(e){pt(!mt)},"aria-label":mt?["audio","file","video","image"].includes(Xe.type)&&Array.isArray(Xe.attachments)&&Xe.attachments>0?"Remove Attachments":"Dismiss File Attachment":"Close File Attachment",className:"mx-2"},mt?["audio","file","video","image"].includes(Xe.type)&&Array.isArray(Xe.attachments)&&Xe.attachments>0?d.a.createElement(ue.a,{color:"inherit"}):d.a.createElement(te.a,{color:"inherit"}):d.a.createElement(ne.a,{color:"inherit"})),d.a.createElement("div",{className:"flex-grow rounded-full mx-8"},d.a.createElement(Re.m,{variant:["audio","file","video","image"].includes(Xe.type)?"standard":"outlined",multiline:!0,rows:2,onBlur:function(e,t){F._id&&!String.isEmpty(e)&&Ke((function(t){try{var a={content:e,conversation:F._id};return JSON.isJSON(t)&&((a=JSON.parse(JSON.stringify(t))).content=e,a.conversation=F._id),a}catch(n){return console.error(n),t}})),F._id&&M.default&&M.default.emit("stopped-typing-message",{conversation:F._id,user:i.user})},onFocus:function(){F._id&&M.default&&M.default.emit("started-typing-message",{conversation:F._id,user:i.user})},defaultValue:F._id===Xe.conversation?Xe.content:void 0,onChange:function(e){},placeholder:"Type your message here...",inputRef:f,inputProps:{onKeyDown:function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;t=String.isString(t)?t.trim():"",String.isEmpty(t)||(M.default.emit("stopped-typing-message",{conversation:F._id,user:i.user}),function(e){if(F){var t=Object(g.a)(Object(g.a)({},Xe),{},{sender:i.user,created_on:new Date});e&&(JSON.isJSON(e)?t=JSON.merge(e,t):String.isString(e)&&(t.content=e.trim())),(!String.isEmpty(t.content)||["audio","file","video","image"].includes(t.type)&&Array.isArray(t.attachments)&&t.attachments.length>0)&&(M.default.emit("send-message",{message:t,conversation:F,user:i.user}),f.current&&(f.current.value="",f.current.focus()),Ke({is_reply:!1,sender:i.user,reply_for:null,type:"text",content:"",conversation:F._id}))}}(t))}}}})))))),d.a.createElement(j.a,{keepMounted:!0,open:null!==vt.mouseY,onClose:Mt,anchorReference:"anchorPosition",anchorPosition:null!==vt.mouseY&&null!==vt.mouseX?{top:vt.mouseY,left:vt.mouseX}:void 0},"conversation"===vt.type&&d.a.createElement(k.a,{onClick:function(e){p("active_conversation",vt.entry),Mt()}},"Open Conversation"),"conversation"===vt.type&&d.a.createElement(k.a,{onClick:function(e){var t;t=vt.entry,p("conversations",(function(e){try{var a=JSON.parse(JSON.stringify(e));return a=a.filter((function(e){return!t||(JSON.isJSON(t)?e._id!==t._id:e._id!==t)}))}catch(n){return console.error(n),e}})),M.default.emit("archive-conversation",{conversation:t,user:i.user}),Mt()}},"Archive Conversation"),"conversation"===vt.type&&d.a.createElement(k.a,{onClick:function(e){var t;t=vt.entry,p("conversations",(function(e){try{var a=JSON.parse(JSON.stringify(e));return a=a.filter((function(e){return!t||(JSON.isJSON(t)?e._id!==t._id:e._id!==t)}))}catch(n){return console.error(n),e}})),M.default.emit("delete-conversation-for-user",{conversation:t,user:i.user}),Mt()}},"Delete Conversation"),"message"===vt.type&&vt.entry.sender._id!==i.user._id&&vt.entry.sender!==i.user._id&&d.a.createElement(k.a,{onClick:function(e){Mt(),Ke({is_reply:!0,sender:i.user,reply_for:vt.entry,content:"",conversation:F._id}),f.current&&(f.current.value="",f.current.focus())}},"Reply Message"),"message"===vt.type&&(vt.entry.sender._id===i.user._id||vt.entry.sender===i.user._id)&&d.a.createElement(k.a,{onClick:function(e){Mt(),M.default&&M.default.emit("delete-message-for-user",{message:vt.entry,user:i.user})}},"Delete For Me"),"message"===vt.type&&(vt.entry.sender._id===i.user._id||vt.entry.sender===i.user._id)&&d.a.createElement(k.a,{onClick:function(e){Mt(),M.default&&M.default.emit("delete-message-for-all",{message:vt.entry,user:i.user})}},"Delete For All")),tt&&d.a.createElement(W.a,{open:Boolean(tt),autoHideDuration:1e4,onClose:function(){return at(!1)}},d.a.createElement(Je,{onClose:function(){return at(!1)},severity:"error"},tt)))}Fe.defaultProps={layout:"full",firstView:"conversations",activeConversation:void 0};var Ie=p()(O()((function(e){return{root:{padding:"0",height:"calc(100vh - "+e.spacing(12)+"px)",maxHeight:"100vh",display:"flex",flexDirection:"column",overflowX:"hidden"},text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:e.spacing(7),marginTop:e.spacing(8),flexGrow:1,height:"calc(100% - "+e.spacing(8)+"px)",minHeight:"calc(100% - "+e.spacing(8)+"px)",overflowX:"hidden"},chatPaperWrapper:{position:"relative",marginTop:e.spacing(8),flexGrow:1,height:"calc(100% - "+e.spacing(8)+"px)",minHeight:"calc(100% - "+e.spacing(8)+"px)",overflow:"hidden",padding:0,backgroundColor:e.palette.background.default,background:e.palette.background.default},bodyWrapper:{overflowY:"scroll",overflowX:"hidden",height:"calc(100% - "+e.spacing(4)+"px)"},scrollWrapper:{overflowY:"scroll",overflowX:"hidden"},chatScrollWrapper:{overflowY:"scroll",overflowX:"hidden",top:0,bottom:"auto",height:"80% !important"},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},iconAvatar:{backgroundColor:e.palette.background.default,color:e.palette.accent.main},contactAvatar:{backgroundColor:e.palette.background.paper,color:e.palette.accent.main},avatar:{backgroundColor:e.palette.action.hover,color:e.palette.text.primary,width:e.spacing(5),height:e.spacing(5),borderRadius:e.spacing(2.5)},chatsAppBar:{top:"auto",bottom:0,color:e.palette.background.paper},mainAppBar:{top:0,bottom:"auto",color:e.palette.text.primary,boxShadow:"none"},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto",background:e.palette.accent.main,color:e.palette.background.paper},drawer:{width:e.appDrawer.width,flexShrink:0},drawerPaper:{width:e.appDrawer.width,position:"absolute",zIndex:e.zIndex.appBar+2,backgroundColor:e.palette.background.default},temporaryDrawerPaper:{width:e.appDrawer.width,background:e.palette.background.default},content:{flexGrow:1,padding:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentDrawerMargin:{marginRight:-e.appDrawer.width},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},chatInputsWrapper:{minHeight:"20% !important",padding:0,paddingTop:e.spacing(2),paddingBottom:e.spacing(2),background:e.palette.background.paper,color:e.palette.text.primary},chatBubbleLocal:{maxWidth:"40%",background:e.palette.primary.light,borderBottomRightRadius:"1.5rem",borderBottomLeftRadius:"1.5rem",borderTopRightRadius:0,borderTopLeftRadius:"1.5rem"},chatBubbleExternal:{background:e.palette.background.paper,borderBottomRightRadius:"1.5rem",borderBottomLeftRadius:"1.5rem",borderTopRightRadius:"1.5rem",borderTopLeftRadius:0},chatBubbleLocalSequential:{borderBottomRightRadius:"1.5rem",borderBottomLeftRadius:"1.5rem",borderTopRightRadius:"1.5rem",borderTopLeftRadius:"1.5rem"},"@keyframes typing_loader_line":{"0%":{backgroundColor:e.palette.action.active,boxShadow:"12px 0px 0px 0px rgba(0,0,0,0.2),  24px 0px 0px 0px rgba(0,0,0,0.2)"},"25%":{backgroundColor:e.palette.action.hover,boxShadow:"12px 0px 0px 0px rgba(0,0,0,2), 24px 0px 0px 0px rgba(0,0,0,0.2)"},"75%":{backgroundColor:e.palette.text.disabled,boxShadow:"12px 0px 0px 0px rgba(0,0,0,0.2), 24px 0px 0px 0px rgba(0,0,0,2)"}},typing_loader:{margin:e.spacing(),width:e.spacing(),height:e.spacing(),borderRadius:e.spacing(.5),backgroundColor:"rgba(0,0,0, 1)",webkitAnimation:"$typing_loader_line 1s linear infinite alternate",mozAnimation:"$typing_loader_line 1s linear infinite alternate",animation:"$typing_loader_line 1s linear infinite alternate"}}})),Object(u.b)((function(e){return{auth:e.auth,communication:e.communication,device:e.device}}),{apiCallRequest:h.gb,setMessagingCache:h.Qb,clearMessagingCache:h.nb}),f.a)(Fe),ze=a(50),Le=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,a=e.appendNavHistory,n=e.theme;a&&t&&a({name:"messages",uri:t.pathname,title:"Messages",view:null,color:n.palette.primary,scrollTop:0})}},{key:"render",value:function(){this.props.classes;return d.a.createElement(o.a,{className:"m-0 p-0"},d.a.createElement(l.a,{xs:12},d.a.createElement(Ie,null)))}}]),a}(c.Component);t.default=Object(ze.a)(p()(Object(u.b)((function(e){return{auth:e.auth}}),{appendNavHistory:h.hb}),f.a)(Le))}}]);
//# sourceMappingURL=10.4d22ca81.chunk.js.map