(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[11],{1483:function(e,t,a){"use strict";a.r(t);var s=a(9),i=a(11),n=a(30),c=a(19),l=a(20),r=a(516),o=a(262),d=a.n(o),m=a(255),h=a.n(m),j=a(57),x=a(10),b=a(7),O=a(1),u=a.n(O),v=a(2),p=a(413),f=a(176),g=a(162),N=a(35),w=a(0),y=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var i;Object(s.a)(this,a),(i=t.call(this,e)).state={retailitems:[],loading:!0,load_err:!1},i.handleOnItemSelect=function(e){return function(t){var a=i.props.onItemSelect;Function.isFunction(a)&&a(e,t)}};var c=i.props.params;return i.state.params={p:1},JSON.isJSON(c)&&(i.state.params=Object(v.a)(Object(v.a)({},c),{},{p:1})),i.handleOnItemSelect=i.handleOnItemSelect.bind(Object(n.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"componentDidUpdate",value:function(e,t,a){var s=this,i=this.props.params,n={p:1};JSON.isJSON(i)&&(n=Object(v.a)(Object(v.a)({},i),{},{p:1}),Object.areEqual(this.state.params,n)||this.setState({params:i},(function(){s.loadItems()})))}},{key:"loadItems",value:function(){var e=this,t=this.state.params;this.setState((function(e){return{loading:!0,load_err:null}})),N.a.get("retail/items",t).then((function(t){e.setState((function(e){return{retailitems:t.body.data,loading:!1,load_err:null}}))})).catch((function(t){e.setState((function(e){return{retailitems:[],loading:!1,load_err:t}}))}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(x.a,{className:"p-0 m-0",children:[this.state.loading&&Object(w.jsxs)(x.a,{className:"flex-10",children:[Object(w.jsx)(b.a,{xs:12,md:6,lg:4,children:Object(w.jsxs)("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden",children:[Object(w.jsx)(p.a,{variant:"rect",width:"100%",height:224}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(w.jsx)(p.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),Object(w.jsx)(p.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})]})}),Object(w.jsx)(b.a,{xs:12,md:6,lg:4,children:Object(w.jsxs)("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden",children:[Object(w.jsx)(p.a,{variant:"rect",width:"100%",height:224}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(w.jsx)(p.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),Object(w.jsx)(p.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})]})}),Object(w.jsx)(b.a,{xs:12,md:6,lg:4,children:Object(w.jsxs)("div",{className:"bg-white shadow-xl rounded-lg flex flex-col overflow-hidden",children:[Object(w.jsx)(p.a,{variant:"rect",width:"100%",height:224}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(w.jsx)(p.a,{variant:"rect",width:"30%",height:50,className:"mt-2 ml-4"}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-2 mx-auto"}),Object(w.jsx)(p.a,{variant:"text",width:"95%",className:"mt-6 mx-auto"}),Object(w.jsx)(p.a,{variant:"rect",width:"80%",height:34,className:"mt-8 mb-6 mx-auto rounded"})]})})]}),!this.state.loading&&Array.isArray(this.state.retailitems)&&Object(w.jsx)(g.a,{className:"flex-10 overflow-x-hidden overflow-y-scroll",children:Object(w.jsx)(x.a,{className:"p-4 m-0",children:this.state.retailitems.map((function(t,a){return t.available&&Object(w.jsx)(b.a,{xs:12,md:6,lg:4,className:"flex flex-col",children:Object(w.jsxs)("div",{className:"bg-white shadow-xl rounded-lg overflow-hidden",children:[Object(w.jsx)("div",{className:"bg-cover bg-center h-56 p-0",children:Object(w.jsx)(f.a,{className:"w-full h-full",src:t.featured_image?N.a.getAttachmentFileUrl(t.featured_image):"https://realfield.nyc3.cdn.digitaloceanspaces.com/public/img/realfield/logo-chevron.svg"})}),Object(w.jsxs)("div",{className:"p-4",children:[Object(w.jsx)("p",{className:"uppercase truncate tracking-wide text-sm  text-gray-900",children:t.name}),t.cost>0&&JSON.isJSON(t.currency)&&Object(w.jsx)("p",{className:"text-3xl text-gray-900 my-4",children:t.currency.html_symbol+" "+t.cost}),Object(w.jsx)("p",{className:"truncate tracking-wide text-sm  text-gray-500",children:t.description?t.description:"No description available"})]}),Object(w.jsxs)("div",{className:"flex p-4 border-t border-gray-300 text-gray-700",children:[Object(w.jsx)("div",{className:"flex-1 inline-flex items-center",children:Object(w.jsx)("p",{className:" text-gray-900 font-bold",children:"Type"})}),Object(w.jsx)("div",{className:"flex-1 inline-flex items-left",children:Object(w.jsx)("p",{className:"capitalize",children:t.item_type})})]}),Object(w.jsx)("div",{className:"px-4 pt-3 pb-4 border-t border-gray-300 bg-gray-100",children:Object(w.jsx)(j.a,{className:"w-full",color:"primary",onClick:e.handleOnItemSelect(t),children:"View"})})]})},t._id)}))})})]})}}]),a}(u.a.Component),S=a(14),_=a(6),C=a(1430),k=a(82),A=a(26),J=["name"],I=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var i;Object(s.a)(this,a),(i=t.call(this,e)).state={item:{},options:{},options_cost:0,selected_image:null,loading:!0,load_err:!1,canAddToCart:!1,variantsError:!1},i.handleOnItemAdd=function(e){var t=i.props.onItemAdd,a=i.state,s=a.item,n=a.options,c=a.options_cost;Function.isFunction(t)&&t({item:s,options:n,options_cost:c})},i.handleOnVariantsChange=function(e){return function(e){var t={};if(JSON.isJSON(e))for(var a=0,s=Object.entries(e);a<s.length;a++){var n=Object(_.a)(s[a],2),c=n[0],l=n[1];t[c]=l}i.calculateOptionsPrice(t),i.canAddToCart(t),i.setState({options:t})}},i.handleOnImageSelect=function(e){return function(t){i.setState({selected_image:e})}};var c=i.props,l=c.item,r=c.options;return i.state.item=l,i.state.options=JSON.isJSON(r)?r:{},i.state.selected_image=l.featured_image?N.a.getAttachmentFileUrl(l.featured_image):null,i.handleOnItemAdd=i.handleOnItemAdd.bind(Object(n.a)(i)),i.handleOnImageSelect=i.handleOnImageSelect.bind(Object(n.a)(i)),i.handleOnVariantsChange=i.handleOnVariantsChange.bind(Object(n.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.calculateOptionsPrice(),this.canAddToCart()}},{key:"componentDidUpdate",value:function(e,t,a){var s=this.props.item,i=e.item;Object.areEqual(s,i)||this.setState({item:s})}},{key:"calculateOptionsPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item,a=t.variants,s=t.cost;JSON.isJSON(e)||(e=this.state.options);var i=0;if(JSON.isJSON(a))for(var n=0,c=Object.values(a);n<c.length;n++){var l=c[n],r=l.name,o=Object(S.a)(l,J);if(e[r])if("amount"==o.cost_effect_type)i+=Number.parseNumber(o.cost_effect,0);else if("percentage"==o.cost_effect_type){var d=Number.parseNumber(s,0)*Number.parseNumber(o.cost_effect,0)/100;i+=d}}this.setState({options_cost:i})}},{key:"canAddToCart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.item.variants;JSON.isJSON(e)||(e=this.state.options);var a=!0,s=!1;if(JSON.isJSON(t))for(var i=0,n=Object.entries(t);i<n.length;i++){var c=Object(_.a)(n[i],2),l=(c[0],c[1]);if(l.required&&(!(l.name in e)||!e[l.name])){a=!1,s=l.label+" is required ";break}}this.setState({canAddToCart:a,variantsError:s})}},{key:"render",value:function(){var e=this,t=this.state,a=t.item,s=t.options_cost;return Object(w.jsxs)(x.a,{className:"p-0 m-0",children:[Object(w.jsx)(b.a,{xs:12,md:4,className:"p-0 m-0",children:Object(w.jsxs)(x.a,{className:"p-0 m-0",children:[Object(w.jsx)(b.a,{xs:12,children:Object(w.jsx)(A.a,{variant:"h3",gutterBottom:!0,children:a.name})}),a.cost>0&&JSON.isJSON(a.currency)&&Object(w.jsxs)(b.a,{xs:12,children:[Object(w.jsx)("span",{className:"text-2xl text-gray-500",children:a.currency.html_symbol}),Object(w.jsx)("span",{className:"text-3xl text-gray-900",children:(a.cost>0?a.cost:0)+s})]}),Object(w.jsxs)(b.a,{xs:12,children:[Object(w.jsx)("span",{className:"text-gray-500 mr-2",children:"Variants price:"}),Object(w.jsx)("span",{className:"text-gray-900",children:(JSON.isJSON(a.currency)&&a.currency.html_symbol?a.currency.html_symbol:"")+" "+s})]}),Object(w.jsx)(b.a,{xs:12,children:Object(w.jsx)(A.a,{variant:"body1",gutterBottom:!0,children:a.description})}),Object(w.jsxs)(b.a,{xs:12,children:["service"===a.item_type&&Object(w.jsx)(C.a,{className:"m-1",size:"small",label:"Service"}),"product"===a.item_type&&Object(w.jsx)(C.a,{className:"m-1",size:"small",label:"Product"}),a.available&&Object(w.jsx)(C.a,{className:"m-1",size:"small",label:"Available"}),a.taxable&&Object(w.jsx)(C.a,{className:"m-1",size:"small",label:"Taxable"}),a.discountable&&Object(w.jsx)(C.a,{className:"mx-1",size:"small",label:"Discountable"}),Array.isArray(a.categories)&&Object(w.jsxs)("div",{children:[" ",a.categories.map((function(e,t){return Object(w.jsx)(C.a,{label:e,className:"m-1",size:"small"},"category-"+t)}))," "]}),Array.isArray(a.tags)&&Object(w.jsxs)("div",{children:[" ",a.tags.map((function(e,t){return Object(w.jsx)(C.a,{label:e,className:"m-1",size:"small"},"tag-"+t)}))," "]})]})]})}),Object(w.jsx)(b.a,{xs:12,md:8,className:"p-0 m-0",children:Object(w.jsxs)(x.a,{className:"p-0 m-0 flex flex-col",children:[Object(w.jsx)("div",{className:"p-2 w-full flex-grow",children:Object(w.jsx)(f.a,{className:"w-full h-auto",src:this.state.selected_image?this.state.selected_image:"https://realfield.nyc3.cdn.digitaloceanspaces.com/public/img/realfield/logo-chevron.svg"})}),Object(w.jsx)("div",{className:"p-2 w-full flex",children:Array.isArray(a.tags)&&Object(w.jsxs)("div",{className:"w-full flex",children:[" ",a.images.map((function(t,a){return Object(w.jsx)(f.a,{className:"sm:w-1/4 md:w-16 mx-1 cursor-pointer hover:opacity-50",src:N.a.getAttachmentFileUrl(t),onClick:e.handleOnImageSelect(N.a.getAttachmentFileUrl(t))},"item-image-"+a)}))," "]})})]})}),Object(w.jsxs)(x.a,{className:"px-0 m-0",children:[JSON.isJSON(a.variants)&&JSON.isJSON(a.variants)&&Object(w.jsx)(b.a,{xs:12,className:"px-0 m-0",children:Object(w.jsx)(k.d,{label:"Variants",mode:"generation",name:"variants",blueprint:a.variants,value:this.state.options,onChange:this.handleOnVariantsChange("variants"),variant:"outlined",error:this.state.variantsError})}),Object(w.jsx)(b.a,{xs:12,className:"px-0 m-0",children:Object(w.jsxs)(j.a,{color:"primary",onClick:this.handleOnItemAdd,disabled:!this.state.canAddToCart,children:[" ","Add to cart"," "]})})]})]})}}]),a}(u.a.Component),F=I,z=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var i;Object(s.a)(this,a),(i=t.call(this,e)).state={view:"gridview",prev_view:"gridview",items:[],context:null,params:{}},i.handleOnItemSelect=function(e,t){var a=i.props.onContextChange;i.setState((function(t){return{view:"itemview",context:e,prev_view:t.view}})),Function.isFunction(a)&&a(e,"itemview")},i.handleOnItemAdd=function(e){var t=i.props,a=t.onAddToCart,s=t.onContextChange;Function.isFunction(a)&&a(e),Function.isFunction(s)&&s(null,i.state.prev_view),i.setState((function(e){return{view:e.prev_view,prev_view:e.view,context:{}}}))},i.handleOnBackClick=function(e){var t=i.props.onContextChange;Function.isFunction(t)&&t(null,i.state.prev_view),i.setState((function(e){return{view:e.prev_view,prev_view:e.view}}))};var c=e.context,l=e.view;return c&&(i.state.context=c),l&&(i.state.view=l),i.handleOnItemSelect=i.handleOnItemSelect.bind(Object(n.a)(i)),i.handleOnItemAdd=i.handleOnItemAdd.bind(Object(n.a)(i)),i.handleOnBackClick=i.handleOnBackClick.bind(Object(n.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,a){var s=this.props,i=s.context,n=s.view;Object.areEqual(this.state.context,i)&&Object.areEqual(this.state.view,n)||this.setState({view:n,context:i})}},{key:"handleOnComplete",value:function(){var e=this.props.onComplete;Function.isFunction(e)&&e(this.state.items)}},{key:"render",value:function(){var e=this.props,t=e.onComplete,a=e.onCancel;return Object(w.jsxs)(x.a,{className:"p-0 m-0",children:[Object(w.jsx)(x.a,{className:"p-0 m-0",children:!["gridview"].includes(this.state.view)&&Object(w.jsx)(b.a,{xs:6,className:"float-left",children:Object(w.jsx)(r.a,{"aria-label":"back",onClick:this.handleOnBackClick,children:Object(w.jsx)(d.a,{fontSize:"inherit"})})})}),Object(w.jsxs)(x.a,{className:"p-0 m-0",children:["gridview"===this.state.view&&Object(w.jsx)(y,{onItemSelect:this.handleOnItemSelect,params:this.state.params}),"itemview"===this.state.view&&Object(w.jsx)(F,{onItemAdd:this.handleOnItemAdd,item:this.state.context})]}),Object(w.jsxs)(x.a,{className:"p-4",children:[this.state.items.length>0&&Object(w.jsx)(b.a,{xs:12,md:6,className:"flex justify-start",children:Object(w.jsxs)(j.a,{onClick:t,color:"primary",round:!0,children:[Object(w.jsx)(h.a,{})," Proceed"," "]})}),Object(w.jsx)(b.a,{xs:12,md:this.state.items.length>0?6:12,className:"flex justify-end",children:Object(w.jsxs)(j.a,{onClick:a,color:"inverse",round:!0,children:[" ","Back"," "]})})]})]})}}]),a}(u.a.Component);t.default=z}}]);
//# sourceMappingURL=11.bb21e07a.chunk.js.map