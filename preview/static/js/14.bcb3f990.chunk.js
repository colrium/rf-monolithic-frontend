(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[14],{2074:function(e,t,a){"use strict";a.r(t);var c=a(4),n=a(2),i=a(15),r=a(6),s=a(11),o=a(12),l=a(19),u=a(20),p=a(66),b=a.n(p),d=a(84),y=a(399),O=a(230),j=a(231),h=a(13),v=a(7),m=a(26),f=a(1),g=a(18),N=a(1798),x=a(48),q=a.n(x),S=a(21),J=a(32),k=a(0),z=["title","type","icon","description","query","value"],_=["title","type","icon","description","query","value"],w=["title","type","icon","description","size","query","value","resolveValue","view"],A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var c;Object(s.a)(this,a),(c=t.call(this,e)).state={counts:{},aggregates:{}};var n=c.props;n.contexts,n.cache;return c}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.contexts;Object.entries(t).map((function(t){var a=Object(r.a)(t,2),c=a[0],n=a[1],s=(n.title,n.type),o=(n.icon,n.description,n.query),l=n.value;Object(i.a)(n,z);J[c]&&["count","aggregates"].includes(s)&&!l&&e.loadData(c,s,JSON.isJSON(o)?o:{})}))}},{key:"loadData",value:function(e,t,a){var c=this.props.apiCallRequest,n=J[e];n&&c(n.name+("records"!==t?"_"+t:""),{uri:n.endpoint,type:t,params:JSON.isJSON(a)?a:{},data:{},cache:!0})}},{key:"render",value:function(){var e,t=this.props,a=t.className,s=(t.auth,t.cache),o=t.contexts,l=t.theme,u=t.wrapperSize,p=b()(a),f={count:0,aggregates:{}},g={};return JSON.isJSON(o)&&Object.entries(o).map((function(e){var t=Object(r.a)(e,2),a=t[0],c=t[1],o=c.title,l=c.type,u=c.icon,p=c.description,b=c.query,d=c.value,y=Object(i.a)(c,_);J[a]&&(JSON.isJSON(s.data)&&!d?a+"_"+l in s.data?g[a]=Object(n.a)(Object(n.a)({},y),{},{type:l,title:o||J[a].label,description:p||("count"==l?"Total ":"")+J[a].label,icon:u||J[a].icon,query:JSON.isJSON(b)?b:{},value:s.data[a+"_"+l]}):g[a]=Object(n.a)(Object(n.a)({},y),{},{type:l,title:o||J[a].label,description:p||("count"==l?"Total ":"")+J[a].label,icon:u||J[a].icon,query:JSON.isJSON(b)?b:{},value:f[l]}):g[a]=d?Object(n.a)(Object(n.a)({},y),{},{type:l,title:o||J[a].label,description:p||("count"==l?"Total ":"")+J[a].label,icon:u||J[a].icon,query:JSON.isJSON(b)?b:{},value:d}):Object(n.a)(Object(n.a)({},y),{},{type:l,title:o||J[a].label,description:p||("count"==l?"Total ":"")+J[a].label,icon:u||J[a].icon,query:JSON.isJSON(b)?b:{},value:f[l]}))})),Object(k.jsx)(h.a,(e={className:"p-0 m-0"},Object(c.a)(e,"className",p),Object(c.a)(e,"children",Object.entries(g).map((function(e,t){var a=Object(r.a)(e,2),c=a[0],n=a[1],s=n.title,o=n.type,p=(n.icon,n.description),b=n.size,f=(n.query,n.value),g=n.resolveValue,N=n.view;Object(i.a)(n,w);return Object(k.jsx)(v.a,{xs:12,md:b||(u>=8?3:6),children:Object(k.jsxs)(d.a,{elevation:1,style:{backgroundColor:l.palette.background.paper},children:[Object(k.jsx)(j.a,{title:Object(k.jsx)(m.a,{variant:"h5",style:{color:l.palette.text.disabled,fontWeight:"500"},children:Function.isFunction(s)?s(f):s})}),Object(k.jsx)(O.a,{className:"p-0 m-0",children:Object(k.jsx)(h.a,{className:"p-0 m-0",children:Object(k.jsxs)(v.a,{xs:12,className:"flex items-center justify-center",children:["count"===o&&Object(k.jsxs)(m.a,{variant:"h2",style:{color:l.palette.accent.main,fontWeight:"700",fontSize:"2rem"},children:[" ",f," "]}),"aggregates"===o&&!N&&Function.isFunction(g)&&Object(k.jsxs)(m.a,{variant:"h2",style:{color:l.palette.accent.main,fontWeight:"700",fontSize:"2rem"},children:[" ",g(f)," "]})]})})}),Object(k.jsx)(y.a,{children:Object(k.jsx)(m.a,{variant:"body2",style:{color:l.palette.text.default},children:Function.isFunction(p)?p(f):p})})]})},c+"-numbers")}))),e))}}]),a}(f.Component);A.defaultProps={showGraphs:!0,wrapperSize:12,contexts:{surveys:{type:"count",query:{}},commissions:{type:"count",query:{}},responses:{type:"count",query:{}},queries:{type:"count",query:{}},tracks:{type:"count",query:{}},applications:{type:"count",query:{}},users:{type:"aggregates",query:{group:"gender",role:"collector"},title:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&(t=t+(t.length>0?" / ":"")+e._id.humanize())})),t},description:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&(t=t+(t.length>0?" / ":"")+e._id.humanize())})),"Total "+t},resolveValue:function(e){var t="";return Array.isArray(e)&&e.map((function(e){e._id&&e.count&&(t=t+(t.length>0?" / ":"")+e.count)})),t}}}};t.default=q()(Object(g.b)((function(e){return{auth:e.auth,cache:e.cache}}),{apiCallRequest:S.hb}),N.a)(A)}}]);
//# sourceMappingURL=14.bcb3f990.chunk.js.map