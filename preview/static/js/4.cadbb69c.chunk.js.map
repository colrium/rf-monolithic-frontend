{"version":3,"sources":["views/widgets/Charts/AggregatesBarChart/index.jsx","../node_modules/@mui/icons-material/esm/MoreVert.js"],"names":["AggregatesBarChart","props","state","loading","load_error","aggregate","aggregates","chart_data","labels","datasets","data","aggregateMenuEl","aggregatables","colors","handleShowAggregateMenu","event","currentTarget","setState","handleAggregateMenuItemClick","column","loadAggregates","g","bind","handleCloseAggregateMenu","this","prepareForData","prepareChartData","prevProps","Object","areEqual","defination","api","Array","isArray","cache","equals","dynamic","monochrome","color","service","onResolveAggregates","JSON","isEmpty","entries","scope","columns","properties","possibilities","push","name","label","length","no_of_colors","monochrome_colors","UtilitiesHelper","monochromeColorScheme","rotation_colors","rotationColorScheme","auth","onLoadAggregates","user","error","chart_data_labels","chart_data_data","onload_callback_data","i","_id","count","backgroundColor","query_data","apiCallRequest","new_aggregate","group","uri","endpoint","type","params","className","showTitle","showMenu","xs","variant","fullWidth","onClick","size","id","anchorEl","keepMounted","open","Boolean","onClose","map","aggregatable","index","options","maintainAspectRatio","scales","yAxes","ticks","beginAtZero","justify","alignItems","alt","src","complete","msg","React","Component","defaultProps","hex","accent","compose","connect","ownProps","createSvgIcon","_jsx","d"],"mappings":"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","file":"static/js/4.cadbb69c.chunk.js","sourcesContent":["/** @format */\n\nimport { Menu, MenuItem } from \"@mui/material\";\n//\n\nimport { MoreVert as AggregateMenuIcon } from \"@mui/icons-material\";\nimport { colors } from \"assets/jss/app-theme\";\nimport Button from \"components/Button\";\nimport GridContainer from \"components/Grid/GridContainer\";\nimport GridItem from \"components/Grid/GridItem\";\nimport Typography from \"components/Typography\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { defaults, Bar } from \"react-chartjs-2\";\nimport { connect } from \"react-redux\";\nimport compose from \"recompose/compose\";\nimport { apiCallRequest } from \"state/actions\";\n\n//\nimport ApiService from \"services/Api\";\nimport { UtilitiesHelper } from \"utils/Helpers\";\n\n\n//\n// defaults.global.legend.display = false;\n\nclass AggregatesBarChart extends React.Component {\n\tstate = {\n\t\tloading: true,\n\t\tload_error: false,\n\t\taggregate: \"status\",\n\t\taggregates: [],\n\t\tchart_data: {\n\t\t\tlabels: [],\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\taggregateMenuEl: null,\n\t};\n\taggregatables = [];\n\tcolors = [];\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleShowAggregateMenu = this.handleShowAggregateMenu.bind(this);\n\t\tthis.handleCloseAggregateMenu = this.handleCloseAggregateMenu.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.prepareForData();\n\t\tthis.loadAggregates();\n\t\tthis.prepareChartData();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (!Object.areEqual(this.props.defination, prevProps.defination)) {\n\t\t\tthis.prepareForData();\n\t\t\tthis.loadAggregates();\n\t\t} else if (!Object.areEqual(prevProps.api, this.props.api)) {\n\t\t\tthis.prepareChartData();\n\t\t} else if (Array.isArray(this.props.cache)) {\n\t\t\tif (!this.props.cache.equals(prevProps.cache)) {\n\t\t\t\tthis.prepareChartData();\n\t\t\t}\n\t\t} else if (Array.isArray(prevProps.cache)) {\n\t\t\tif (!prevProps.cache.equals(this.props.cache)) {\n\t\t\t\tthis.prepareChartData();\n\t\t\t}\n\t\t}\n\t}\n\n\tprepareForData() {\n\t\tlet {\n\t\t\tdynamic,\n\t\t\tmonochrome,\n\t\t\tcolor,\n\t\t\tcolors,\n\t\t\tdefination,\n\t\t\tservice,\n\t\t\taggregate,\n\t\t\tonResolveAggregates,\n\t\t} = this.props;\n\n\t\tif (dynamic && !JSON.isEmpty(defination)) {\n\t\t\tthis.aggregatables = [];\n\t\t\tfor (let [column, properties] of Object.entries(\n\t\t\t\tdefination.scope.columns\n\t\t\t)) {\n\t\t\t\tif (properties.possibilities) {\n\t\t\t\t\tthis.aggregatables.push({\n\t\t\t\t\t\tname: column,\n\t\t\t\t\t\tlabel: properties.label,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!aggregate && this.aggregatables.length > 0) {\n\t\t\taggregate = this.aggregatables[0].name;\n\t\t\tif (onResolveAggregates) {\n\t\t\t\tonResolveAggregates(defination.name, this.aggregatables);\n\t\t\t}\n\t\t}\n\n\t\tif (dynamic) {\n\t\t\tthis.state.aggregate = aggregate;\n\n\t\t\t//generate color scheme if monochromatic\n\t\t\tif (monochrome) {\n\t\t\t\tlet no_of_colors =\n\t\t\t\t\tthis.aggregatables.length > 0\n\t\t\t\t\t\t? this.aggregatables.length\n\t\t\t\t\t\t: 1;\n\t\t\t\tlet monochrome_colors = UtilitiesHelper.monochromeColorScheme(\n\t\t\t\t\tcolor,\n\t\t\t\t\tno_of_colors\n\t\t\t\t);\n\t\t\t\tthis.colors = monochrome_colors;\n\t\t\t} else if (colors) {\n\t\t\t\tthis.colors = colors;\n\t\t\t} else {\n\t\t\t\tlet no_of_colors =\n\t\t\t\t\tthis.aggregatables.length > 0\n\t\t\t\t\t\t? this.aggregatables.length\n\t\t\t\t\t\t: 1;\n\t\t\t\tlet rotation_colors = UtilitiesHelper.rotationColorScheme(\n\t\t\t\t\tcolor,\n\t\t\t\t\tno_of_colors\n\t\t\t\t);\n\t\t\t\tthis.colors = rotation_colors;\n\t\t\t}\n\t\t}\n\t}\n\n\tprepareChartData() {\n\t\tconst {\n\t\t\tmonochrome,\n\t\t\tcolor,\n\t\t\tcolors,\n\t\t\taggregate,\n\t\t\tdefination,\n\t\t\tservice,\n\t\t\tauth,\n\t\t\tonLoadAggregates,\n\t\t\tcache,\n\t\t\tapi,\n\t\t} = this.props;\n\t\tif (Array.isArray(cache)) {\n\t\t\tlet possibilities = defination.scope.columns[this.state.aggregate]\n\t\t\t\t? defination.scope.columns[this.state.aggregate].possibilities\n\t\t\t\t: {};\n\t\t\tif (typeof possibilities === \"function\") {\n\t\t\t\tpossibilities = possibilities(false, auth.user);\n\t\t\t}\n\t\t\t//generate color scheme if monochromatic\n\t\t\tif (monochrome) {\n\t\t\t\tlet no_of_colors = cache.length > 0 ? cache.length : 1;\n\t\t\t\tlet monochrome_colors = UtilitiesHelper.monochromeColorScheme(\n\t\t\t\t\tapi.loading || api.error ? \"#595959\" : color,\n\t\t\t\t\tno_of_colors\n\t\t\t\t);\n\t\t\t\tthis.colors = monochrome_colors;\n\t\t\t} else if (colors) {\n\t\t\t\tthis.colors =\n\t\t\t\t\tapi.loading || api.error\n\t\t\t\t\t\t? UtilitiesHelper.monochromeColorScheme(\"#595959\")\n\t\t\t\t\t\t: colors;\n\t\t\t} else {\n\t\t\t\tlet no_of_colors = cache.length > 0 ? cache.length : 1;\n\t\t\t\tlet rotation_colors = UtilitiesHelper.rotationColorScheme(\n\t\t\t\t\tapi.loading || api.error ? \"#595959\" : color,\n\t\t\t\t\tno_of_colors\n\t\t\t\t);\n\t\t\t\tthis.colors = rotation_colors;\n\t\t\t}\n\n\t\t\tlet chart_data_labels = [];\n\t\t\tlet chart_data_data = [];\n\t\t\tlet onload_callback_data = [];\n\n\t\t\tif (typeof possibilities === \"object\") {\n\t\t\t\tfor (var i = 0; i < cache.length; i++) {\n\t\t\t\t\tif (cache[i]._id in possibilities) {\n\t\t\t\t\t\tchart_data_labels.push(possibilities[cache[i]._id]);\n\t\t\t\t\t\tchart_data_data.push(cache[i].count);\n\t\t\t\t\t\tif (onLoadAggregates) {\n\t\t\t\t\t\t\tonload_callback_data.push({\n\t\t\t\t\t\t\t\tname: cache[i]._id,\n\t\t\t\t\t\t\t\tlabel: possibilities[cache[i]._id],\n\t\t\t\t\t\t\t\tcount: cache[i].count,\n\t\t\t\t\t\t\t\tcolor: this.colors[i],\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet chart_data = {\n\t\t\t\tlabels: chart_data_labels,\n\t\t\t\tdatasets: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: chart_data_data,\n\t\t\t\t\t\tbackgroundColor: this.colors,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tthis.setState(state => ({\n\t\t\t\taggregates: cache,\n\t\t\t\tchart_data: chart_data,\n\t\t\t\tloading: false,\n\t\t\t}));\n\t\t\tif (onLoadAggregates) {\n\t\t\t\tonLoadAggregates(onload_callback_data);\n\t\t\t}\n\t\t} else {\n\t\t\tlet chart_data_labels = [];\n\t\t\tlet chart_data_data = [];\n\t\t\tlet onload_callback_data = [];\n\n\t\t\tlet chart_data = {\n\t\t\t\tlabels: chart_data_labels,\n\t\t\t\tdatasets: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: chart_data_data,\n\t\t\t\t\t\tbackgroundColor: this.colors,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tthis.setState(state => ({\n\t\t\t\taggregates: cache,\n\t\t\t\tchart_data: chart_data,\n\t\t\t\tloading: false,\n\t\t\t}));\n\t\t\tif (onLoadAggregates) {\n\t\t\t\tonLoadAggregates(onload_callback_data);\n\t\t\t}\n\t\t}\n\t}\n\n\tloadAggregates(query_data) {\n\t\tconst { apiCallRequest, defination } = this.props;\n\n\t\tif (!query_data) {\n\t\t\tquery_data = { g: this.state.aggregate };\n\t\t}\n\n\t\tlet new_aggregate =\n\t\t\t\"g\" in query_data\n\t\t\t\t? query_data.g\n\t\t\t\t: \"group\" in query_data\n\t\t\t\t\t? query_data.group\n\t\t\t\t\t: false;\n\t\tthis.setState(state => ({ aggregate: new_aggregate }));\n\n\t\tif (defination) {\n\t\t\tapiCallRequest(\n\t\t\t\tdefination.name + \"_aggregates\",\n\t\t\t\t{\n\t\t\t\t\turi: defination.endpoint,\n\t\t\t\t\ttype: \"aggregates\",\n\t\t\t\t\tparams: query_data,\n\t\t\t\t\tdata: {},\n\t\t\t\t\tcache: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n\n\thandleShowAggregateMenu = event => {\n\t\tlet aggregateMenuEl = event.currentTarget;\n\t\tthis.setState({ aggregateMenuEl: aggregateMenuEl });\n\t};\n\n\thandleCloseAggregateMenu() {\n\t\tthis.setState({ aggregateMenuEl: null });\n\t}\n\n\thandleAggregateMenuItemClick = column => event => {\n\t\t//this.handleCloseAggregateMenu();\n\t\tthis.setState({ aggregateMenuEl: null });\n\t\tthis.loadAggregates({ g: column });\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\taggregate,\n\t\t\tdynamic,\n\t\t\tdefination,\n\t\t\tservice,\n\t\t\tshowTitle,\n\t\t\tshowMenu,\n\t\t\tapi,\n\t\t\tcache,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t!JSON.isEmpty(defination) && <GridContainer className={className + \" p-0 m-0\"}>\n\t\t\t\t<GridItem xs={12} className=\"p-0 m-0\">\n\t\t\t\t\t<GridContainer className=\"p-0 m-0\">\n\t\t\t\t\t\t<GridContainer className=\"p-0 m-0\">\n\t\t\t\t\t\t\t{(showMenu || showTitle) && (\n\t\t\t\t\t\t\t\t<GridItem xs={12}>\n\t\t\t\t\t\t\t\t\t<GridContainer>\n\t\t\t\t\t\t\t\t\t\t{showTitle && !showMenu && (\n\t\t\t\t\t\t\t\t\t\t\t<GridItem xs={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{defination.scope.columns[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.aggregate\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? defination.scope\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.columns[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aggregate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].label\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Unknown\"}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tAggregate\n\t\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t{dynamic && showMenu && (\n\t\t\t\t\t\t\t\t\t\t\t<GridItem\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"p-0 m-0\"\n\t\t\t\t\t\t\t\t\t\t\t\txs={12}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-controls=\"aggregate-menu\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.handleShowAggregateMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"float-right\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Aggregate Menu\"\n\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{defination.scope?.columns[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.aggregate\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? defination.scope\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.columns[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aggregate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].label\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Unknown\"}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tAggregate\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AggregateMenuIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"surveys-aggregate-menu\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tanchorEl={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aggregateMenuEl\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\t\t\t\t\t\t\t\topen={Boolean(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.aggregateMenuEl\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.handleCloseAggregateMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.aggregatables.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taggregatable,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleAggregateMenuItemClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taggregatable.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"aggregate_\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taggregatable.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{aggregatable.label +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\" Aggregate\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</GridContainer>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<GridItem className=\"p-0 m-0\" xs={12}>\n\t\t\t\t\t\t\t\t{Array.isArray(this.state.chart_data.labels) &&\n\t\t\t\t\t\t\t\t\tthis.state.chart_data.labels.length > 0 ? (\n\t\t\t\t\t\t\t\t\t<Bar\n\t\t\t\t\t\t\t\t\t\tdata={this.state.chart_data}\n\t\t\t\t\t\t\t\t\t\toptions={{\n\t\t\t\t\t\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\t\t\t\t\t\tyAxes: [{\n\t\t\t\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbeginAtZero: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<GridContainer\n\t\t\t\t\t\t\t\t\t\tclassName=\"p-0 m-0\"\n\t\t\t\t\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\talt=\"Empty Aggregates\"\n\t\t\t\t\t\t\t\t\t\t\tclassName={\"m-8 w-9/12\"}\n\t\t\t\t\t\t\t\t\t\t\tsrc={(\"https://realfield.nyc3.cdn.digitaloceanspaces.com/public/img/empty-state-table.svg\")}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\t\t\tclassName={\"mt-4\"}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"grey\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tNo{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{defination.scope.columns[\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.aggregate\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t? defination.scope.columns[\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.aggregate\n\t\t\t\t\t\t\t\t\t\t\t\t].label\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\"}{\" \"}\n\t\t\t\t\t\t\t\t\t\t\tAggregates\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</GridContainer>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t</GridContainer>\n\n\t\t\t\t\t\t{api.complete && api.error && (\n\t\t\t\t\t\t\t<GridContainer>\n\t\t\t\t\t\t\t\t<GridItem xs={12}>\n\t\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\t\tcolor=\"error\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{\"An error occured. \\n \" +\n\t\t\t\t\t\t\t\t\t\t\tapi.error.msg}\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t</GridContainer>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</GridContainer>\n\t\t\t\t</GridItem>\n\t\t\t</GridContainer>\n\t\t);\n\t}\n}\n\nAggregatesBarChart.propTypes = {\n\tclassName: PropTypes.string,\n\n\tdynamic: PropTypes.bool,\n\tshowTitle: PropTypes.bool,\n\tshowMenu: PropTypes.bool,\n\tmonochrome: PropTypes.bool,\n\tcolor: PropTypes.string,\n\tcolors: PropTypes.array,\n\tdefination: PropTypes.object.isRequired,\n\tservice: PropTypes.any.isRequired,\n\taggregate: PropTypes.string,\n\tonResolveAggregates: PropTypes.func,\n\tonLoadAggregates: PropTypes.func,\n};\n\nAggregatesBarChart.defaultProps = {\n\t//colors: [colors.hex.accent, colors.hex.primary, colors.hex.secondary, colors.hex.primarydark, colors.hex.default],\n\tcolor: colors.hex.accent,\n\tmonochrome: true,\n};\n\nconst mapStateToProps = (state, ownProps) => {\n\tconst { defination } = ownProps;\n\treturn {\n\t\tauth: state.auth,\n\t\tcache: defination\n\t\t\t? state.cache.data[defination.name + \"_aggregates\"]\n\t\t\t: null,\n\t\tapi: defination\n\t\t\t? state.api[defination.name]\n\t\t\t\t? state.api[defination.name]\n\t\t\t\t: {}\n\t\t\t: {},\n\t};\n};\n\nexport default compose(\n\n\tconnect(mapStateToProps, { apiCallRequest })\n)(AggregatesBarChart);\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n}), 'MoreVert');"],"sourceRoot":""}