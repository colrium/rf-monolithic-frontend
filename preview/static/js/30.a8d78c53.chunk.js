(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[30],{2156:function(e,t,s){"use strict";s.r(t);var a=s(3),n=s(5),c=s(6),o=s(8),r=s(31),i=s(15),p=s(16),l=s(2014),d=s(21),h=s(17),u=s(13),O=s(29),j=s(23),b=s(1),m=s.n(b),x=s(30),f=s(19),S=s(143),_=s(9),v=s(298),C=s(2177),y=s(2154),g=s(2158),k=s(713),N=s.n(k),w=s(712),A=s.n(w),J=s(2058),T=s.n(J),q=s(0);function P(e){var t=Object(b.useState)(e),s=Object(_.a)(t,2),a=s[0],n=s[1];Object(b.useEffect)((function(){n(e)}),[e]);var c=a.active,o=a.completed,r=a.color,i=a.activeColor;return Object(q.jsx)("div",{className:(c?i:r)+"+text",children:c?Object(q.jsx)("div",{className:"w-4 h-4 rounded-full "+i}):o?Object(q.jsx)(T.a,{}):Object(q.jsx)("div",{className:"w-2 h-2 ml-1 rounded-full "+r})})}function z(e){var t=m.a.useState(e.direction),s=Object(_.a)(t,2),a=(s[0],s[1]),n=m.a.useState(e.steps),c=Object(_.a)(n,2),o=c[0],r=c[1],i=m.a.useState(e.step),p=Object(_.a)(i,2),l=p[0],d=p[1],h=m.a.useState(e.color),u=Object(_.a)(h,2),j=u[0],x=u[1],f=m.a.useState(e.activeColor),S=Object(_.a)(f,2),k=S[0],w=S[1],J=m.a.useState(e.onStep),T=Object(_.a)(J,2),z=T[0],D=T[1],F=m.a.useState(e.controlled),R=Object(_.a)(F,2),I=R[0],B=R[1],E=m.a.useState(e.completed),W=Object(_.a)(E,2),U=(W[0],W[1]);Object(b.useEffect)((function(){a(e.direction),r(e.steps),d(e.step),x(e.color),w(e.activeColor),D(e.onStep),B(e.controlled),U(e.completed)}),[e]);return Object(q.jsxs)("div",{className:"min-w-full",children:[!I&&Object(q.jsx)("div",{className:"w-full relative",children:Object(q.jsx)(v.a,{className:0===l?"center_horizontally opacity-0":k+"_text opacity-100 center_horizontally",onClick:function(){Function.isFunction(z)&&z(l,l-1),d((function(e){return e-1}))},disabled:0===l,children:Object(q.jsx)(A.a,{})})}),Object(q.jsx)(g.a,{className:"bg-transparent",activeStep:l,orientation:"vertical",connector:Object(q.jsx)("div",{className:"h-8"}),children:Object.entries(o).map((function(e,t){var s=Object(_.a)(e,2),a=s[0],n=s[1];return Object(q.jsx)(C.a,{className:"bg-transparent",children:Object(q.jsx)(y.a,{StepIconComponent:P,StepIconProps:{color:j,activeColor:k},children:Object(q.jsx)(O.a,{className:l===t?k+"_text":j+"_text",children:n})})},a)}))}),!I&&Object(q.jsx)("div",{className:"w-full relative",children:Object(q.jsx)(v.a,{className:l===Object.size(o)===0?"center_horizontally":k+"_text center_horizontally",onClick:function(){Function.isFunction(z)&&z(l,l+1),d((function(e){return e+1}))},disabled:l===Object.size(o),children:Object(q.jsx)(N.a,{})})})]})}z.defaultProps={color:"inverse",activeColor:"inverse",steps:{},completed:[],step:0,controlled:!0};var D=z,F=s(2129),R=s(701),I=s.n(R),B=s(700),E=s.n(B),W=s(39);function U(e){var t=e.direction,s=e.steps,a=e.step,n=e.backText,c=e.nextText,o=m.a.useState(a),r=Object(_.a)(o,2),i=r[0],p=r[1];return Object(q.jsx)(F.a,{variant:"dots",steps:s,position:"static",activeStep:i,className:"flex-grow min-w-full",nextButton:Object(q.jsxs)(W.a,{color:i===s?"grey":"primary",onClick:function(){p((function(e){return e+1}))},disabled:i===s,children:[c,"rtl"===t?Object(q.jsx)(I.a,{}):Object(q.jsx)(E.a,{})]}),backButton:Object(q.jsxs)(W.a,{color:0===i?"grey":"primary",onClick:function(){p((function(e){return e-1}))},disabled:0===i,children:["rtl"===t?Object(q.jsx)(E.a,{}):Object(q.jsx)(I.a,{}),n]})})}U.defaultProps={direction:"ltr",backText:"Back",nextText:"Next",steps:1,step:0};var H=U;function K(e){var t=Object(b.useState)(e),s=Object(_.a)(t,2),n=s[0],c=s[1],o=n.type,r=Object(a.a)(Object(a.a)({},n),{},{steps:Object.size(n.steps)});return Object(b.useEffect)((function(){c(e)}),[e]),Object(q.jsxs)("div",{children:["mobile"===o&&Object(q.jsx)(H,Object(a.a)({},r)),"default"===o&&Object(q.jsx)(D,Object(a.a)({},n))]})}K.defaultProps={type:"default"};var M=K,X=Object(S.a)((function(){return s.e(29).then(s.bind(null,2149))})),Y=Object(S.a)((function(){return s.e(27).then(s.bind(null,2173))})),G=Object(S.a)((function(){return s.e(26).then(s.bind(null,2150))})),L=Object(S.a)((function(){return s.e(23).then(s.bind(null,2151))})),Q=Object(S.a)((function(){return s.e(28).then(s.bind(null,2162))})),V=Object(S.a)((function(){return s.e(25).then(s.bind(null,2152))})),Z=Object(S.a)((function(){return s.e(24).then(s.bind(null,2153))})),$=function(e){Object(i.a)(s,e);var t=Object(p.a)(s);function s(e){var a;Object(c.a)(this,s),(a=t.call(this,e)).state={step:0,steps:{},completedSteps:[],steps_data:{},context:null,context_view:null},a.typeSteps={unauthenticated:{start:"Start",select_items:"Select Items",signin_signup:"Signin/Signup",checkout:"Checkout"},authenticated:{start:"Start",select_items:"Select Items",checkout:"Checkout"},proposalRequest:{start:"Start",request_proposal:"Request Proposal",thankyou:"Complete"}};var n=e.auth;return a.state.steps=a.typeSteps.unauthenticated,n.isAuthenticated&&(a.state.steps=a.typeSteps.authenticated),a.state.step_name=Object.keys(a.state.steps)[a.state.step],a.recoverAbadonedOrder=a.recoverAbadonedOrder.bind(Object(r.a)(a)),a.handleStepNavigation=a.handleStepNavigation.bind(Object(r.a)(a)),a.handleOnStepComplete=a.handleOnStepComplete.bind(Object(r.a)(a)),a.handleOnStepCancel=a.handleOnStepCancel.bind(Object(r.a)(a)),a.handleOnContextChange=a.handleOnContextChange.bind(Object(r.a)(a)),a.handleOnAddToCart=a.handleOnAddToCart.bind(Object(r.a)(a)),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props,s=t.auth,a=t.order_progress,n=(t.setOrderProgress,t.closeDialog),c=t.openDialog;s.isAuthenticated&&a.step_name!==this.state.step_name&&("development"===j.n?this.recoverAbadonedOrder():c({title:"Heads Up! We found an abadoned order",body:"We found some progress for an order you were making. Would you like to recover and proceed from where you left off?",actions:{cancel:{text:"Dismiss",color:"grey",onClick:n},proceed:{text:"Yes please",color:"primarydark",onClick:function(){n(),e.recoverAbadonedOrder()}}}})),document.title=d.a.title("Order")}},{key:"recoverAbadonedOrder",value:function(){var e=this.props,t=e.order_progress,s=e.auth,a=this.typeSteps.unauthenticated;s.isAuthenticated&&(a=this.typeSteps.authenticated),"request_proposal"===t.step_name&&(a=this.typeSteps.proposalRequest),this.setState((function(e){return{step:JSON.positionOfKey(a,t.step_name),step_name:t.step_name,steps:a,steps_data:t.steps_data}}))}},{key:"handleStepNavigation",value:function(e,t){}},{key:"handleOnStepComplete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,s=t.auth,a=t.order_progress,c=t.setOrderProgress,o=this.typeSteps.unauthenticated;if(s.isAuthenticated&&(o=this.typeSteps.authenticated),"request_proposal"===this.state.step_name&&(o=this.typeSteps.proposalRequest),0===this.state.step)c({step_name:Object.keys(o)[1],steps_data:Object(n.a)({},Object.keys(o)[1],{})}),this.setState((function(e){return{step:1,step_name:Object.keys(o)[1],steps:o}}));else if(Object.size(o)-1<this.state.step){var r={};JSON.isJSON(a.steps_data)&&(r=JSON.parse(JSON.stringify(a.steps_data))),r[this.state.step_name]=e,c({step_name:Object.keys(o)[this.state.step+1],steps_data:r}),this.setState((function(e){return{step:e.step+1,step_name:Object.keys(o)[e.step+1],steps:o}}))}else c({step_name:"start",steps_data:{}}),this.setState((function(e){return{step:0,step_name:Object.keys(o)[0],steps:o,order_complete:!0}}))}},{key:"handleOnStepCancel",value:function(){var e=this.props,t=e.auth,s=e.order_progress,a=e.setOrderProgress,c=this.typeSteps.unauthenticated;if(t.isAuthenticated&&(c=this.typeSteps.authenticated),0===this.state.step)c=this.typeSteps.proposalRequest,a({step_name:Object.keys(c)[1],steps_data:Object(n.a)({},Object.keys(c)[1],{})}),this.setState((function(e){return{step:1,step_name:"request_proposal",steps:c}}));else{var o={};JSON.isJSON(s.steps_data)&&(o=JSON.parse(JSON.stringify(s.steps_data))),this.state.step_name in o&&delete o[this.state.step_name],a({step_name:Object.keys(c)[this.state.step-1],steps_data:o}),this.setState((function(e){return{steps:c,step:e.step-1,step_name:Object.keys(c)[e.step-1]}}))}}},{key:"handleOnContextChange",value:function(e,t){var s=this,c=this.props,o=c.setOrderProgress;c.order_progress;o({step_name:Object.keys(this.state.steps)[this.state.step],steps_data:Object(a.a)(Object(a.a)({},this.state.steps_data),{},Object(n.a)({},Object.keys(this.state.steps)[this.state.step],Object(a.a)(Object(a.a)({},this.state.steps_data[Object.keys(this.state.steps)[this.state.step]]),{},{context:e,view:t})))}),this.setState((function(c){return{steps_data:Object(a.a)(Object(a.a)({},s.state.steps_data),{},Object(n.a)({},Object.keys(s.state.steps)[s.state.step],Object(a.a)(Object(a.a)({},s.state.steps_data[Object.keys(s.state.steps)[s.state.step]]),{},{context:e,view:t})))}}))}},{key:"handleOnAddToCart",value:function(e){(0,this.props.addToCart)(e)}},{key:"render",value:function(){var e=JSON.isJSON(this.state.steps_data[this.state.step_name])?this.state.steps_data[this.state.step_name]:{};return Object(q.jsxs)(h.a,{className:"p-0 m-0 md:relative md:mb-8 md:h-screen bg-gray-100 md:overflow-x-hidden md:overflow-y-hidden",children:[Object(q.jsx)(u.a,{xs:12,md:3,className:"inverse md:absolute md:top-0 md:left-0 md:right-auto md:h-screen",children:Object(q.jsx)(h.a,{className:"absolute center",children:Object(q.jsxs)(u.a,{children:[Object(q.jsx)(l.a,{smDown:!0,children:Object(q.jsx)(M,{color:"grey",activeColor:"primary",type:"default",step:this.state.step,steps:this.state.steps,onStep:this.handleStepNavigation})}),Object(q.jsx)(l.a,{mdUp:!0,children:Object(q.jsx)(M,{color:"grey",activeColor:"primary",type:"mobile",step:this.state.step,steps:this.state.steps,onStep:this.handleStepNavigation})})]})})}),Object(q.jsxs)(u.a,{xs:12,md:9,className:"md:p-4 md:pt-8 md:absolute md:top-0 md:right-0 md:h-screen ",children:[Object(q.jsxs)(h.a,{className:"px-8 h-16 md:absolute md:top-0",children:[Object(q.jsx)(u.a,{xs:12,md:8,className:"p-2",children:Object(q.jsxs)(O.a,{variant:"h4",className:"default_text text-left",children:[" ",this.state.steps[this.state.step_name]," "]})}),Object(q.jsx)(u.a,{xs:12,md:4,className:"p-2",children:Object(q.jsxs)(O.a,{variant:"h6",className:"grey_text text-right font-bold uppercase",children:["Step ",this.state.step+1," /"," ",Object.size(this.state.steps)," "]})})]}),Object(q.jsxs)(h.a,{className:"xs:px1 md:px-8 h-full mt-8 overflow-y-auto overflow-x-hidden",children:["start"===this.state.step_name&&Object(q.jsx)(X,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"select_items"===this.state.step_name&&Object(q.jsx)(Q,Object(a.a)({onContextChange:this.handleOnContextChange,onAddToCart:this.handleOnAddToCart,onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"request_proposal"===this.state.step_name&&Object(q.jsx)(Y,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"signin_signup"===this.state.step_name&&Object(q.jsx)(G,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"account"===this.state.step_name&&Object(q.jsx)(L,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"confirm"===this.state.step_name&&Object(q.jsx)(V,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"checkout"===this.state.step_name&&Object(q.jsx)(Z,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e)),"thankyou"===this.state.step_name&&Object(q.jsx)(Z,Object(a.a)({onComplete:this.handleOnStepComplete,onCancel:this.handleOnStepCancel},e))]})]})]})}}]),s}(m.a.Component);t.default=Object(x.b)((function(e){return{auth:e.auth,order_progress:e.ecommerce.order_progress}}),{setOrderProgress:f.Xb,addToCart:f.gb,removeFromCart:f.yb,closeDialog:f.pb,openDialog:f.wb})($)}}]);