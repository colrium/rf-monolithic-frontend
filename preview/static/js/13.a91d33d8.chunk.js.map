{"version":3,"sources":["views/widgets/Overview/AggregatesOverview/index.jsx"],"names":["Overview","props","state","counts","aggregates","loaded","loading","main_loading","handleShowOptionsMenu","name","event","handleCloseOptionsMenu","handleAggregateMenuItemClick","column","bind","handleOnResolveAggregates","backgroundColors","Object","entries","definations","defination","Color","color","colors","hex","primary","rgb","array","join","a","auth","this","access","restricted","user","that","ApiService","getContextRequests","endpoint","getRecordsCount","then","response","setState","body","data","count","className","contexts","gridSize","theme","chartType","rootClassName","classNames","map","index","view","summary","includes","xs","md","style","background","palette","paper","resolve","placeholder","variant","width","height","service","dynamic","showTitle","showMenu","monochrome","icon","label","Component","defaultProps","compose","withTheme","connect"],"mappings":"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","file":"static/js/13.a91d33d8.chunk.js","sourcesContent":["/** @format */\n\n\nimport { colors } from \"assets/jss/app-theme\";\nimport classNames from \"classnames\";\nimport Color from \"color\";\nimport Card from \"components/Card\";\nimport CardActions from \"components/Card/CardActions\";\nimport CardContent from \"components/Card/CardContent\";\nimport GridContainer from \"components/Grid/GridContainer\";\nimport GridItem from \"components/Grid/GridItem\";\n//\nimport { withTheme } from '@mui/styles';\nimport LazyModule from \"components/LazyModule\";\nimport Typography from \"components/Typography\";\nimport * as definations from \"definations\"\nimport PropTypes from \"prop-types\"\nimport React, { Component } from \"react\"\nimport { connect } from \"react-redux\"\nimport compose from \"recompose/compose\"\nimport ApiService from \"services/Api\"\n\n//\n\nclass Overview extends Component {\n\tstate = {\n\t\tcounts: {},\n\t\taggregates: {},\n\t\tloaded: {},\n\t\tloading: {},\n\t\tmain_loading: true,\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.handleShowOptionsMenu = this.handleShowOptionsMenu.bind(this)\n\t\tthis.handleCloseOptionsMenu = this.handleCloseOptionsMenu.bind(this)\n\t\tthis.handleOnResolveAggregates = this.handleOnResolveAggregates.bind(this)\n\t\tthis.backgroundColors = {}\n\t\tfor (let [name, defination] of Object.entries(definations)) {\n\t\t\tthis.backgroundColors[name] = Color(defination.color ? defination.color : colors.hex.primary)\n\t\t\t\t.rgb()\n\t\t\t\t.array()\n\t\t\t\t.join(\",\")\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tconst { auth } = this.props\n\n\t\tfor (let [name, defination] of Object.entries(definations)) {\n\t\t\tif (!defination.access.restricted(auth.user)) {\n\t\t\t\tlet that = this\n\t\t\t\tApiService.getContextRequests(defination?.endpoint)\n\t\t\t\t\t.getRecordsCount()\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tthat.setState(state => ({\n\t\t\t\t\t\t\tcounts: {\n\t\t\t\t\t\t\t\t...state.counts,\n\t\t\t\t\t\t\t\t[name]: response.body.data.count,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}))\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\thandleShowOptionsMenu = name => event => {}\n\n\thandleCloseOptionsMenu = name => event => {}\n\n\thandleOnResolveAggregates(name, aggregates) {\n\t\tthis.setState(state => ({\n\t\t\taggregates: { ...state.aggregates, [name]: aggregates },\n\t\t}))\n\t}\n\n\thandleAggregateMenuItemClick = column => event => {}\n\n\trender() {\n\t\tconst { className, auth, contexts, gridSize, theme, chartType } = this.props\n\n\t\tconst rootClassName = classNames(`p-0`, className)\n\n\t\treturn (\n\t\t\t<GridContainer className={rootClassName}>\n\t\t\t\t{Object.entries(definations).map(\n\t\t\t\t\t([name, defination], index) =>\n\t\t\t\t\t\t!defination.access.restricted(auth.user) &&\n\t\t\t\t\t\tdefination.access.view.summary(auth.user) &&\n\t\t\t\t\t\tcontexts.includes(name) && (\n\t\t\t\t\t\t\t<GridItem xs={12} md={gridSize} key={name + \"-aggregates\"}>\n\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\tclassName=\"rounded p-0\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t/*background:\n\t\t\t\t\t\t\t\t\t\t\t\"rgba(\" +\n\t\t\t\t\t\t\t\t\t\t\tthis.backgroundColors[name] +\n\t\t\t\t\t\t\t\t\t\t\t\", 0.2)\",*/\n\t\t\t\t\t\t\t\t\t\tbackground: theme.palette.background.paper,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CardContent className=\"p-0\">\n\t\t\t\t\t\t\t\t\t\t{chartType === \"pie\" && (\n\t\t\t\t\t\t\t\t\t\t\t<LazyModule\n\t\t\t\t\t\t\t\t\t\t\t\tresolve={() => import(\"views/widgets/Charts/AggregatesPieChart\")}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"rect\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"30%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: 50,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto float-right\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"circle\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"50%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\tdefination={defination}\n\t\t\t\t\t\t\t\t\t\t\t\tservice={ApiService.getContextRequests(defination.endpoint)}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={defination.color ? defination.color : colors.hex.primary}\n\t\t\t\t\t\t\t\t\t\t\t\tdynamic\n\t\t\t\t\t\t\t\t\t\t\t\tshowTitle\n\t\t\t\t\t\t\t\t\t\t\t\tshowMenu\n\t\t\t\t\t\t\t\t\t\t\t\tmonochrome\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{chartType === \"bar\" && (\n\t\t\t\t\t\t\t\t\t\t\t<LazyModule\n\t\t\t\t\t\t\t\t\t\t\t\tresolve={() => import(\"views/widgets/Charts/AggregatesBarChart\")}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"rect\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"30%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: 50,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto float-right\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"circle\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant: \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"50%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: \"m-auto mt-4\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\tdefination={defination}\n\t\t\t\t\t\t\t\t\t\t\t\tservice={ApiService.getContextRequests(defination.endpoint)}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={defination.color ? defination.color : colors.hex.primary}\n\t\t\t\t\t\t\t\t\t\t\t\tdynamic\n\t\t\t\t\t\t\t\t\t\t\t\tshowTitle\n\t\t\t\t\t\t\t\t\t\t\t\tshowMenu\n\t\t\t\t\t\t\t\t\t\t\t\tmonochrome\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t\t\t{defination.icon}\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t\t\t\t\tTotal {defination.label} : {this.state.counts[name] ? this.state.counts[name] + \"\" : \"0\"}\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</GridContainer>\n\t\t)\n\t}\n}\n\nOverview.propTypes = {\n\tclassName: PropTypes.string,\n\n\tgridSize: PropTypes.number,\n\tchartType: PropTypes.string,\n\tcontexts: PropTypes.array,\n}\n\nOverview.defaultProps = {\n\tgridSize: 12,\n\tchartType: \"pie\",\n\tcontexts: [\"commissions\", \"surveys\", \"responses\"],\n}\n\nconst mapStateToProps = state => ({\n\tauth: state.auth,\n})\n\nexport default compose(\n\twithTheme,\n\n\tconnect(mapStateToProps, {})\n)(Overview)\n"],"sourceRoot":""}